t analysi temporalbas program behavior improv instruct cach perform a abstractin paper examin temporalbas program interact order improv layout reduc probabl program unit conflict instruct cach context present two profileguid procedur reorder algorithm techniqu use cach line color arriv final program layout target elimin first gener cach conflict ie conflict callercalle pair first algorithm build call graph record local tempor interact procedur describ call graph use guid placement step present method acceler cach line color explor aggress graph prune techniqu second approach captur global tempor program interact construct conflict miss graph cmg cmg estim worstcas number miss two compet procedur inflict upon one anoth reduc higher gener cach conflict use prune cmg graph guid cach line color use sever c c benchmark show benefit let type graph guid procedur reorder improv instruct cach hit rate contrast differ two form tempor interact also develop new character stream base interrefer gap irg model b introduct c ach memori found microprocessor design today cach instruct stream benefici sinc instruct refer exhibit high degre spatial tempor local still cach miss occur one three reason first time refer finit cach capac memori address conflict work focus reduc memori address conflict rearrang program avail memori space analysi program interact perform rang granular coarsest individu procedur begin consid procedur call graph order cgo associ program cgo captur local tempor interact weight edg number time one procedur follow anoth program execut also consid interact basic block contain within procedur identifi number cach line touch basic block conflict miss graph cmg attempt move basic block split procedur though weight cmg edg measur global tempor interact procedur occur finit window contain mani entri cach line program interact outsid window interest finit cach effect use graph input color algorithm produc improv code layout instruct cach character tempor behavior captur graph extend interrefer gap irg model defin three new irgbas stream describ differ level procedurebas tempor interact show use compar tempor content cgo cmg tempor relationship graph trg as describ gloy et al consider amount work done code reposit improv instruct cach perform follow section discuss work relat work here a relat work petti hansen employ procedur basic block reorder well procedur split base frequenc count minim instruct cach conflict layout program direct travers call graph edg decreas edg weight order use closestisbest placement strategi chain form merg node lay next entir graph process number relat techniqu propos focus map loop oper system code trace activ set two approach discuss reorgan code base compiletim inform profileguid algorithm describ use call frequenc weight graph guid placement first approach also use call frequenc improv perform intellig place procedur cach color cach line second algorithm describ paper captur global tempor inform attempt minim conflict present procedur immedi follow execut similar spirit approach describ differ highlight section v also graph color algorithm work finer level granular cach line size instead cach size avoid conflict encount either form chain closestisbest heurist deal subgraph size larger cach paper organ follow section ii iii describ graph construct algorithm section ii describ improv graph prune techniqu section iv report simul result section v review irg tempor analysi model present new method character program interact ii call graph order program layout may involv two step construct graphbas represent program use graph perform layout program avail memori space call graph procedur graph edg procedur call other edg weight callreturn frequenc captur program profil procedur map singl vertex call path two procedur condens singl edg two vertic graph edg weight deriv profil inform estim program control flow paper concentr profilebas edg weight construct call graph lay program use cach line color start divid cach set color one color cach line procedur count number cach line need hold procedur record cach color use map procedur keep track unavailableset color ie cach line procedur map to defin popular procedur set procedur frequent visit popular edg set contain frequent travers edg rest procedur and edg call unpopular unpopular procedur prune graph prune reduc amount work placement allow us focu procedur like encount miss discuss base prune algorithm use found note differ popular procedur procedur consum notic portion pro gram overal execut time time consum procedur may label unpopular rare switch control flow anoth procedur procedur rare switch control flow caus small number conflict miss rest procedur algorithm sort popular edg descend edg weight order travers sort popular edg list inspect state ie map unmap two procedur form edg map procedur use heurist figur provid pseudo code descript color map complet descript found process repeat edg popular set process unpopular procedur fill hole left color use simpl input graph gpe descend order base weight elimin threshold t foreach remain edg procedur pi pj selectst pi state pj case i pi unmap pj unmap arbitrarili map pi pj form compound node pij case ii both pi pj map resid two differ compound node ci cj concaten two compound node ci cj minim distanc pi pj color conflict shift ci color space conflict conflict avoid return ci origin posit case iii either pi pj map both case ii case iv both pi pj map belong compound node ck conflict return posit els move procedur closest end compound node ck pi end ck outsid compound node still conflict shift pi color space conflict occur pj conflict avoid leav pi origin posit updat unavail set color fill hole creat case ii iii iv fig pseudo code cach line color algorithm depthfirst travers unpopular edg join them algorithm fig assum directmap cach organ associ cach algorithm break address space chunk equal size number cach set cach line size therefor number set repres number avail color map modifi color map algorithm keep track number time color set appear procedur unavailableset color map procedur color set caus conflict long number time color set appear unavail set color less degre associ cach next look effici elimin major work spent color use aggress graph prune algorithm a prune rule procedur call graph prune call graph done use fix threshold valu select edg weight section present prune rule reduc size graph use cach color specif design reduc number line cach number procedur p node graph g sum incid edg procedur pi graph g sort procedur base increas nodeweight dowhil at least one procedur prune foreach unprun procedur pi number neighbor pi number cach line compris pi sum size numi neighbor pi prune procedur pi edg incid pi fig pseudo code c prune rule number firstgener cach conflict assum use directmap cach contain c cach line program repres undirect graph pe node edg i repres procedur call program number cach line span procedur size edg i j weighti j number time procedur j follow one anoth control flow in either order procedur map assign procedur sizei adjac cach line within cach with wraparound cost procedur map sum weighti j procedur j i overlap cach optim map one less costli map note cost map depend number immedi adjac procedur whose map cach conflict conflict procedur call one anoth consid further more cost assign two adjac procedur j conflict cach line constant equal number conflict even though actual number replac cach line may smaller b c prune rule consid cach map problem p possibl determin case particular node abl map cach without caus con flict regardless cach adjac node eventu map case i edg connect i delet graph creat new cach map problem p one less node figur provid pseudo code prune algorithm prune rule gener rule describ perform graph color graph color problem assign one k color node graph adjac node assign color node neighbor delet becaus regardless neighbor eventu col ore definit least one color left assign it delet node color revers order delet remain nonprun graph pass color algorithm color perform prune node must map node laid opposit order delet iii conflict miss graph next consid cach miss occur procedur mani procedur away call graph well differ call chain captur tempor inform weight edg procedur graph estim worst case number conflict miss occur two procedur use graph appli cach line color place procedur cach address space call graph conflict miss graph cmg complet algorithm describ summar contrast cgo section v use interrefer gap analysi a conflict miss graph construct cmg built use profil data assum worstcas scenario procedur complet overlap cach address space everi time interact given cach configur determin size procedur p cach line also comput number uniqu cach line span everi basic block execut procedur l identifi first time basic block execut label refer global uniqu access gl cmg undirect procedur graph edg weight accord worst case miss model edg weight updat base content nentri tabl n number cach line tabl fullyassoci use lru replac pol ici everi entri ie cach line tabl call live procedur least one live cach line also call live p activ updat edg weight p procedur least one live cach line activ sinc last activ if last activ captur lru tabl lru tabl allow us estim finit cach effect increment cmg edg weight p live procedur p j minimum of i accumul number uniqu live cach line p last oc currenc ii number uniqu cach line p s current activ exclud coldstart miss detail exampl updat cmg edg weight found cmg edg weight accur cgo edg weight i cgo edg weight record number cach line may conflict per call ii interact procedur directli call captur iv experiment result use tracedriven simul quantifi instruct cach perform result layout trace gener use atom dec axp workstat run digit unix v applic compil dec c v dec c v com piler input use train algorithm gather perform result simul kb directmap instruct cach byte line size similar design dec alpha instruct cach benchmark suit includ perl specint flex gener lexic analyz gs ghostscript postscript viewer bison c parser gen erat also includ pcdep c frontend written cc fdep fortran frontend written cc depc cc program translat sage intern represent c code ixx idl parser written c tabl present static dynam characterist benchmark column show input use test train algorithm column list total number instruct execut static size applic kilobyt number static procedur program column present percentag program contain popular procedur cmg column contain percentag procedur found popular for cmg last column present percentag unactiv procedur use fill gap left color map prune cmg graph form popular set procedur connect edg contribut total sum edg weight cmg notic prune algorithm reduc size cmg reduc size execut execut allow us concentr import procedur program a simul result compar simul result order produc dec compil static df order proce dure cgo use fix threshold valu prune no aggress prune employ tabl ii show instruct cach miss rate case input use train test first column denot applic column show instruct cach miss rate number cach miss df cgo cmg respec tive column show rel improv cmg df cgo respect see tabl ii averag instruct cach miss rate cmg reduc averag df order averag cgo order cmg improv perform static df cgo benchmark except bison flex gs bison flex alreadi low miss rate improv achiev gs larg number popular procedur map cach signific reduct miss rate next appli prune c prune rule cgo four benchmark bison flex gs perl also tri appli approach cmg found unabl significantli reduc size graph shown tabl iii iv prune rule delet node bison complet elimin firstgener conflict miss similarli node prune benchmark accompani signific drop number firstgener conflict miss howev drop time follow increas total number miss delet node edg contribut firstgener conflict miss color algorithm depriv inform use prevent higher order miss case bison benchmark node insert map complet disregard higher order conflict result suggest node prune rule c use part cach conflict reduct strategi pair techniqu prevent higher order cach conflict cancel benefit reduc firstord conflict b input train sensit sinc procedur reorder algorithm profil driven tri differ train test input file shown tabl v column train test input column show size trace million instruct test train input the last one parenthes last three column present miss ratio algorithm simul see tabl v although perform cgo cmg approach drop compar simul use input rel advantag cmg cgo static df still remain fact perform gain order benchmark ie cgo cmg achiev similar perform bison gs cmg improv significantli miss ratio ixx v tempor local procedurebas irg next character tempor interact expos cgo cmg tempor relationship graph use extend version interrefer gap irg model a procedurebas irg phalk gopinath defin irg address number memori refer success refer address irg stream address trace sequenc success irg valu address use character tempor local similarli measur tempor local larger program granul basic block cach line procedur accuraci newli gener irg stream depend interv granular work set program unit studi procedur vari interv definit program input instr exe size static pop proc unpop proc million kb proc exe size proc exe size perl prime k k flex fixit k k bison objpars k k pcdep sampl k k depc sampl k k gs tiger k k ixx layout k k attribut trace applic attribut includ number execut instruct applic execut size number static procedur percentag program size occupi popular procedur percentag procedur found popular percentag unactiv procedur use fill memori gap left appli color icach miss rate reduct icach miss program df cgo cmg df cgo df cgo cmg perl flex bison pcdep depc gs ixx avg ii instruct cach perform static df cgo cmgbase reorder column list applic column show instruct miss rate next two show percent improv algorithm last three column show number instruct cach miss program input visit prune prune prune proc st pass nd pass rd pass bison objpars flex fixit gs tiger perl prime iii result appli c prune rule call graph four applic pass refer prune iter graph algorithm finish node prune graph program cgo first higher c first higher miss rate order order miss rate order order bison flex gs perl iv result appli c prune rule call graph four applic cach paramet use abov program train test trace static df cgo cmg input input instr miss rate miss rate miss rate bison objpars cpars m flex fixit scan m gs tiger golfer m ixx layout widget m perl prime jumbl m miss ratio use differ test train input input describ column size correspond trace present column column includ instruct cach miss ratio origin irg model exploit tempor local singl procedur tempor interact procedur therefor redefin irg valu procedur pair a b number uniqu activ procedur invoc b refer valu interrefer procedur gap irpg cgo edg weight record part irpg stream sinc captur irpg valu length trg everi node repres procedur everi edg weight number time procedur vice versa found insid move time window window includ previous invok procedur size proport size cach window content manag lru queue tempor interact record trg character interrefer intermedi line gap irilg whose element equal number uniqu cach line activ success b invoc decis updat trg edg depend size window equival valu present irilg stream edg weight simpli count irilg element valu less predefin window size trg captur tempor interact detail level cgo irilg stream richer content irpg stream cmg edg weight procedur b updat b follow one anoth insid move time window proport size cach size cmg edg weight updat whenev irilg valu less window size trg cmg procedur interact long found insid time window cmg howev replac procedur time window base age individu line procedur trg manag replac entir procedur basi addit cmg edg weight b increment minimum uniqu live cach line success invoc b trg simpli count number time b follow other defin interrefer activ line set iral procedur pair sequenc number uniqu live cach line referenc success occurr b iral element valu comput accord worst case miss analysi present section iii cmg edg weight equal sum iral valu whose correspond irilg valu less window size tabl vi show irpg irilg iral element frequenc distribut two edg ixx benchmark select edg th th highest call frequenc cgo popular edg list label e e respect classifi stream valu rang shown column present per stream frequenc distribut column number parenthes indic close cgo approxim tempor inform captur stream consider exampl irilg element e lie rang uniqu cach line record cgo differ approach edg weight signific impact global edg order final procedur placement ixx cmg cgo popular edg set intersect edg index cgo order edg index order fig rel edg order intersect cmg cgo popular edg order ixx fig compar order common popular edg cgo cmg ixx point locat mean popular edg consider found rd cgo th cmg order point straight line correspond edg rel posit edg list point lie below straight line indic edg higher prioriti cgo cmg edg list notic edg fall straight line due artifici inflat edg index cmg edg list which much larger irpg th th irilg th th iral th th valu vi frequenc distribut irpg irilg iral sequenc two procedur pair th th call frequenc ixx benchmark program cgo pop cmg pop cgo cmg cgo pop cmg pop cgo cmg proc proc proc edg edg edg bison flex gs perl vii intersect cmg cgo popular procedur edg set cgo one differ prune algorithm use although lot highli weight edg maintain rel posit signific perform improv cmg came edg promot higher edg list order tabl vii show intersect cmg cgo popular procedur edg set column list cgo cmg popular procedur edg set along intersect number shown tabl vii sensit prune algorithm compar better illustr differ cmg cgo approach although one procedur set alway superset other cmg edg list alway larger cgo edg list vi acknowledg would like acknowledg contribut h hashemi b calder work research support nation scienc foundat career award program ibm research microsoft research vii conclus perform cachebas memori system critic today processor research shown compil optim significantli reduc memori la tenci everi opportun taken compil so paper present two profileguid algorithm procedur reorder take consider procedur size cach organ well cgo attempt minim firstgener conflict cmg target higher gener miss approach use prune graph model guid procedur placement via cach line color cmg algorithm improv instruct cach miss rate averag static depth first search procedur cgo also introduc three new sequenc irpg irilg iral base irg model better character content graph model r evalu associ cpu cach effici procedur map use cach line color profileguid code posit an interrefer gap model tempor local program behavior procedur placement use tempor order inform program optim instruct cach code reorgan instruct cach procedur map use static call graph estim achiev high instruct cach perform optim compil optim instruct cach perform oper system intens workload compiletim instruct cach optim predict program behavior use real estim profil regist alloc spill via graph color temporalbas procedur reorder improv instruct cach perform tr ctr altman david kaeli yaron sheffer guest editor introduct welcom opportun binari translat comput v n p march s bartolini c a prete optim instruct cach perform embed system acm transact embed comput system tec v n p novemb s bartolini c a prete propos inputsensit analysi profiledriven optim embed applic acm sigarch comput architectur new v n p june mohsen sharifi behrouz zolfaghari yaarc yet anoth approach reduc rate conflict miss journal supercomput v n p april