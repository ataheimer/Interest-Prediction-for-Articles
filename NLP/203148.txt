t approxim analysi readerwrit queue a analyz perform queue serv reader writer reader serv concurr writer requir exclus servic approxim analyz firstcomefirstserv fcf readerwrit queue deriv simpl formula comput wait time capac assumpt poisson arriv exponenti servic extend analysi handl onewrit queue queue includ writeintent lock simpl analys present use rulesofthumb design concurr system b introduct analys databas oper system concurr control algorithm handl case exclus access practic howev mani concurr control algorithm use share exclus lock share lock import increas concurr reduc serial delay paper describ queue model reader writer access share resourc reader place r read lock writer place w write lock number r lock may held simultan one w lock may place given time addit r w lock incompat cannot held simultan queu disciplin manag lock access fair reader starv writer vice versa common fair criterion fcf is lock ff arriv lock fi grant ff grant fi fcf lock queu mechan obey follow protocol job servic finish first job queue reader grant access reader first writer first job writer grant lock writer addit queue empti reader servic reader arriv grant lock reader see figur call type lock queue fcf readerwrit queue fcf rw queue short also analyz variat fcf rw queue variat call onewrit queue one writer queue time reader arriv rate much larger writer arriv rate onewrit queue mani applic for exampl analysi commun driver use onewrit queue model queue writeintent lock ruw queue ruw queue incom stream consist r u lock r lock compat u lock u lock compat other u lock occasion upgrad w lock exclus ruw queue model writeintent lock often use concurr data structur multigranular lock model develop predict expect wait time r w u lock addit model predict probabl w lock queue determin whether resourc serv offer load sever analys read write access share resourc context databas perform exampl tay handl readonli request modifi formula probabl lock conflict assum queu share data rare problem queu share data model context replic databas assum k copi file two differ copi file may read simultan coffman et al analyz satur queue write request preempt current reader coffman gelenb plateau analyz queue except reader may begin read copi file soon written baccelli coffman analyz preemptiv queue poisson arriv nelson iyer analyz nonpreempt queue job arriv poisson process fcf order read oper receiv exponenti distribut servic write oper receiv phase distribut servic the exponenti distribut exampl phase distribut nelson iyer analysi thought exact analysi approxim fcf rw queue reader writer receiv fcf servic k reader may serv simultan analysi requir iter step involv multipl k k matric courcoubeti et al analyz queu system k queue ordinari custom requir servic one queue lock custom requir servic queue simultan thomasian nicola use vacat server model studi optim control readerwrit queue courcoubeti reiman use system k queue ordinari lock custom studi optim control readerwrit queue reiman wright provid exact analysi stabil first queue system describ paper permit arbitrari reader writer servic time permit writer arriv process arbitrari renew process author also provid lower upper bound lock wait time heavi traffic approxim paper two main contribut first contribut simpl formula predict capac wait time fcf rw queu system formula provid simpl rule thumb design concurr system second contribut paper analysi onewrit queue ruw queue best knowledg queu system treat befor approxim fcf rw queue difficulti analyz readerwrit queue two differ class custom receiv differ type servic writer tractabl two class receiv exclus fcf servic therefor approxim readerwrit queue fcf queue aggreg custom writer togeth reader immedi ahead queue aggreg custom arriv rate w servic time equal servic time writer plu servic time reader immedi ahead it need calcul servic time reader enter queue enter writer previou writer two case either enter writer find anoth writer queue writer queue anoth writer queue enter writer must wait reader enter writer arriv otherwis writer must wait reader surviv have yet finish servic writer enter use follow symbol definit analysi reader arriv rate reader servic rate probabl writer queue or writer util expect time serv aggreg custom a writer reader arriv previou writer current writer must wait expect time writer must wait reader arriv previou writer previou writer still queue upon arriv current writer expect time writer must wait reader arriv previou writer previou writer finish current writer arriv expect wait time writer expect wait time reader time serv n reader r t number reader arriv second time writer find anoth writer queue number surviv reader servic time time custom spend receiv servic servic period total time custom spend queue servic timewait time main result section is theorem probabl writer queue ae w satisfi r r result need perform analysi are time n concurr reader serv reader serv concurr rate r dt pr r n proof model situat puredeath process let state k condit k reader left let p k t probabl system state k time t system state k time t reader die rate k r model p descript system lead follow system differenti equat dpn t dt gamman r pn t dt dt initi condit pn thi solut differenti equat is r p k xe krx dx solut recurr is last differenti equat tell us dp t dt corollari i proof dt r r last step applic combinatori ident found page ffl tool calcul expect time need serv reader front writer w anoth writer queue w enter need calcul number reader enter queue enter writer previou writer suppos time writer arriv t let random variabl r t number reader arriv second reader poisson arriv rate r t distribut calcul distribut number reader arriv arriv two writer find uncondit distribut r thi need know distribut t probabl interarriv period last least second given arriv writer find least one writer queue probabl interarriv period last least second servic period wait time plu servic time previou writer last least second let tw random variabl repres interarriv time writer find queue util then dt prtw dt printerarriv time t delta prpreviou writer still queue k normal constant suppos alreadi know expect servic time aggreg custom probabl writer queue ae model aggreg queue mm queue know servic period distribut wait time servic time probabl previou writer serv second have dt use distribut tw get dt prt w tdt r r r r ra ra lead lemma expect time serv reader front writer arriv queue alreadi contain writer is r proof random r use r calcul uncondit expect r a r ar order solv sum appli abel transform page deltax k r let k n k k use wellknown expans ln substitut valu a substitut w ae w multipli lead constant get r r r next must calcul expect wait time serv reader case writer enter queue find reader queue cannot use expect valu alreadi calcul reader may left queue writer enter queue calcul distribut number reader queue writer arriv intract instead distribut calcul expect number reader still queue consid three point time respect particular writer w enter queue find writer queue occas point previou writer enter queue occas b point previou writer left queue occas c point w enter queue see figur reader arriv departur independ consid expect number surviv reader ab bc separ need know length interv ab bc arriv distribut memoryless length bc exponenti distribut paramet w find approxim distribut length ab way found approxim distribut tw probabl ab last least second probabl previou writer servic period last least second writer interarriv time least second dt consid survivor bc first probabl reader enter queue time reader enter queue second c surviv probabl therefor expect number surviv reader bc second long uncondit distribut n bc r becom r r wr next consid survivor ab expect number survivor ab expect number reader arriv ab surviv bc suppos probabl surviv bc p k reader arriv ab expect number survivor n ab r k p equal kp remov depend n ab r k p k need know distribut number arriv ab sinc distribut ja bj distribut u w number reader arriv ab distribut r k kp ra ra interv bc second long probabl surviv use get uncondit distribut n ab r get r r expect number survivor w arriv order calcul expect wait time assum number surviv reader geometr distribut mean r number surviv reader calcul mean manner lemma get lemma expect time serv reader front writer find writer queue arriv is r now know expect servic time aggreg custom is use fact ae valu r e r u get r r prove theorem ffl find ae w find root ae w equat done iter nonlinear equat solv packag queue stabl ae w correct ae w found tri solv queue mm queue arriv rate w servic rate aw system expect wait time ae waw wait time aggreg custom wait time reader writer must also wait reader ahead finish so corollari aggreg queue model mm queue expect wait time reader writer custom are mg model also consid server network exponenti stage probabl ae w servic expect w second expect r u second probabl servic expect w second expect r e second laplac transform servic time server given by ae w r expect wait time mg queue given pg x servic time server valu x found differenti laplac transform twice evalu zero give corollari aggreg queue model mg queue expect wait time reader writer custom are e maximum throughput theorem use predict maximum throughput corollari maximum throughput w r w r satisfi e r w gamma w proof theorem solv r ffl note stabil condit deriv applic find maximum throughput queue proport reader writer constant corollari r maximum writer arriv rate is corollari impli increas reader servic rate better increas writer servic rate opposit true theorem also use find arriv rate ae comparison experi rw queue simul built experi run six hundr thousand sampl taken result simul compar analyt result tabl show comparison mm model simul analyt calcul ae w and therefor r u r e usual close result simul match best r w becom wors r much larger w seen figur mm model give good predict expect lock wait time r w r increas wait time predict mm model tend becom pessimist seen figur tabl show comparison mg model simul r ae w mg model better approxim mm model rate reader arriv close rate writer arriv aggreg custom servic distribut approxim well exponenti distribut rate reader arriv becom larg contribut reader servic time becom greater servic time distribut better approxim hyperexponenti distribut rule thumb choos best model use follow rule thumb r w use mg model otherwis use mm model figur show maximum writer reader arriv rate decreas increas reader writer arriv rate respect graph show cutoff point writer arriv rate reader arriv rate may increas almost arbitrarili writer arriv rate decreas larg due fact r e r u depend logarithm r increas aggreg custom servic time requir exponenti increas reader arriv rate onewrit queue section analyz readerwrit queue one writer ever queue protocol onewrit queue fcf rw queue fcf reader serv concurr further assum writer arriv rare compar reader let us calcul eww expect wait time w lock need know distribut number r lock front w lock w lock enter queue w lock arriv rare distribut number r lock queue approach steadyst mm distribut n r number r lock queue w lock arriv then let ww n wait time w lock n r lock queue w lock enter then corollari r combin corollari uncondit distribut ww is r find formulax exponenti integr algebra obtain g x cant expect simplifi close form combin get theorem expect wait time w lock onewrit queue is let us next calcul expect wait time r lock r lock wait w lock queue ahead it r lock arriv w lock servic r lock wait renew time w lock servic sinc assum exponenti distribut servic time expect renew time w probabl r lock arriv w lock servic w w r lock arriv w lock wait probabl eww as one w lock queue time r lock wait servic time w lock w plu remain time serv reader ahead w lock renew time w wait time distribut given first moment wait time distribut second moment alreadi calcul first moment eww need calcul second moment lemma distribut time n reader finish servic is dt pr r n use distribut number reader distribut ww is dt next find second moment ijo dt io ir io order simplifi sum let us express recurs relat sinc first sum simpli g ngamma second sum therefor problem reduc find simpler form gn function simpl differ suggest consid v x exponenti gener function gn tri find relationship lead solut deriv oper let us calcul differ exponenti gener function assum dv dx x linear differenti equat appli formula solut first order linear differenti equat dv dx r p dx z qe r p gammar e x x order find valu constant c evalu v find function g x also transcendent function cannot hope simplifi v x further use formula v x formula renew time get lemma expect residu time ww calcul r ww calcul ew r by give theorem expect wait reader onewrit queue is throughput onewrit queue limit arriv rate alway writer queue expect length time w lock queue w eww use theorem get corollari throughput onewrit queue limit proof arriv rate servic rate equal one alway w lock queue therefor arriv rate must less equal servic rate ffl asymptot function g x g x transcendent function cannot simplifi familiar function power seri form complet satisfactori calcul either g g grow slowli maximum term power seri grow rapidli even rel small valu x about limit precis algorithm cannot calcul function fortun g g simpl asymptot represent function g x relat exponenti integr exponenti integr x e gammat dt follow asymptot expans x use first asymptot expans use r x bound e x therefor approxim g x error less e gammax x use asymptot form g x get asymptot formula g x integr zero remov singular therefor break interv integr x two part a a x first interv integr power seri represent g x get valu g a second interv integr asymptot form r x constant c evalu use power seri g evalu g a error bound x dx e gammax x dx readerwriteupgradewrit queue section use result section analyz readerwriteupgradewrit queue ruw queue use three type lock read writeupgrad write lock abbrevi sa r u w lock respect w denot arriv rate r u lock r u respect assum proport u lock upgrad w lock denot servic rate r w lock r w respect servic time u lock depend wait time w lock assum r ae u u lock rare upgrad w lock result r ae w writer arriv rare assumpt result previou section appli the assumpt safe queue appli concurr btree algorithm exampl r lock block w lock u lock may block w lock anoth u lock w lock come convers request current u lock onli block r lock current servic thu r lock block u lock block w lock convers lead us consid strategi model ruw queue two queue one r w lock one u lock rw queue r lock serv simultan w lock enter queue w lock must wait preced r lock finish servic obtain control queue r lock enter queue w lock must wait w lock finish servic u queue u lock receiv fcf servic u lock servic might upgrad w lock w lock block u lock therefor rw queue u queue coupl increas servic time u lock expect servic period wait time servic time w lock list wait time three type lock w wait time w lock time preced r lock finish r wait time r lock is prw lock waitingw servicetim surviv rs finish prw lock servicetim w finish servic u wait time u lock wait time custom fcf queue arriv rate u servic time is servic period c probabl u lock convert w lock u expect time servic u lock lock upgrad w lock u expect time servic u lock upgrad w lock therefor input paramet queue r u r u u u theorem give expect wait w lock theorem give expect wait r lock need done calcul expect wait u lock expect servic time singl u lock is therefor util u lock queue is ae model u lock queue mm queue then theorem expect wait time u lock ruw queue sinc w lock gener u lock throughput ruw queue limit servic u lock corollari throughput ruw queue limit u g rr r comparison experi ruw queue built experi run six hundr thousand sampl taken tabl show comparison analyt simul result sinc onewrit queue ruw queue similar comparison appli onewrit queue also comparison show analyt model predict wait time well accuraci analyt model improv reader arriv rate increas conclus develop simpl yet accur model fcf readerwrit queue perform present formula predict share resourc capac wait time read write lock arriv rate produc desir system load formula simpl enough use rule thumb system design extend analys handl onewrit queue writeupgrad lock present formula predict lock wait time estim capac share resourc lock queue analyz paper use mani area concurr data structur commun channel r construct stationari regim queue lock concurr oper btree concurr control recoveri databas system introduct theori infinit seri model parallel access share data optim number copi distribut databas optim control queu system simultan servic requir stabil queu system concurr servic lock perform concurr data structur algorithm framework perform analysi concurr btree algo rithm queue system calcul special function gamma function spider system ltd differ equat probabilist model databas lock solut analysi replic databas stabil latenc concurrentx exclusivey perform analysi concurrentread exclusivewrit combinatori ident differenti equat applic histor note lock perform central databas analysi threshold polici schedul reader writer analysi threshold polici schedul reader writer perform evalu threshold polici schedul reader writer tr