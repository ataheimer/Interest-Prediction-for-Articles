t ration filter passiv depth defocu a fundament problem depth defocu measur rel defocu imag perform previous propos focu oper inevit sensit frequenc spectra local scene textur result focu oper laplacian gaussian result poor depth estim altern use larg filter bank dens sampl frequenc space though approach result better depth accuraci sacrific comput effici depth defocu offer stereo structur motion propos class broadband oper that use togeth provid invari scene textur produc accur dens depth map sinc oper broadband small number suffici depth estim scene complex textur properti addit depth confid measur deriv comput output oper confid measur permit refin comput depth map experi conduct synthet real scene evalu perform propos oper depth detect gain error less irrespect textur frequenc depth accuraci found distanc object imag optic b introduct pertin problem comput vision recoveri threedimension scene structur twodimension imag problem studi vision ha far attract attent result varieti sensor algorithm jarvi besl broadli classifi two categori activ passiv activ techniqu produc rel reliabl depth map appli mani industri applic howev environ cannot control case distant object outdoor scene activ method prove impract consequ passiv techniqu alway desir passiv sens method stereo structur motion reli algorithm establish local correspond two imag result dispar estim motion vector depth point scene comput process determin correspond wide acknowledg comput expens addit techniqu suffer occlus miss part problem possibl comput depth scene point visibl one imag altern passiv techniqu base focu anal ysi depth focu use sequenc imag taken chang focu set imag optic small step pixel focu set maxim imag contrast determin thi turn use comput depth correspond scene point horn jarvi krotkov darrel wohn nayar nakagawa contrast depth defocu use two imag differ optic set pentland subbarao en lawrenc bove jr subbarao surya nayar et al xiong shafer rel defocu two imag can principl use determin threedimension structur focu level two imag vari chang focu set len move imag sensor respect len chang apertur size depth defocu confront abovement miss part correspond problem make attract prospect structur estim despit merit point time fast accur dens depth defocu demonstr use activ illumin constrain domin frequenc scene textur nayar et al watanab et al past investig passiv depth defocu indic prove comput expens obtain reliabl depth map frequenc characterist scene textur are larg extent unpredict furthermor textur vari dramat imag sinc respons defocu blur function vari textur frequenc singl broadband filter produc aggreg estim defocu unknown textur cannot lead accur depth estim obviou solut use enorm bank narrowband filter comput depth leastsquar sens use domin frequenc textur xiong shafer gokstorp requir one forego comput effici worsen mat ter depth map high spatial resolut obtain filter bank small kernel size uncertainti relat bracewel tell us frequenc resolut filter bank reduc proport invers kernel size use short one cannot design filter narrow enough respons support area filter kernel small xiong shafer xiong shafer propos attract way cope problem use moment filter compens frequenc spectrum textur within passband narrowband filter approach result accur depth estim requir use four addit filter tune filter filter bank translat five time mani convolut need typic filter bank method xiong shafer xiong shafer use convolut total make approach comput expens en lawrenc en lawrenc propos method base spatialdomain analysi two blur imag estim convolut matrix convolv one two imag produc imag matrix correspond rel blur two imag matrix comput map depth estim method produc accur depth map how ever iter natur convolut matrix estim make comput expens subbarao surya subbarao surya propos stransform appli depth defocu model imag thirdord polynomi spatial domain arriv simpl eleg express subbarao surya far near focus imag respect blur circl diamet imag express second central moment oe oe respect sinc addit relat oe oe obtain focu set use two imag oe oe solv map depth estim see term depend scene frequenc equat consid sort texturefrequ invari depth defocu method produc reason depth estim larg planar surfac scene howev yield depth map high spatial resolut need depth variat scene signific argu requir detail analysi imag format well design novel filter base frequenc analysi paper propos small set filter oper passiv depth defocu oper use conjunct yield invari textur frequenc comput depth underli idea precis model rel imag blur frequenc domain express model ration function two linear combin basi function ration express lead us textur invari set oper output oper use coeffici depth recoveri equat solv get depth estim attract featur approach use small number broadband linear oper small kernel support consequ depth map comput high effici accuraci also high spatial resolut sinc oper deriv use ration express model rel imag blur refer ration oper ration oper gener that deriv blur model paper structur follow first concept textur invari oper set describ next oper need depth defocu discuss includ use prefilt coeffici smooth effici algorithm obtain confid measur oper output outlin confid measur effect use refin comput depth map specif implement ration oper use three basi function model rel blur function result set three ration oper kernel size theta oper set use comput depth map synthet scene real scene experiment result analyz quantifi perform propos depth defocu approach depth defocu principl fundament depth defocu relationship focus defocus imagesborn wolf figur show basic imag format geometri light ray radiat object point p pass apertur refract len converg point q imag plane relationship object distanc d focal length len f imag distanc given len lawd f point object plane project onto singl point imag plane caus clear focus imag f form if howev sensor plane coincid imag plane displac it energi receiv p len distribut patch sensor plane result blur imag clear singl imag includ suffici inform depth estim two differ scene defocus differ degre could produc ident imag solut depth estim problem achiev use two imag separ known physic distanc e en lawrenc subbarao surya distanc fl imag len also known given describ set problem reduc analyz rel blur scene point two imag comput posit focus imag restrict imag scene point must lie far focus sensor plane nearfocus sensor plane eas descript introduc normal depth ff equal gamma then use ffe len law obtain depth scene point r f figur imag format depth defocu two imag includ inform requir recov scene structur focus plane scene correspond two imag defocu function precis model defocu function critic accur depth estim defocu function describ detail previou work born wolf horn figur ffe distanc focus imag scene point defocus imag form sensor plane light energi radiat scene point collect imag optic uniformli distribut sensor plane circular patch radiu sigma ffe ad distribut also call pillbox defocu function use imag use imag pir rectangular function take valu jrj otherwis f e effect fnumber optic optic system shown figur f e equal a order elimin magnif differ near far focus imag use telecentr optic describ appendix detail watanab nayarb telecentr case f e equal fa fourier domain defocu function is where j firstord bessel function first kind u v denot spatial frequenc paramet x direct respect evid express defocu serv lowpass filter bandwidth filter decreas radiu blur circl increas ie plane focu get farther sensor plane figur illustr effect figur a show imag f x y form focus plane fourier spectrum f u v sensor plane displac distanc gamma ffe defocus imag convolut focus imag pillbox h x y shown figur b effect defocu spatial geometr model valid far imag exactli focus case wave optic model need describ point spread function further assum len induc aberr small compar radiu blur circl born wolf past investig use gaussian model instead pillbox model blur function mainli facilit mathemat manipul fourier transform gaussian function also gaussian convert quadrat function use logarithm see approach depth defocu form blur function use frequenc domain written as u sinc ff vari point point imag strictli speak spacevari system cannot express convolut therefor equat hold rigor sens howev assum ff constant small patch around pixel equat remain valid within small patch hereon use term fourier transform spectrum assum small imag patch assumpt ff variat patch small valid patch must small practic realiz requir one forc use broadband filter kernel size linear filter invers proport bandwidth filter figur c similar b except sensor lie distanc focus plane produc defocus imag again u note spectrum plot use polar coordin f r f spatial frequenc rather cartesian coordin u v defocu function usual rotat symmetr symmetri allow us express defocu spectrum use singl paramet name radial frequenc f see figur that sinc imag c defocus one b lowpass respons h u v greater h u v depth two imag introduc normal ratio p u equival spatial domain spectrum f u v focus imag appear equat get cancel normal ratio simpli a e fe x fe ae fe p a e a e fe x fe p a e ft ft ft fe ae a b c figur effect blur near far focus imag a focus imag f fourier spectrum b pillbox defocu model h fourier spectrum blur imag c pillbox defocu model h fourier spectrum imag larger blur f radial frequenc figur show relationship normal imag ratio mp normal depth ff sever spatial frequenc seen mp monoton function ff larg rule thumb frequenc rang equal width main lobe defocu function h maxim defocus ie distanc focus imag f sensor plane e zerocross defocu function figur highest frequenc normal imag ratio mp monoton found be given frequenc within bound sinc mp monoton function ff mp unambigu map depth estim fi shown figur figur relat normal imag ratio mp defocu paramet ff upper frequenc bound determin which mp monoton function defocu paramet ff given frequenc within bound mp unambigu map depth estim fi besid serv critic role develop figur also give us new way view previou approach depth defocu one method determin amplitud spectra two defocus imag predefin radial frequenc f uniqu depth estim obtain basic idea previou work base pentland gokstorp xiong shafer although ratio use past simpli i rather normal ratio mp introduc here magnitud two imag spectra predefin frequenc determin use linear oper convolut howev trivial problem imag textur unknown includ unpredict domin frequenc henc possibl fix priori frequenc interest problem may resolv use larg bank narrowband filter dens sampl frequenc space estim power larg number individu frequenc howev import tradeoff emerg implement narrowband linear oper gokstorp xiong shafer first approach clearli ineffici comput perspect furthermor uncertainti relat bracewel tell us that appli frequenc analysi small imag area frequenc resolut reduc proport invers area use obtain dens depth map one must estim h h use small area around pixel narrow filter spatial domain correspond broadband filter frequenc domain result oper output inevit averag local imag spectrum band frequenc sinc respons defocu function h depend local depth ff uniform within passband oper output oper is best approxim focu measur result larg error depth given linear oper howev care design end pass band would desir set broadband oper togeth provid focu measur invari textur further oper broadband small number could cover entir frequenc space avoid use extens filter bank result would effici robust highresolut depth estim next section describ method accomplish thi ration oper set model rel defocu use ration express establish monoton respons normal imag ratio mp normal depth or defocu ff frequenc see equat figur object model relat close form so would like model precis yet lead us small number linear oper depth recoveri end model function mp ration express two linear combin basi function basi function g p u v coeffici function frequenc u v u v ff residu error fit model function mp model accur residu error neglig becom possibl use model map normal imag ratio mp normal depth ff express rewritten as here ff left hand side repres actual depth scene point fi right estim depth differ two aris residu error nonzero normal ratio left side given us frequenc u v obtain depth estim fi solv equat model normal imag ratio gener principl basi captur monoton structur normal ratio use specif discuss use basi chosen implement sinc respons mp ff oddsymmetr almost linear small radial frequenc f r see figur could model respons use three basi function power fi then equat becom term includ fi seen small correct compens discrep mp linear model previou section know blur model complet determin mp given depth ff frequenc u v found replac b p ff tanh aff give us slightli better fit defocu model pillbox function yet reduc comput cost solv equat depth fi chosen simpl polynomi model polynomi model rfi u v therefor fit theoret mp equat assum fi ff give us unknown ratio g p gm g p gm function frequenc u v case rotat symmetr blur model pillbox function ratio reduc function radial frequenc f r now fix one coeffici function say g p u v coeffici determin ratio therefor possibl determin coeffici function ensur polynomi model accur fit normal imag ratio mp given equat figur show exampl set base arbitrari select g p u v coeffici function g p g p gm case pillbox blur model gener form ration express equat coeffici ration express determin multipl constant frequenc therefor have here u v unknown scale function coeffici function g p u v gm u v repres structur ratio obtain fit rfi u v ff frequenc respons unknown scale function u v need determin coeffici function without ambigu accomplish gener ration express describ section examin well polynomi model fit plot figur normal ratio precis interest know well model use estim depth end frequenc select true depth valu ff find correspond ratio mp use analyt express ratio plug polynomi model calcul depth estim fi use newtonraphson method process repeat frequenc let us rewrit equat as thirdord term consid small correct follow initi practic gp u v cannot select arbitrarili restrict need consid exact select procedur discuss later section gpfr fq gpfr fq gmfr fq figur exampl set coeffici function obtain fit polynomi model normal imag ratio mp here g p u v chosen remain two function determin fit invari fr figur depth fi estim use polynomi model equat plot function spatial frequenc differ valu actual depth ff see estim depth equal actual depth invari frequenc within upper bound f r max given equat valu provid newtonraphson method then solut one iter is figur show estim depth fi is practic purpos equal actual depth indic polynomi model inde accur further estim depth invari insensit textur frequenc far radial frequenc f r f r max frequenc limit f r max respons ff shown figur becom nonmonoton within region accur depth estim obtain practic imag convolv use passband filter ensur frequenc f r max remov rule thumb use determin f r max given equat howev pillbox blur model found via numer simul f r max fact time larger limit given equat e valuabl sideeffect introduc normal imag ratio mp util frequenc spectrum inform convent method use ratio i ration oper set introduc ration express model normal ratio mp shown solut equat give us robust depth estim frequenc within permiss rang thu far robust demonstr individu frequenc section show ration model use design small set broadband oper handl arbitrari textur number increas larger number newtonraphson iter use howev depth result addit rang numer stabl presenc nois sinc respons curv mp tend flatten out henc use one iter take crossproduct equat get integr entir frequenc space get where here invok power theorem bracewel where f u v gu v fourier transform function fx y gx y respect sinc conduct spatialfrequ analysi is analyz frequenc content small area center around pixel right hand side equat noth convolut impli cm ff c p ff actual function x y determin convolut as invers fourier transform gm u v short coeffici need comput depth use polynomi equat determin convolv differ imag mx y sum imag px y linear oper spatial domain equival coeffici function refer ration oper output oper pixel x y plug equat determin depth fix y exampl use model equat depth recoveri equat becom substitut equat have again ration oper noth invers fourier transform coeffici function shown figur see that though oper broadband see figur recoveri equat independ scene textur provid effici mean comput precis depth estim implement ration oper previou section describ theori underli ration oper section discuss variou design implement issu must address ensur ration oper produc accur depth defocu particular describ design procedur use optim ration oper kernel estim depth confid measur prefilt imag prior applic ration oper postprocess output oper sinc ration express model equat gener focu simpler model equat use experi howev procedur describ appli form ration model design ration oper kernel sinc ration oper broadband linear filter implement small convolut kernel benefici two reason a low comput cost b high spatial resolut howev shall see design problem trivial note that deriv oper function g equat must ratio equal one obtain fit polynomi model normal imag ratio discrep ratio would natur caus depth estim error fortun base form function u v equat remain discret adjust minim discrep impli u v select arbitrarili rather given conveni initi form optim clearli effect discrep ratio would vari frequenc henc depend textur properti scene design oper kernel therefor done minim object function repres ratio error frequenc relat depth estim error ratio error deriv appendix argu appendix that depth error kept minimum ratio error must satisfi follow oe gm u oe g p u oe gm u v oe g p u v determin weight function use minim error gm u v g p u v here constant deriv express set u v equal g p u v ie g p u therefor equat u g p u now posit formul object function oper design follow oe gm oe gm p u v actual ratio design discret kernel gm u v g p u v ratio obtain previou section fit polynomi model normal imag ratio oe gm constant use ensur minim produc trivial result zerovalu oper actur dc respons design discret kernel g gm initi valu summat discret frequenc sampl suffici dens kernel size n theta n frequenc sampl least n theta n order avoid gibb phenomenon oppenheim schafer optim use theta sampl point theta kernel sinc nonlinear minim done use levenbergmarquardt algorithm press et al still need defin p u v ff equat depend unknown textur imag howev sinc p u v ff use fix weight function equat rough approxim suffic end assum distribut imag spectrum be optim use correspond brownian motion though p u v ff chang ff use approxim p u v denot fractal dimens peitgen saup h two dimension case last issu concern base form function u equat initi select made function refin optim gm u must order realiz gm u use finit kernel also g p u v must smooth without rapid fluctuat obtain ration oper small kernel implement impos rotat symmetri ad constraint use laplacian gaussian initi g p u v g p f r f peak f peak where f peak radial frequenc g p maximum frequenc set f nyquist optim again function use initi refin optim exampl set discret ration oper obtain optim present shortli prefilt discuss prefilt need appli input imag x y y purpos remov dc compon high frequenc appli ration filter dc compon harm small chang illumin two imag caus unanticip bia imag mx y bia would propag error coeffici imag cm x y sinc gm oper appli mx y essenti lowpass filter thi turn would caus depth error end spectrum radial frequenc greater f r max see equat also harm violat monoton properti mp need ration oper work therefor high frequenc must also remov although possibl emb desir prefilt within ration filter given prefilt done use linear oper chosen use separ prefilt follow reason sinc prefilt attempt cut low high frequenc tend larg kernel embed prefilt ration oper would requir oper also larg kernel thu result low spatial resolut well unnecessari addit comput hold true correspond case extrem fractal correspond brownian motion correspond smooth imag final correspond white nois complet random imag equat mp zero ju vj sinc ff nonzero gm u must zero equat valid ration oper design prefilt pose optim object function let us defin desir frequenc respons prefilt fu v reason state earlier frequenc respons must cut dc compon high frequenc addit frequenc respons smooth rotat symmetr ensur small kernel size function desir properti laplacian gaussian given right hand side equat use f defin object function as oe pass oe stop frequenc respons design prefilt kernel oe pass oe stop repres weight assign passband stopband region prefilt respect stopband levenbergmarquardt algorithm press et al use determin prefilt kernel exampl set discret ration filter figur show kernel frequenc respons ration oper prefilt deriv kernel size set theta ef pixel order make oper uniformli sensit textur direct impos constraint kernel must symmetr respect x axe well line constraint reduc number degre freedom dof kernel design problem case theta kernel dof reduc reduc theta theta kernel dof small design oper desir frequenc respons therefor smallest kernel size chosen k note passband respons prefilt figur refin kernel size increas final design issu pertain maximum frequenc f r max sinc discret fourier transform kernel size k minimum discret frequenc period k difficult obtain precis respons frequenc region k further spectrum region go suppress prefilt close dc compon therefor maximum frequenc f r max must well k express condit f r ks use equat obtain e condit interpret follow maximum blur circl diamet ef e must smaller kernel size k also intuit reason kernel larger blur circl seek measur blur coeffici imag smooth appli prefilt ration oper figur imag mx y px y obtain coeffici plug equat comput depth fi howev problem aris solv depth c p x equat close zero depth estim becom unstabl evid solut step equat sinc frequenc respons g p x y cut dc compon figur a zerocross usual common coeffici imag c p x y ff also obviou that imag area weak textur c p x approach zero solv problem appli smooth oper coeffici imag enabl us avoid unstabl depth estim zerocross coeffici imag otherwis must remov ad hoc postfilt optim smooth oper minim depth error need analyt model depth error use depth recoveri equat get here drop paramet x y breviti solv dfi get c p small correct factor follow approxim made c p denot standard deviat error cm c p c p oe cm oe cm oe cm respect simplifi matter assum error independ other then get hoel oe fi sinc condit relat kernel size rough suggest linear depth estim check use synthet imag find best kernel size k evalu report experiment section weak textur equival low spectrum power high frequenc region gamma gamma gamma gammac c c c c c c c c c c c gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma c c c c c c c c c c c c pref ilter gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gamma gammac c c c c c c c c c c c figur ration oper kernel deriv use kernel size theta ef pixel regardless scene textur passiv depth defocu accomplish use small oper set ua g b g p uc g p d prefilt figur frequenc respons ration oper shown figur express use give us estim depth error invers estim oe fi view depth confid measur use combin adjac depth estim maximum likelihood sens obtain accur depth estim also one wish appli depth defocu differ scale use pyramid framework jolion rosenfeld burt adelson darrel wohn gokstorp confid measur use combin depth valu differ level pyramid equat oe c oe c p oe c p constant defin readout nois imag sensor use frequenc respons ration oper hand fi assum local constant sinc depth expect vari smoothli point imag fact lead us to error model place develop method coeffici imag smooth multipli equat c p x y ff sum depth valu neighborhood r pixel get c p x c p x where fi depth estim coeffici smooth sinc last term equat small correct fi approxim by fi c p c p x c p c p equat see fi weight averag raw depth estim fi neighborhood r weight oe fi x statist hoel know optim weight averag independ variabl whose varianc oe obtain weight x oe therefor weight averag depth estim view optim varianc oe result depth estim fi given byoe henc coeffici smooth equat optim that minim error estim depth fi addit result smooth coeffici c p x proport invers varianc fi ie oe fi clear equat therefor smooth coeffici c p x y ff use confid measur postprocess comput depth map anoth method cope zerocross cp coeffici imag base hilbert approach detail watanab nayara prefilt prefilt far focus imag near focus imag ration oper coeffici smooth depth comput figur flow depth defocu algorithm use datacub mv pipelin processor entir algorithm execut littl msec obtain theta depth map algorithm figur illustr flow depth defocu algorithm implement far near focus imag first ad subtract produc px y mx y respect convolv prefilt subsequ three ration oper result coeffici imag smooth local averag final step comput depth coeffici use singl iter newtonraphson method use equat altern depth comput achiev use precomput twodimension lookup tabl lookup tabl configur take c input provid depth fix y output summari depth map gener twodimension convolut simpl smooth coeffici imag straightforward depth comput step oper execut effici use pipelin imag processor one use datacub mv pipelin processor comput realiz use pipelin entir depth defocu algorithm execut msec imag size theta effici algorithm come use ration oper set far superior exist depth defocu algorithm attempt comput accur depth estim xiong shafer gokstorp experi experi synthet imag first illustr linear depth estim invari textur frequenc use synthet imag synthet imag shown figur correspond planar surfac inclin away sensor normal depth valu top bottom plane includ vertic strip differ textur properti left strip textur narrow power spectra whose central frequenc left right th strip white nois next two strip fractal dimens respect peitgen saup near far focus imag gener use pillbox blur model defocu condit use ef pixel experi digit imag use size theta depth map estim use theta ration oper theta coeffici smooth shown gray code imag figur c wirefram figur d evid propos algorithm produc high accuraci despit signific textur variat vertic strip figur summar quantit result obtain experi figur includ plot a gradient estim depth map b rm root mean squar error oe comput depth c averag confid valu point squar plot correspond one strip imag number left right see number next squar note gradient estim depth map noth depth detect gain figur a show gain invari except left three strip slight gain error left three strip ratio gm u vg p u v high low frequenc result a farfocus imag b nearfocus imag c graycod depth map d wirefram depth map figur depth defocu appli synthet imag inclin plane accur recov despit signific textur variat g p u v small low frequenc region small error g p u v caus larg error ratio low valu g p u v lowfrequ textur reflect extrem low confid valu correspond strip howev low frequenc cut prefilt depth error suppress exist frequenc compon one want util low frequenc pyramid jolion rosenfeld darrel wohn construct ration filter appli level pyramid depth map comput differ level pyramid combin maximumlikelihood sens use confid measur easili comput along coeffici imag use equat figur b c show rough agreement confid measur plot function oe center freqgain f f f acent freq c f f f bconfid f f f freq distribut confid figur analysi depth error textur inclin plane shown figur point squar plot correspond singl textur strip inclin plane number a gradient comput depth map correspond depth detect gain invari depth estim imag textur evid b rm error oe comput depth c depth confid valu seen rough agreement oe figur synthet imag gener assum staircas like threedimension structur step staircas textur use figur comput depth map accur depth discontinu sens sharp preserv demonstr high spatial resolut propos algorithm spike two left strip due extrem low depth confid valu area case natur textur enough textur contrast low confid valu unlik frequenc textur provid suffici inform robust depth estim a graycod depth map a wire frame plot depth map figur depth defocu appli synthet imag staircas textur stair strip figur depth discontinu estim high accuraci reflect high spatial resolut produc propos algorithm experi real imag imag real scene taken use soni xc monochrom camera len use cosmicar bd fmm len convert telecentr len use addit apertur make magnif invari defocu see appendix watanab nayarb result telecentr imag shift far near focus imag lower pixel len apertur set f farfocus imag taken len focus mm camera nearfocus imag len focus mm two distanc chosen scene point lie them focu set result maximum blur circl radiu ef pixel two focu set imag averag sec get imag high signaltonois ratio figur show result obtain scene includ varieti textur figur a b farfocus nearfocus imag respect figur c d comput depth map wirefram plot depth map curv planar surfac detect high fidel high resolut without postfilt theta median filter get even better depth map shown figur e a farfocus imag b nearfocus imag c graycod depth map without postfilt d wirefram plot c wirefram plot theta median filter figur depth defocu algorithm appli real scene complex textur figur show result scene includ area extrem weak textur as white background clay cup figur a b farfocus nearfocus imag respect figur c d comput depth map wirefram plot imag area except white background area produc accur depth estim depth confid valu oe textur background object distanc error tabl surfac rel object distanc even white background area reason depth map despit fact textur weak see confid map figur e reflect lack textur motiv us develop modifi algorithm call adapt coeffici smooth repeatedli averag coeffici comput ration oper confid valu reach certain accept level figur f show depth map comput use algorithm last experi seek quantifi accuraci depth estim target use plane paper similar textur background scene figur plane move step mm depth map plane comput posit sinc estim depth fi measur imag side map object side use len law equat optic set process condit use previou experi plot figur illustr algorithm excel depth estim linear rm error line fit measur depth mm slight curvatur plot probabl due error optic set as focal length apertur depth valu theta area use estim rm depth error posit planar surfac figur rm error plot sigmao error bar rm error rel object distanc seen vari object distanc close object object farther mm partli map depth measur imag side depth object side reason error estim depth oe fi larger scene point larger fi seen equat note rm error depend coeffici smooth postfilt stage found empir error gaussianlik distribut use distribut one show error reduc factor depth map convolv theta averag filter definit error often use quantifi perform rang sensor a farfocus imag b nearfocus imag c graycod depth map d wirefram depth map confid valu map f wirefram adapt coeffici smooth figur depth defocu appli scene includ weak textur white background larger error region weak textur reflect confid map adapt coeffici smooth algorithm use confid map refin depth estim region weak textur actual depth mm estim depth fit error figur depth estim linear textur plane plane move increment mm away len plot distanc measur len rm error rel object distanc conclus propos class ration oper passiv depth defocu though oper broadband use togeth provid invari scene textur sinc broadband small number oper suffici cover entir frequenc spectrum henc ration oper replac larg filter bank expens comput perspect advantag come without need sacrific depth estim accuraci resolut detail procedur use design ration oper exampl construct theta oper use polynomi model normal imag ratio howev notion ration oper gener repres complet class filter design procedur describ use construct oper base ration model normal imag ratio further ration oper deriv desir blur function addit ration oper discuss wide rang issu pertin depth defocu particular detail analys techniqu provid prefilt near far focus imag well postprocess output ration oper oper output also use deriv depth confid measur measur use enhanc comput depth map propos depth defocu algorithm requir total convolut test algorithm use synthet scene real scene evalu perform found depth detect gain error less regardless textur frequenc depth accuraci found object distanc sensor result sever natur extens a sinc scene area expect low textur frequenc would meaning emb propos scheme pyramidbas process framework imag area domin low frequenc higher frequenc higher level pyramid propos algorithm appli level pyramid result depth map combin use depth confid measur b given effici al gorithm worth implement realtim version use pipelin imag process architectur datacub mv estim algorithm would result least depth map per second theta resolut c present im plement vari posit imag sensor chang focu set altern apertur size vari ration oper deriv optic setup use basi function b p see watanab nayara d final would worthwhil appli algorithm outdoor scene larg structur appendix problem imag registr ration oper give accur result farfocus imag near focus imag need precis regist within pixel respect one anoth howev convent lens magnif vari focu set henc misregistr introduc further experi mechan chang focu set and process introduc translat two imag len aberr small misregistr decompos two factor global magnif chang global translat two factor magnif chang prove much harm chang correct use imag warp techniqu darrel wohn wolberg howev gener introduc undesir effect smooth alias sinc warp base spatial interpol resampl techniqu use optic solut problem describ follow section detail watanab nayarb telecentr optic imag system shown figur effect imag locat point p move along princip ray r sensor plane displac caus shift imag coordin imag p variat imag magnif defocu manifest correspond like problem depth defocu correspond point imag need estim blur approach problem optic perspect rather comput one consid imag format model shown figur modif made respect model figur use extern apertur apertur place frontfoc plane ie focal length front princip point len simpl addit solv problem magnif variat distanc ff sensor plane len simpl geometr analysi reveal ray light r scene point pass center apertur emerg parallel optic axi imag side len kingslak result despit blur effect imag coordin point p imag coordin focus imag q f given offth shelf len apertur easili append case len result optic system call telecentr len nomin effect fnumber classic optic figur fa a respect equal fa telecentr case magnif chang reduc order less ie pixel theta imag detail discuss telecentr implement found watanab nayarb recent use idea develop realtim activ depth defocu sensor nayar et al watanab et al translat correct seen previou section magnif chang farfocus nearfocus imag avoid focu set chang translat may also introduc translat correct done use imag process without introduc harm imag artifact howev process must care r a f f figur constantmagnif imag system depth defocu achiev simpli place apertur frontfoc plane optic result telecentr optic avoid need regist farfocus nearfocus imag watanab nayarb implement sinc seek pixel registr two imag procedur use briefli describ detail watanab nayarb use fftphase base local shift detect estim shift vector subpixel accuraci divid fourier spectra correspond local area two imag fit plane phase ratio spectra gradient fit plane noth rel shift two imag get shift vector sever posit imag similar transform use model shift vector field fit vector similar model estim global translat residu magnif chang separ watanab nayarb residu magnif correct tune apertur posit telecentr optic translat correct shift imag opposit direct need subpixel accuraci interpol imag resampl gener regist imag interpol function lanczo window sinc function wolberg sinc translat correct remain constant entir imag singl shift invari convolut achiev desir shift though convolut distort imag spectrum sinc imag undergo amount shift distort imag common distort elimin normal imag ratio mp comput applic ration filter translat correct found maximum registr error experi small pixel oper respons depth error deviat ratio function g p u v gm u v filter design obtain fit polynomi model normal imag ratio vari frequenc u v henc depend textur scene filter design describ section need relat ratio error depth estim error start equat get g p u v g p u v here fi f u v depth estim singl frequenc u v sinc u v ratio condit fix defin g p u becom differenti get where mu v ff p u v ff treat constant sinc wish find error fi f u v caus error gm u v g p u v solv dfi f u v get sinc g p u v small correct factor approxim by equat sinc c p c p c p repres small correct depth estim fi approxim integr frequenc du dv henc error fi caus error fi f u v is combin express equat have du dv optim valu dgm u v dg p u v would minim depth error dfi question trivial dgm u v dg p u v influenc complex way avoid either two term integrand numer take disproportion larg valu decid assum term constant valu give us follow bound dgm u v dg p u v oe gm u oe g p u where jfi f u vj set repres worst case ie largest normal depth error acknowledg research conduct center research intellig system depart comput scienc columbia univers support part product engin research laboratori hitachi part david lucil packard fellowship author thank yasuo nakagawa hitachi ltd support encourag work r rang imag sensor principl optic fourier transform applic laplacian pyramid compact imag code pyramid base depth focu matrix base method determin depth focu comput depth outoffocu blur use local frequenc represent introduct mathemat statist focus memo robot vision perspect rang find techniqu comput vision pyramid framework earli vision optic system design journal comput vision shape focu effect approach rough surfac scienc fractal imag new sens depth field numer recip c depth defocu spatial domain approach parallel depth recoveri chang camera paramet minim oper set textur invari depth defocu telecentr optic constantmagnif imag digit imag warp depth focus defocus moment filter high precis comput focu stereo tr ctr m boissenin j wedekind a n selvan b p amavasai f caparrelli j r travi comput vision method optic microscop imag vision comput v n p juli a n rajagopalan s chaudhuri uma mudenagudi depth estim imag restor use defocus stereo pair ieee transact pattern analysi machin intellig v n p novemb lime chen georgi kukharev tomasz ponikowski pca reconstruct base approach extend facial imag databas face recognit system enhanc method comput secur biometr artifici intellig system springerverlag london m boissenin j wedekind a n selvan b p amavasai f caparrelli j r travi comput vision method optic microscop imag vision comput v n p juli vinay p namboodiri subhasi chaudhuri defocu diffus depth estim pattern recognit letter v n p februari paolo favaro stefano soatto geometr approach shape defocu ieee transact pattern analysi machin intellig v n p march reinhard erum arif khan depthoffieldbas alphamatt extract proceed nd symposium appli percept graphic visual august coroa spain lyubomir zagorchev ardeshir goshtasbi paintbrush laser rang scanner comput vision imag understand v n p februari