t formal verif standard distanc vector rout protocol a show use interact theorem prover hol togeth model checker spin prove key properti distanc vector rout protocol three case studi correct rip standard sharp realtim bound rip stabil preserv loopfreedom aodv distanc vector protocol wireless network develop verif techniqu suit rout protocol gener case studi show signific benefit autom support reduc verif workload assist find new insight gap standard specif b introduct aim paper studi method autom reason use prove properti network rout protocol carri three case studi base distanc vector rout studi provid proof autom formal sens comput aid construct check proof use formal mathemat logic abl show autom verif key properti feasibl base ietf standard draft specif effort achiev autom proof aid discoveri use properti direct attent potenti troublesom boundari case autom proof also supplement mean assur like manual mathemat proof test eas workload tediou check case provid thorough analys certain kind condit case studi first case studi prove correct asynchron distribut bellmanford protocol specifi ietf rip standard classic proof pure form protocol given result cover addit featur includ standard improv realtim respons time eg split horizon poison revers featur add addit case consid proof autom support reduc impact complex ad extens make theori better match standard henc also implement proof also use differ techniqu one provid noteworthi properti network stabil second case studi provid sharp realtim converg bound rip term radiu network around node worst case bellmanford protocol converg time bad number node network howev maximum number hop sourc need travers reach destin k the radiu around destin link chang rip converg k timeout interv destin easi see converg occur within proof sharp bound k complic number case need check show use autom support verif base approach develop previou case studi thu network maximum radiu destin converg interv even network node assum time interv rip standard network converg within minut link chang find statement result literatur may folklor knowledg main point show autom support cover realtim properti rout protocol third case studi intend explor autom support assist new protocol develop effort consid distanc vector rout protocol aris work manet ietf work group mobil ad hoc network specif choic adhoc ondemand distanc vector aodv protocol perkin royer specifi second version ietf internet draft protocol use sequenc number protect format loop wide note shortcom rip proof loop cannot form given show deriv properti gener invari path form aodv essenti recast proof contradict posit result use invari analyz condit concern failur fulli specifi could affect preserv key invari treat properli primari conclus autom verif tool aid analysi emerg protocol specif accept scale effort timetomarket verif network standard autom logic reason comput system wide known formal method success number domain prove properti comput instruct set perhap establish applic mani major hardwar vendor program model verif system use formal method anoth area success safeti critic devic instanc studi invari weapon control panel submarin model contractor design document studi led good simul panel locat seriou safeti violat applic formal method softwar slower process noteworthi success avion system air traffic control system other one key impedi appli formal method nonsafeti critic system concern exist specif softwar system necessari know softwar intend satisfi verif possibl mani softwar system technic specif exist verif document properti mean check invari inlin code comment exampl user manual except lack document softwar telecommun area research penchant detail technic specifica tion rip offer case studi motiv earli implement distanc vector rout incompat router run rip domain need use implement user implementor led correct problem provid specif would defin precis protocol packet format find result standard precis enough support without signific supplement detail proof correct term invari referenc specif prove properti guarante hold conform implement network conform router rip perhap better averag respect sinc standard seek bind close underli theori distanc vector rout simpler altern rout approach stage rip highli season standard whose shortcom identifi substanti experi say rip alreadi verifi referenc theori substanti gap asynchron distribut protocol prove correct algorithm differ sever nontrivi way model differ state maintain differ analysi narrow gap extend result theori appli standard version protocol natur expect newer protocol possibl specifi sequenc draft standard gap like evolv use applic formal method project must track instabl locat error gap quickli leverag activ like revis draft standard develop simul implement test agil tool method extend analysi rip newer applic distanc vector rout emerg area mobil ad hoc network ad hoc network network form mobil comput without use central author varieti protocol develop network includ mani base distanc vector rout requir rout protocol ad hoc network quit differ kind network consider like highli variabl connect low bandwidth link given rapid rate evolut area sheer number new idea seem like appropri area test case formal method part protocol design effort verif attribut rout protocol varieti success studi commun protocol instanc provid proof key properti ssl handshak protocol howev studi date focus endpoint protocol like ssl use model involv two three process repres endpoint adversari instanc studi rout protocol must differ flavor sinc proof work two three router interest unless gener rout protocol gener follow attribut influenc way formal verif techniqu appli essenti unbound number replic simpl process execut concurr dynam connect assum fault toler requir process reactiv system discret interfac modest complex real time import mani action carri timeout limit respons timeout rout protocol attribut latenc inform flow limit exampl feasibl global concept time need protect network resourc attribut sometim make protocol complex instanc asynchron version bellmanford protocol much harder prove correct synchron version rip standard still harder prove correct addit complic optim intend reduc latenc paper verifi protocol use tool gener hol tune verif commun protocol spin tool describ section rest paper focus applic case studi key techniqu replica gener techniqu consist consid first router r connect interfac network n satisfi properti a prove r satisfi properti b next step attempt prove properti c r assum properti hold n b properti router n satisfi b proof organ sequenc replica gener use techniqu other provid proof correct rip section proof sharp realtim bound converg rip section proof path invari aodv section offer conclus statist final section approach formal verif comput protocol long chosen target verif valid effort primarili protocol design often introduc subtl bug remain hidden run protocol bug nevertheless prove fatal system occur section discuss complex involv verifi network protocol propos autom tool support task exampl consid simpl protocol leaderelect network variant protocol use discov span tree extend lan network consist n connect node node uniqu integ id node least id call leader aim protocol everi node discov id leader accomplish thi node maintain leaderid estim leader is base inform far initi node believ leader everi p second node send advertis contain leaderid neighbor receiv advertis node updat leaderid receiv lower id messag protocol involv n process react incom messag state system consist integ leaderid process event occur messag transmiss initi process themselv howev due asynchron natur process messag transmiss could occur order mean period p second could n possibl sequenc event system need react to easi see manual enumer protocol event state sequenc becom imposs n increas complex protocol manual trace path protocol even singl sampl trace becom tediou errorpron autom support kind analysi clearli requir wellknown design tool protocol analysi simul howev simul elect protocol would first fix network size topolog specifi length simul final run protocol look trace given initi state singl sequenc event simul process although inform provid complet verif verif provid guarante behavior protocol network length time possibl initi state everi sequenc event occur discuss two autom tool help provid guarante first describ modelcheck spin use simul possibl verifi protocol given network and initi state describ interact theoremprov hol which manual effort use verifi gener mathemat properti protocol arbitrari network model check use spin spin modelcheck system wide use verifi commun protocol spin system three main compon promela protocol specif languag protocol simul perform random guid simul modelcheck perform exhaust statespac search verifi properti hold possibl simul system verifi leaderelect protocol use spin first model protocol promela promela model consist process commun messagepass along buffer channel process modifi local global state result event promela process model leader elect protocol singl node given tabl hardcod tabl leader elect promela defin node defin bufsiz chan chan broadcast intint int leaderidnod proctyp node int me int myid int advert els skip true broadcastmeleaderidm od network broadcast mechan simul protocol use spin spin simul behavior protocol random sequenc event view valu leaderid period simul provid valuabl debug inform well intuit possibl invari system final use spin verifi prove elect protocol succe node network involv specifi correct properti linear tempor logic ltl case specif simpli insist leaderid node eventu stabil correct id verifi carri exhaust search ensur properti true everi possibl simul system fail allow event sequenc verifi indic failur along counterexampl subsequ resimul discov possibl bug interact theorem prove use hol hol theorem prove system wide use generalpurpos verif environ main compon hol system function program languag use specifi function higherord logic use specifi properti function proof assist allow user construct proof properti use inbuilt userdefin proof techniqu program model proof environ gener capabl prove mathemat theorem design proof strategi user respons order model leaderelect protocol hol need model process messagepass function framework take cue reactiv natur protocol input protocol potenti infinit sequenc messag process consid function take messag input describ system state modifi result model essenti function tabl note gener tabl state updat function function updat receiv mesg els statereceiv els statenod program platform allow us defin protocol arbitrari network uniform way specifi properti desir protocol theorem wish prove hol theorem eventu everi node leaderid minimum node id network order prove properti specifi lemma must true protocol well easili encod higherord logic node leaderid decreas time lemma state network unchang messag node n node n well messag n n leaderid n n must same lemma node leaderid becom correct stay correct final construct proof desir theorem proof assist organ proof ensur proof complet bugfre first prove lemma case analysi state possibl messag point time then lemma use prove state network must progress node leaderid moreov sinc leader node leaderid never chang lemma node must end correct leaderid proof carri simpl deduct style manag proof assist proof one mani differ proof could develop hol system exampl instead correct interest prove long protocol take elect leader could prove follow lemma recal p interv advertis lemma node within distanc k leader becom correct second node within distanc must becom correct within second conjunct lemma provid inform induct proof theorem model check vs interact theorem prove describ two system address common protocol verif problem two system clearli differ payoff spin offer comprehens infrastructur easili model simul commun protocol fix verif strategi domain hand hol offer power mathemat infrastructur allow user develop gener proof spin verif gener bound memori express hol verif bound manmonth techniqu code protocol first spin use hol address limit express spin achiev use hol prove abstract show properti like properti p hold two router hold arbitrarili mani router or advertis distanc assum equal k k also abstract proof hol use reduc memori demand spin proof assur spin implement properli reflect standard give exampl tradeoff case studi summar statist data conclus stabil rip assum reader alreadi familiar rip protocol specif given good exposit found formal terminolog model univers u bipartit connect graph whose node partit network router router connect least two network goal protocol comput tabl router provid network n length shortest path n next hop along one path protocol view inappropri network hop router destin network hop count limit maximum network mark hop away consid unreach proof show that destin d router eventu obtain correct shortest path d entri router r consist three paramet current estim distanc metric an integ inclus ffl nextnr next network rout d ffl nextrr next router rout d r nextrr must connect nextnr say r point nextrr initi router connect must metric set other must set valu strictli greater two router neighbor connect network univers chang state ie rout tabl reaction updat messag sent neighbor router updat messag repres tripl snd net rcv mean router src send current distanc estim network net router rcv case caus receiv router updat rout entri infinit sequenc messag snd said fair everi pair neighbor router r exchang messag infinit often properti simpli assur router commun rout inform neighbor distanc defin ae r connect neighbor rg otherwis k kcircl around set router say univers kstabl follow properti hold everi router r c k metric set actual distanc is r connect d next network next router set first network router shortest path d is s everi router r c k given kstabl univers say router r distanc k stabl optim rout is proof result first goal show rip inde eventu discov shortest path length less theorem correct rip k start arbitrari state univers u fair sequenc updat messag time k u kstabl time k particular stabil achiev origin goal notic result appli arbitrari initi state critic fault toler aspect rip sinc assur converg even presenc topolog chang long chang frequent appli theorem period them proof call radiu proof differ one describ asynchron bellmanford algorithm rather induct estim upper lower bound distanc induct radiu kstabl region around d proof two attribut interest state properti rip protocol rather asynchr distribut bellmanford algorithm closer analysi reveal subtl substanti differ two case bellmanford router keep neighbor recent advertis metric estim wherea rip keep best valu furthermor bellmanford metric rang set posit integ rip metric satur regard infin final rip includ certain engin optim split horizon poison revers exist bellmanford algorithm radiu proof inform show correct achiev quickli close destin slowli away exploit next section show realtim bound converg theorem prove induct k four part it lemma univers u initi stabl lemma preserv stabil k univers kstabl time t kstabl time t lemma k router r univers kstabl time k time rk stabl time rk univers u kstabl time k time k k u stabl time lemma easili prove hol serv basi overal induct lemma fundament safeti properti also prove hol part prove either tool typic done spin sinc provid autom lemma main progress properti proof prove spin spin use verif model constant upper bound number state wherea model lemma can principl arbitrarili larg state space problem solv find finitari propertypreserv abstract system check desir properti abstract system use spin proof abstract inde propertypreserv done hol proof whole illustr well two system prove properti team interestingli enough argument use previouslyprov lemma preserv stabil instanc replica gener prove one invari allow us simplifi ie abstract system thi turn facilit deriv yet anoth properti lemma induct step deriv hol easi gener lemma consid fact number router finit time bound rip stabil previou section prove converg rip condit fact topolog stay unchang period time calcul big period time must be thi need knowledg time protocol event must occur case rip use follow fundament time assumpt valu delta everi topologyst time interv length delta router get least one updat messag neighbor assumpt make time updat messag rip router normal tri exchang messag everi failur receiv updat within second treat link failur thu satisfi fundament time assumpt rip previou section concentr particular destin network d time analysi base notion weak kstabil say univers u weakli kstabl follow condit hold kgammast hopsr k weak kstabil stronger stabil weaker kstabil disjunct ws which distinguish weak stabil ordinari stabil typic introduc addit complex case analys aris reason weak stabil kstabil follow lemma preserv weak stabil k univers weakli kstabl time t weakli kstabl time t must also show initi state inevit becom weakli stabl messag exchang everi pair neighbor lemma initi progress topolog chang univers becom weakli stabl delta time main progress properti say take updat interv get weakli kstabl state weakli stabl state properti shown two step first show condit ws stabil hold delta lemma k univers weakli kstabl time t kstabl time delta show condit ws ws follow put step togeth lemma progress k univers weakli kstabl time t weakli k stabl time delta radiu univers with respect d maximum distanc d r routerg main theorem describ converg time destin term radiu theorem rip converg time univers radiu r becom stabl within maxf rg delta delta time assum topolog chang time interv theorem easi corollari preced lemma consid univers radiu r show converg r delta delta time observ happen deltainterv time delta weakli stabl by lemma delta delta weakli stabl by lemma r r delta delta rstabl by lemma rstabil mean router r hop away shortest rout d sinc radiu univers r includ router interest observ progress ordinari kstabil ordinari kstabil guarante happen less delta leav reader consequ chosen calcul converg time use stabil rather weak stabil would get wors upper bound delta fact upper bound sharp linear topolog updat messag interleav way converg time becom bad r delta delta figur show exampl consist k router dr r r rk figur maximum converg time radiu k respect d router r connect correct metric router r also correct metric point wrong direct router rout d state r ignor messag r rout better r think it alreadi ha howev receiv messag r point r updat metric lose rout suppos that point on messag interleav way everi updat interv router first send updat messag receiv updat messag neighbor caus exactli one new router discov shortest rout everi updat interv router r rout second interv r kth show upper bound k delta delta reachabl proof methodolog lemma prove spin lemma consequ lemma theorem deriv corollari hol spin turn extrem help prove properti lemma involv tediou case analysi illustr thi assum weak kstabil time t let us look take show condit ws weak stabil hold delta time ws hold lemma effort requir ws prove ws let r router weak kstabil time t two possibl r r kstabl neighbor neighbor r hop k show r eventu progress either kstabl state state hop k need break case three subcas respect properti router r point to a r point c k the kcircl neighbor r c k b r point c k r anoth neighbor c k s c r point c k case branch sever subcas base rel order r possibl send receiv updat messag proof hand difficult prone error essenti proof deeplynest case analysi final case straightforward provean ideal job comput do spin verif divid four part account differ possibl topolog part distinguish process repres r anoth process model environ r environ abstract rest univers gener messag sequenc could possibl observ r sometim model simplifi allow environ gener sequenc possibl realiti affect confid posit verif answer sinc invari hold less constrain environ also hold constrain one spin consid case manual proof would requir altogeth lemma check second cpu time even count setup time verif signific timesav result proof probabl also reliabl manual one summar similar analys result conclus verifi properti aodv mobil ad hoc network model consist number mobil node capabl commun neighbor via broadcast pointtopoint link mobil node natur broadcast media make link temporari low bandwidth highli lossi node use router forward packet point time node thought form connect ad hoc network multihop path node environ goal rout protocol discov maintain rout node essenti requir protocol would react quickli topolog chang discov new rout send minim amount control inform maintain good rout data packet throughput maxim distancevector protocol like rip probabl satisfactori requir howev behavior protocol drastic alter presenc topolog chang exampl rip link goe down network could take infinit time updat period adapt new topolog presenc rout loop network result call countingtoinfin problem rout loop could avoid distancevector protocol would strong candid rout mobil adhoc network varieti propos distanc vector protocol avoid loop format consid aodv recent introduc protocol aim minim flow control inform establish rout demand analysi base version draft specif network run aodv everi node n maintain two counter sequenc number seqnon broadcast id broadcast idn sequenc number increment node discov local topolog chang broadcast id increment everi time node make routediscoveri broadcast node also maintain rout tabl contain rout destin need send packet to rout contain hopcount hop n next node next n rout also contain last known sequenc number seqno n destin measur fresh rout sourc node need discov rout destin d broadcast routerequest rreq packet neighbor rreq packet contain follow field hs seqno hop cnt d seqno broadcast idsi rreq thought request rout least fresh last known destin sequenc number seqno s time packet inform recipi node hop cnt hop away node s whose current sequenc number seqno consequ node receiv new rreq rebroadcast increment hop cnt cannot satisfi request use sourc inform packet everi intermedi node also set reverserout node sent rreq broadcast id use identifi and discard multipl copi rreq receiv node rreq reach node fresh enough rout d node unicast routerepli rrep packet back s rememb node forward rreq set revers rout use unicast rrep packet contain follow field hs d seqnod hop cnt lifetimei rreq case messag provid inform hop cnt seqnod recipi node use set rout d rout assum valid lifetim millisecond node receiv rrep updat rout pass along toward request sourc node increment hop cnt case receiv node alreadi rout d use rout maximum seqnod one least hop cnt process use establish rout network stabl howev link along rout goe down sourc node need recogn chang look altern rout achiev thi node immedi upstream link send rrep messag neighbor activ use rout rrep messag hop cnt set infin seqnod set one plu previous known sequenc number forc neighbor recogn rout unavail forward messag activ neighbor relev node know rout failur note howev process depend node directli connect link abl detect unavail link failur detect assum handl linklay mechan not node run hello protocol requir neighbor send period hello messag indic avail path invari mention befor essenti properti aodv handl topolog chang loopfre hand proof contradict given provid autom proof fact corollari preserv key path invari protocol invari also use prove rout valid first model aodv spin promela process node describ earlier process need maintain state form broadcastid sequenc number rout tabl follow write seqno d denot ds sequenc number seqnod process need react sever event possibl updat state main event neighbour discoveri data control rreprreq packet arriv timeout event like link failur detect rout expir rel straightforward gener promela process then prove follow invari over time aodv process node n everi destin d theorem next seqno seqno n invari two import consequ loopfreedom consid network instant look routingt entri destin d data packet travel toward would move along path defin next pointer howev know theorem hop along path either sequenc number must increas hopcount must decreas particular node cannot occur two point path guarante loopfreedom aodv rout valid loopfreedom finit network guarante data path finit guarante path end d howev sequenc number along path same hopcount must strictli decreas by theorem particular last node n l path cannot hopcount infin no rout sinc n l rout d must equal d prove theorem first prove follow properti rout tabl node n consid function time lemma seqno lemma seqno hop suppos next defin lut last updat time last time t next n chang n claim follow lemma hold time lut lemma next seqno n lut hop hop lemma prove spin use promela model describ earlier lemma prove without restrict event produc environ lemma trickier requir model record incom seqno protocol decid chang next n n easili done addit two variabl subsequ lemma also verifi spin proof three lemma togeth impli theorem involv standard deduct reason hol failur condit previou section describ promela model aodv claim straightforward develop protocol model standard specif clear possibl event correspond action are internet draft leav boundari condit unspecifi particular say initi state node must be assum reason initi state name one node sequenc number broadcastid rout tabl empti proof previou section carri initialst assump tion howev unclear assumpt necessari importantli would aodv implement chose default rout sequencenumb fail satisfi crucial properti approach problem identifi key invari must satisfi strategi node may use reboot choos invari theorem target effort sinc violat invari may result break loopfreedom properti newlyiniti node n break invari exactli two way mean node initi rout goe n node n rout n even though n come up impli n previous activ fail node failur notic n key choic left implementor are whether node failur detect neighbor whether node initi default rout whether node initi arbitrari sequenc number howev choic programm make must compli invari prove theorem keep mind analyz possibl choic first find failuredetect necessari otherwis possibl next rout d so part invari theorem immedi broken loop may form instanc n may soon look rout accept rout n offer thu form loop assum failur detect safest answer disallow initi rout ensur invari cannot violat therefor loop freedom preserv hand initi rout allow multipl failur would make invari imposs guarante choic come play destin d initi assum rout itself choic obey invari presenc failur detect moreov never member rout loop mean choic abov tabl protocol verif effort task hol spin model rip line def lemma line prove lemma lemma case step prove lemma lemma case step line state prove lemma reus lemma abstract line state prove lemma reus lemma abstract line state prove lemma reus lemma abstract line state prove lemma reus lemma abstract line state model aodv line def line prove lemma line state prove lemma line state prove lemma line state prove theorem lemma case step would safe next irrespect invari suggest analysi lead follow theorem aodv loopfre suffici node failur detect neighbor initi state node n a rout n itself b destin d either n rout d next n implement aodv conform theorem exampl simpl way guarante nodefailur detect insist node remain silent fix time come up sure previou absenc detect ensur rest condit straightforward conclus paper provid extens autom mathemat analysi class rout protocol date result show possibl provid formal analysi correct rout protocol ietf standard draft reason effort speed thu demonstr techniqu effect supplement mean improv assur manual proof simul test specif technic contribut includ first proof correct rip standard statement autom proof sharp realtim bound converg rip autom proof loopfreedom aodv tabl summar experi complex proof term autom support tool complex hol verif human verifi describ follow statist measur thing written human number line hol code number lemma definit number proof step proof step measur number instanc hol construct then hol autom contribut measur number case discov manag hol measur number thenl weight number element argument list complex spin verif human verifi measur number line promela code written spin autom contribut measur number state examin amount memori use verif mention befor spin memori bound verif took less minut time gener proport memori lemma consum spinminimum mb memori lemma requir mb figur collect run lightlyload sun ultra enterpris mb memori cpu run suno tool version use hol spin carri parallel proof lemma stabil preserv lemma use hol hol togeth spin extens result paper possibl sever area addit pro tocol better tool support techniqu prove kind properti could prove correct properti similar one paper rout protocol includ approach like link state rout would challeng prove ospf complex protocol specif techniqu use would appli much need done intend pursu better tool support particular interest integr simul implement code may allow us leverag sever relat activ also improv conform key artifact standard spin program hol invari environ model simul code and cours implement itself one program analysi technolog particular interest slice sinc import know part program might affect valu messag also interest prove addit kind properti secur qualiti servic includ reserv assur secur particularli challeng difficulti model secreci precis acknowledg would like thank follow peopl assist encourag roch guerin elsa l gunter luke hornof sampath kannan insup lee charl perkin jonathan smith research support nsf contract ccr darpa contract f r reliabl data network rout cluster multihop secur socket layer introduct hol theorem prove environ higher order logic appli scr requir method weapon control panel experi report rout inform protocol home page hol interact theorem prove system design valid comput protocol spin model checker rout internet carri addit inform ospf version highli dynam destinationsequenc distancevector rout dsdv mobil comput ad hoc demand distanc vector aodv rout algorithm distribut comput span tree extend lan interconnect bridg router review current rout protocol ad hoc mobil wireless network tr data network design valid comput protocol tempor logic reactiv concurr system interconnect bridg router introduct hol model check abstract highli dynam destinationsequenc distancevector rout dsdv mobil comput rout internet model checker spin effici rout protocol wireless network appli scr requir method weapon control panel analysi bgp converg properti algorithm distribut comput spanningtre extend lan stabl internet rout without global coordin fault origin adjud adhoc ondemand distanc vector rout ctr shahan yang john s bara model vulner ad hoc rout protocol proceed st acm workshop secur ad hoc sensor network octob fairfax virginia michael compton sten protocol implement udp verifi isabel proceed australasian symposium theori comput p januari newcastl australia steve bishop matthew fairbairn michael norrish peter sewel michael smith keith wansbrough engin logic hol specif symbolicevalu test tcp implement acm sigplan notic v n p januari nick feamster hari balakrishnan detect bgp configur fault static analysi proceed nd confer symposium network system design implement p may steve bishop matthew fairbairn michael norrish peter sewel michael smith keith wansbrough rigor specif conform test techniqu network protocol appli tcp udp socket acm sigcomm comput commun review v n octob sebastian nanz chri hankin framework secur analysi mobil wireless network theoret comput scienc v n p novemb alwyn goodlo carl a gunter markoliv stehr formal prototyp earli stage protocol design proceed workshop issu theori secur p januari long beach california alma l juarez dominguez nanci a day composit reason portbas distribut system proceed th ieeeacm intern confer autom softwar engin novemb long beach ca usa