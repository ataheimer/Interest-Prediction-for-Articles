t firstord topolog queri a one import class spatial databas queri class topolog queri is queri invari homeomorph studi topolog queri express standard queri languag spatial databas firstord logic variou amount arithmet main technic result combinatori character express power topolog firstord logic regular spatial databas b introduct express power firstord logic finit relat databas well understood ahv ef much less known spatial databas also call constraint databas relat longer finit finit repres klp notion gener invari queri isomorph fundament relat databas model gener spatial databas variou way pvv given group g transform tran lation affin isometri similar homeomorph s etc queri q ggener databas instanc transform fog denot set ggener firstord queri gener firstord queri undecid pvv express power fo g understood via sound complet decid languag languag said sound g contain fo g queri complet g express fo g queri choic group g depend inform one interest in gvv give sound complet languag sever natur group transform translat affin isometri similar case group homeomorph left open appear proceed th ieee symposium logic comput scienc c ieee queri invari homeomorph also call topolog queri fundament import variou applic spatial databas ex ampl geograph databas queri like is region adjac region b is road b is island come natur therefor topolog queri receiv lot attent literatur eg kpv psv sv kv basic result known topolog queri connect region express firstord logic gs gs bdlw think geograph databas again planar or dimension databas instanc relat embed plane r particular import psv proven topolog properti planar spatial databas repres finit structur call topolog invari instanc sv shown topolog invari use answer topolog queri particular sv proven firstord topolog queri spatial databas automat translat fixpoint queri topolog invari translat firstord topolog queri spatial databas firstord queri topolog invari proven possibl special case singl relat repres close region left open sv whether translat could extend case sever re gion answer question neg idea repres topolog inform spatial databas instanc topolog invari two import drawback sens topolog invari contain much inform ideal would want store inform actual access queri languag which usual fo furthermor topolog invari straightforward gener higher dimens issu find invari suitabl fo and comput dimens rais kpv special case one singl relat repres close planar region cone structur given kpv captur precis firstord topolog inform intuit cone structur finit set contain possibl small neighborhood point result kpv show that context firstord topolog queri could express local properti situat known true finit case kpv ask whether result gener databas instanc region necessarili close give neg answer question instanc one close region satisfi addit technic condit fulli two dimension kv introduc cone logic cl prove sound complet topolog fo ask result gener instanc necessarili close region sever region give neg answer kpv introduc two local oper spatial databas instanc preserv equival firstord topolog queri call topolog elementari e quival call two instanc equival transform instanc homeomorph appli oper kpv finit often main technic result rest easili follow especi simpl instanc call regular equival topolog firstord equival coincid paper organ follow recal basic definit spatial databas section section discuss topolog planar spatial databas topolog invari detail section introduc topolog firstord queri review result kpv section prove equival decid pspace main result regular instanc prove section section deriv firstord topolog queri translat firstord queri topolog invari section briefli discuss problem find languag sound complet topolog fo preliminari spatial databas fix underli structur r real either let r r r poli vocabulari r ie either point jja bjj rg open ball radiu r around a matter fact could let r ominim structur real main result would remain true poli may also let n assum done figur look better sinc interest topolog queri make differ subset r n n rdefin firstord formula x vocabulari r schema finit collect region name let n ndimension spatial databas instanc associ rdefin set r r n everi r set r call region formal may interpret region name nari relat symbol view instanc firstord structur vocabulari r obtain expand underli structur r relat r paper consid dimension or pla spatial databas instanc conveni also assum region bound ie everi instanc schema everi r exist r jjajj b r bounded assumpt inessenti easili remov occasion simplifi matter queri nari queri for n schema map q associ rdefin subset qi r n everi instanc consid r one point space let r queri usual call boolean queri basic queri languag take firstord logic fo vocabulari r defin nari queri i fa g schema topolog planar instanc r equip usual topolog interior set r denot int closur cl boundari bd say set r touch point r cl two set touch touch point vice versa stratif stratif fundament fact make topolog instanc easi handl stratif instanc finit partit r s either one point set homeomorph open interv homeomorph open disk cl cl union element s r either r follow lemma follow fact region instanc rdefin proof found vdd lemma everi instanc exist stratif color cone let instanc pre color point r map a fint bdi bde extg defin int intr bde bdr n r ext r n clr precel maxim connect set point precolor cone point r denot conea circular list precolor precel touch a lemma impli cone welldefin finit point r regular everi neighborhood u point u otherwis singular follow lemma instanc finit mani singular point call instanc regular singular point cone figur two singular two regular cone regular singular point also call regular singular resp cf figur conetyp denot cti list cone appear furthermor everi singular cone list also record often occur color point r pair cell cell color maxim connect set point color color cell c denot c lemma impli finit mani cell assumpt region bound impli precis one unbound cell call exterior lemma impli everi cell well defin dimens either dimension cell precis set fag singular point let c set cell instanc defin binari adjac relat e c let two cell adjac if if touch call graph cell graph partit c three subset c c consist dimension cell respect observ graph g tripartit partit c planar lemma let instanc c c c c either c homeomorph open disk exist c homeomorph open disk dm hole definit let dm n cl c homeomorph sphere open interv proof follow easili lemma skeleton instanc set dimension cell dimension cell homeomorph note skeleton regular instanc empti lemma let instanc everi connect compon graph g n tree particular regular g tree proof follow jordan curv theorem lemma figur illustr typic connect compon instanc remov skeleton note everi con figur nect compon graph g n uniqu ex terior cell may consid root tree tree direct fix root may speak parent children node follow observ use later lemma let instanc c c adjac c exist adjac c topolog invari two instanc j schema homeomorph homeomorph r r r ha r j topolog invari instanc expans cell graph carri enough inform character instanc homeomorph vocabulari r ari r r unari restrict feg cell graph g dim consist idimension cell x contain exterior the uniqu unbound cell everi r unari relat r consist cell subset r give orient equival relat quadrupl c adjac c two quadrupl equival either clockwis order cell adjac c f g b appear anticlockwis order cell adjac c f g note empti regular instanc proven psv j homeomorph iff j isomorph comput time polynomi size sinc g planar graph canon planar graph p time actual assum canon sens homeomorph instanc j sv proven foqueri translat linear time fixpointcount queri furthermor foqueri translat foqueri instanc one close region more precis mean recurs map associ everi fo vocabulari f rg fo vocabulari frg instanc frg r close set question left open whether result extend instanc one arbitrari region sever region section give neg answer question variou way defin orient equival sv precis ptime algorithm that given instanc i comput onetoon map c a canon number homoemorph instanc i j map isomorph j topolog queri topolog elementari equival topolog queri queri topolog everi homeomorph h r instanc denot set firstod formula defin topolog queri wellknown and easi see set fo top decid follow lemma collect basic foqueri proof easi exercis lemma everi color firstord x everi instanc everi r a everi y fo formula bd fo everi instanc bd formula x fo everi instanc note everi color formula fo top moreov fo top formula bd fo top particular case r hand formula fo top topolog elementari equival two instanc j topolog elementari equival denot j satisfi topolog firstord sentenc proven kpv frg instanc j r r j close set have j see next section equival cannot extend instanc one arbitrari region sever region prove result kpv introduc two simpl local oper transform instanc elementari equival one straightforward extens sever region depict figur read fol low suppos instanc contain open subset r homeomorph one left hand side figur differ shade grey display differ color replac correspond subset right hand side cf kpv detail note oper symmetr go right left appli oper again first second two oper figur instanc j write j transform instanc homeomorph j applic for f g figur oper preserv j j transform finit sequenc oper proof kpv easili yield lemma instanc j have j open question whether convers lemma hold particular interest known whether decid not wherea decid pspace thi proposit next sec tion kpv shown coincid instanc one close region extend result sever region instanc regular cone minim instanc definit instanc minim satisfi follow two condit homeomorph iar adjac c homeomorph dm adjac b homeomorph lemma ptime algorithm associ everi instanc minim instanc mi mi done way homeomorph instanc j proof suppos first satisfi m show transform instanc j fewer cell violat m two applic let c dimension cell homeomorph neighbor c color neither homeomorph d instanc local look like figur appli twice to dash box obtain instanc local look like figur obvious reduc number cell violat m figur suppos satisfi m transform instanc j fewer cell violat m applic without violat m see thi let b dimension cell adjac cell c homeomorph color cell homeomorph adjac two dimension cell let neighbor color distinguish two case case c c children b reduc number cell violat m applic figur figur case c parent b c child figur show proceed figur ptime algorithm transform given instanc minim instanc mi may proceed follow given algorithm first comput invari possibl ptime psv oper translat simpl local oper algorithm first appli pair m hold as figur hold done simpl greedi strategi result structur toplog invari minim instanc mi shown psv that given invari instanc j comput polynomi time canon cf page algorithm also guarante homeomorph instanc j languag instanc fundament curv instanc rdefin continu map lim a jjf ajj f fundament curv everi dimension cell set f c finit union open interv one form a one form b everi dimension cell c set f c finit union close interv some may singl point follow fact f rdefin interest finit sequenc color appear fundament curv ie finit word w f i alphabet consist color appear say word w realiz fundament curv f w f languag li set word realiz exampl let instanc r fa r j jjajj g five cell c fa color c respect note c color c figur b figur exampl word realiz cf figur hard see li describ finit automaton display figur from exampl easi see everi languag li regular accept automaton essenti cell graph formal let instanc defin finit automaton where new symbol denot cell fc denot exterior note graph underli cell graph g extend one addit vertex adjac exterior proof follow lemma straightforward lemma everi instanc automaton accept li thu li regular languag walk graph e sequenc n map almost immedi everi instanc wn walk g usual ext denot exterior proposit decid pspace proof given two instanc j want check pspace whether possibl go j use homeomorph oper given instanc possibl comput invari ptime psv thu problem reduc check pspace whether j deriv use oper polynomi mani differ way appli oper one consid tupl cell check appli tupl let i set invari obtain appli one oper previou remark show i contain polynomi mani element comput ptime therefor possibl enumer topolog invari deriv appli oper check step whether correspond j not latter done ptime decid whether two planar graph isomorph give strategi ensur process stop mi mj comput ptime lemma assum j minim easi see oper chang cone instanc involv therefor j impli j conetyp cf page orient relat o check ptime cone determin number dimension cell homeomorph impli instanc j j respect skeleton verifi js may view skeleton j embed planar graph dimension cell vertic dimension cell homeomorph edg let f f j resepect denot face embed graph note face correspond precis connect compon g n g j n j re spectiv number connect compon j bound c ji j number cone therefor number face j given euler formula jf j number connect compon j e v number edg vertic bound ji j jf j j give linear in ji j bound number connect compon g j n j would also like bound size connect compon g j n j or equival number dimension cell homeomorph un fortun repeat applic oper may produc arbitrari larg compon nevertheless possibl decid pspace whether k instanc k isomorph k j preserv color orient o furthermor k comput pspace complex pspace need produc extra dimension cell homeomorph process would restrict number possibl connect connect compon skeleton without loss gener assum j minim isomorph skeleton recal everi face f f f f j correspond connect compon f g n g j n j respect lemma f tree canon root exterior cell find whether j isomorph preserv color orient check whether instanc j everi face f f f denot face correspond f isomorph i suffic prove follow everi f f claim either j j transform instanc j respect compon f isomorph if ffg compon g remain h f j n fifg compon h j remain j decid pspace two altern hold latter j also comput pspace go isomorph pspace fix one also fix face f f go need follow definit branch tree minim walk go root one leav walk g said regular never goe singular cell let set color j word w defin mw word comput use rule spirit lemma precis mean rewrit word w use rule color fact let x regular walk g start possibl transform way f contain branch x x prove singl loop length start end without loss gener assum xn dimension cell start construct xn new ball vn vn colo easili done appli onc assum next construct subinst whose cell graph path attach x appli order get v surround v i vn kind induct but start begin word time show convers also hold fact possibl construct use oper new branch f exist walk x g start e f m t say walk x realiz word w check pspace whether given word realiz walk g start e f one way see reduc problem question whether two regular languag nonempti intersect prove claim first transform branch x if start e if let w x check whether walk x realiz w x case fact show j case use fact construct correspond branch construct j revers role j clear algorithm find j way minim result instanc satisfi claimin next section conveni work slight simplif cell graph call dimension cell b ext instanc inessenti b homeomorph disk and thu precis one neighbor g neighbor c b g anoth neighbor b let h graph obtain g delet vertic inessenti cell call h reduc cell graph actual hold h instead g wn walk h regular instanc recal instanc regular point r regular main result section coincid regular instanc corollari see equival extend beyond instanc one close region illustr problem are let us start simpl exampl exampl let consid two instanc j r fa jjajj g r j j r cf figur obvious j conetyp figur let us tri find sentenc fo top j j first glanc look easi take sentenc say everi horizont line intersect region r intersect region befor everi instanc homeomorph satisfi everi instanc homeomorph j satisfi unfortun fo top figur show whi three instanc display homeomorph last one satisfi see later sentenc fo top distinguish j quit complic now let us note j figur recal lemma cell graph thu reduc cell graph regular instanc tree think tree direct exterior root leav dimension cell homeomorph disk d instanc j write h h j embed h h h j preserv defin accordingli lemma regular instanc j h h j if if j homeomorph proof backward direct trivial forward direct let j regular instanc h h j follow lemma g g j sinc regular instanc orient empti impli thu j homeomorph psv recal definit minim instanc mi associ instanc inspect proof lemma show regular instanc minim regular instanc reduc cell graph h follow nice properti c vertex h neighbor c h differ color lemma let mn minim regular instanc proof easi consequ recal regular languag l aperiod exist n n u v w uv n w l also uv n w l wellknown theorem mcnaughton papert mp schutzenberg sch aperiod languag precis languag defin firstord logic follow lemma use later base fact reduc cell graph regular instanc tree furthermor precis starfre regular languag lemma let minim regular instanc lm aperiod proof let minim regular instanc crucial step prove follow claim let walk h suppos contradict wrong choos l minim v l n walk sinc adjac vertic cell graph and thu reduc cell graph differ color y l l notat conveni let nl choos nlg j subtre parent let k n y impli klj l impli tion l defin walk delet klj klj k n hold contradict minim l prove let n jh j u v w shall prove uv n w lm let k l length u v w respect x walk h exist x appli walk walk minim regular instanc instanc j proof recal definit oper figur suffic prove statement instanc lm note word obtain w replac letter subword if j j if suppos contradict w lm walk x h whenev henc n walk h similarli x contradict show w lemma let minim regular instanc j regular instanc lj lm r curv f b x x b proof assum j instanc schema then denot ext ext exterior j respect everi walk defin sequenc n follow let x by uniqu neighbor x color x x neighbor exist x h j tree h satisfi x j x m follow walk note actual sequenc x depend word x if x suppos x xm must child xm tree h j choos b r curv f b intersect cell xm let l walk h j correspond curv f b let j l minim xm xm child xm either case theorem let regular instanc schema sentenc fo top vocabulari fg instanc j schema satisfi if if j proof let set color appear everi aperiod languag l formula l y fo vocabulari fg regular instanc satisfi l b b r if if w f b i l easi consequ theorem mcnaughton papert schutzenberg aperiod languag precis firstord defin languag let mi l lm lemma l aperiod let clearli satisfi claim instanc j have prove claim note first everi instanc satisfi realiz cone thu regular let j regular instanc assum first j lemma lj lm j mj lemma lmj lm thu convers mj thu j prove follow easili fo top inde assum everi j homeomorph j let n minim regular instanc h n shall prove instanc j schema suppos j mj lemma impli lmj lm minim regular n h n h lemma impli mj lemma follow mj homeomorph thu j convers suppos j lemma thu j fo top the later follow easili previou paragraph corollari regular instanc j final readi prove equival extend beyond instanc one close region corollari two instanc exampl elementari equival neither instanc j frg defin by r fa translat sentenc topolog in variant recal proven sv recurs map associ everi fo vocabulari f rg fo vocabulari frg instanc frg r close set purpos section prove extend arbitrari instanc proposit sentenc fo top vocabulari f rg everi sentenc fo vocabulari frg instanc g j proof let j instanc defin n let n jn defin r r r r cf figur figur instanc j note n n jn jm n jn corollari impli sentenc fo top n n jn j let n graph g path tice say c denot color color path form follow sequenc z time z time g jn same except relat topolog invari ident jn dim empti dim consist c even i dim consist c odd i orient empti final g standard ehrenfeuchtfrass techniqu show everi sentenc fo n if if jn statement proposit follow complet languag open problem consid far find recurs languag express precis firstord topolog queri although certainli interest question doubt that even theoret languag exist would natur languag may serv practic queri languag result show firstord topolog queri local hand known firstord logic fail express natur nonloc topolog queri connect region kv introduc topolog queri languag conelog cl express local properti languag two tier languag allow build firstord express whose atom firstord express talk cone color point kv proven cl captur precis firstord topolog properti instanc one close region fulli dimension underli structur r follow sv condit full dimension need corollari show result extend instanc sever close region one arbitrari region propos extend cl path oper introduc bgl let us call result topolog queri languag pcl result bgl show languag basic properti expect reason spatial databas queri languag addi tion admit effici queri evalu the cost evalu pclqueri substanti higher cost evalu firstord queri exampl pclqueri express fo connect region conjectur convers everi fo top queri express pcl idea behind conjectur local properti express cl togeth languag instanc describ pathoper seem captur firstord topolog properti instanc first step toward prove conjectur let us remark corollari impli regular instanc everi fo top sentenc equival set pclsentenc conclus result paper give good understand firstord topolog queri regular instanc cours one may argu regular instanc complet irrelev look map find singular point howev could use result answer sever open question concern topolog queri arbitrari instanc matter fact shown previou understand firstord topolog queri view local sens speak color point insuffici may main contribut problem character topolog elementari equival arbitrari planar instanc remain open conjectur corollari gener ie arbitrari instanc true proposit topolog elementari equival would decid pspace let us remark believ pspacebound proposit optim see reason decid np even ptime r foundat databas relat express power constraint queri lan guag reachabl connect queri constraint databas languag relat databas interpret structur safe constraint queri finit model theori queri arithmet constraint finit represent databas constraint databas bart kuijper jan van den bussch topolog queri spatial databas finit monoid trivial subgroup queri spatial databas via topolog invari tr toward theori spatial databas queri extend abstract queri arithmet constraint finit represent databas relat express power constraint queri languag topolog queri spatial databas complet geometr queri languag reachabl connect queri constraint databas queri spatial databas via topolog invari foundat databas constraint databas captur firstord topolog properti planar spatial databas fixedpoint logic planar graph ctr michael benedikt jan van den bussch christof lding thoma wilk character firstord topolog properti planar spatial data proceed twentythird acm sigmodsigactsigart symposium principl databas system june pari franc michael benedikt bart kuijper christof lding jan van den bussch thoma wilk character firstord topolog properti planar spatial data journal acm jacm v n p march