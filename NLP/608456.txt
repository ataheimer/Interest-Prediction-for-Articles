t statist approach case base reason applic breast cancer data a given larg set problem individu solut case base reason seek solv new problem refer solut problem most similar new problem crucial case base reason decis problem most close match given new problem new method propos decid question basic idea defin famili distanc function use distanc function paramet local averag regress estim final result distanc function chosen result estim optim respect certain error measur use regress estim method illustr simul appli breast cancer data b introduct assum one interest solut problem latter describ number observ variabl necessari variabl determin solut complet assum correl observ variabl solut furthermor assum list problem type avail valu observ variabl solut known instead categori problemsolut one may also think premiseconclus causeeffect current statefin result or concret health conditionobserv surviv time case base reason seek solv new problem refer solut problem most similar new problem basic assumpt solut problem data base most similar new problem close unknown solut new problem differ rule base reason knowledg repres rule rather data base built previou experi phrase case base reason rule base reason coin field artifici intellig see eg menachem kolodn crucial case base reason decis case most close match given new case articl propos new method decid question basic idea defin famili distanc function use distanc function paramet local averag regress estim final outcom choos distanc function result estim optim respect certain error measur use regress estim articl appli case base reason context predict surviv time breast cancer patient treat differ therapi therapi list case given includ observ surviv time variabl describ case exampl latter size primari tumor number affect lymph node menopaus statu categori variabl part tumor classif system tnm list one select case most similar given new case physician tri gain inform appropri therapi new patient consid therapi final result statist approach case base reason case naiv approach decid case most close match new case use case valu variabl new case unfortun number observ variabl larg usual none case therefor naiv approach gener use anoth approach use context predict surviv time breast cancer patient mariuzzi et al rang observ variabl divid four quartil valu variabl code accord quartil belong to distanc observ variabl x code i l defin l case chosen with respect distanc function close new case main drawback distanc reflect possibl differ influenc individu variabl final result for instanc valu x might influenc surviv time much valu x articl propos new method determin case data base most close match new case section give short introduct nonparametr regress propos method describ detail section illustr simul data section appli breast cancer data section nonparametr regress independ ident distribut random variabl x r valu realvalu ey regress analysi one want predict observ x ie one want find function r r x close to close measur mean squar error one interest function j dippon et al minim socal l risk efjm introduc regress function xg arbitrari measur function r one z denot distribut x therefor l risk arbitrari function f close optim valu squar l error optim predictor depend distribut x applic distribut usual unknown thu unknown too often possibl observ independ copi base data nonparametr regress problem ask estim mn l error r jmn local averag estim respons variabl rewritten henc one consid s sum function evalu x random error zero mean motiv construct estim mx averag s x close x hope mx close mx averag ffl close zero local averag estim repres nonneg weight sum one statist approach case base reason popular local averag estim nadarayawatson kernel estim nadaraya watson weight hn hn r socal kernel function socal bandwidth hn often one use spheric symmetr kernel k satisfi univari kernel function r r denot k jxj euclidean norm x kernel function one get hn hn usual kernel function chosen k socal naiv kernel use mx estim averag x ball radiu h center x gener k r r eg gaussian kernel one use weight averag s estim mx weight given close x choic bandwidth choic bandwidth hn crucial kernel estim compon hn small s weight close zero estim determin s induc high varianc estim hand compon hn big s far away x big weight x far away x even smooth mx might far away mx induc larg error estim j dippon et al qualiti estim import appli method choos hn close optim valu which depend usual unknown distribut x use data dn well known method tri crossvalid describ sequel inform see hardl eg recal aim nonparametr regress construct mn l risk small bandwidth kernel estim chosen minim compar choic bandwidth applic possibl depend unknown distribut x propos estim l risk choos bandwidth minim estim l risk fix function f r r l risk estim socal empir use which depend dn estim socal resubstitut estim optimist estim l risk minim lead estim well adapt dn suitabl predict new data independ dn avoid split data dn two part learn test data comput kernel estim learn data choos bandwidth empir risk test data minim result bandwidth depend way data split drawback one want use bandwidth kernel estim use whole data dn and thu noth way data split avoid repeat procedur sever eg randomli chosen split sampl choos bandwidth averag empir l risk test data minim kfold crossvalid split chosen special determinist way let k n notat simplic assum n k integ divid data k group equal statist approach case base reason size n k denot set consist group except lth one nl data set nl bandwidth h r construct kernel estim mngamma n h x nl k lng k k lng k choos bandwidth thatk ln l minim use bandwidth h bandwidth hn kernel estim nfold crossvalid denot crossvalid case nl whole sampl minim respect h curs dimension larg estim regress function especi difficult reason case gener possibl dens pack space x finit mani sampl point even sampl size n larg fact often refer curs dimension phrase due bellman illustr exampl exampl found friedman independ ident distribut r valu random variabl x uniformli distribut hypercub consid expect supremum norm distanc x closest neighbor x ae min oe where kx ae min oe j dippon et al thu z p ae min oe instanc thu larg even larg sampl size n supremum norm distanc x closest neighbor sampl close zero observ supremum norm distanc two point sampl alway less equal one basic idea section appli concept nonparametr regress introduc previou section case base reason thi consid predict final result case base reason regress estim problem henc assum final result real valu random variabl observ variabl compon r valu random variabl applic often observ variabl categor random variabl handl variabl describ section below recal aim case base reason determin case given list most close match new case done defin distanc function determin distanc dx x two case observ variabl x x given distanc function one defin k most similar case new case k case among whose distanc new case x belong k smallest occur distanc basic idea determin distanc function defin regress estim depend distanc function choos distanc function minim an estim l risk result regress estim regress estim use kernel estim introduc previou section defin distanc function dh r theta r r dh statist approach case base reason kernel estim written famili distanc function psi correspond famili regres estim kernel function simul section applic section use gaussian kernel aim choos distanc function correspond regress estim minim l risk alreadi explain previou section possibl l risk depend unknown distribut x instead estim l risk crossvalid choos distanc function dh h r estim l risk nh minim method summar follow estim l risk kernel estim nh crossvalid determin h r estim l risk minim compar choic h r use correspond distanc function dh subset select seen previou section estim regress function difficult dimens x larg problem occur everi estim henc kernel estim use paper well way handl problem make assumpt underli distibut eg assum regress function addit cf stone stone paper assum that even larg say regress function mainli depend say compon x assumpt hold distanc function determin appli method small subset observ variabl which lead regress estim problem small dimens x cours applic know observ variabl regress function mainli depend order check consid or big small subset observ variabl appli method subset choos subset via crossvalid estim l risk optim estim minim j dippon et al simplif comput subset observ variabl variabl subset method describ requir comput vector scale factor lead multivari minim problem order avoid solv mani minim problem use follow simplif first step determin observ variabl univari scale n comput as describ abov optim bandwidth univari kernel estim fit data x i yield scale factor h second step choos subset fi g dg distanc function h r via crossvalid estim l risk minim respect h r final choos subset fi g via crossvalid estim l risk correspond optim kernel estim minim observ minim estim l risk nh h r univari minim problem robustif bandwidth estim well known bandwidth select crossvalid often highli variabl see simonoff author suggest altern plugin method claim superior ordinari crossvalid loader argu theoret result support claim plugin method depend sensit pilot estim bandwidth see ch loader let nh kernel estim bandwith h order robustifi crossvalid bandwidth select given statist approach case base reason cv function cvh defin suggest follow heurist rule specifi below idea behind rule follow often graph cv function resembl valley possibl sever local minima bottom flat bottom posit global minimum seem accident estim middl valley appear less variabl measur choos two paramet defin level r pq depend regress estim equal mean respons fy coincid empir varianc yng simul first use choic might happen r pq sup hh cvh order avoid set r pq cvh valu p q use paper robustif impli possibl dispens explain fraction empir varianc fy g seem harm sinc interest find similar neighborhood predict j dippon et al applic simul data simul model let us consid defin fix constant model independ random variabl x u appar third compon x influenc small first compon x random vector x larger influenc respons second compon x word small constant regress function almost constant respect x case constant respect x figur simul realiz x independ copi x then describ subsect f g robustifi estim e h i optim bandwidth h i univari kernel estim base sampl comput crossvalid significantli less expect relat furthermor correspond estim l risk ascend order figur model select procedur defin differ distanc function given distanc function comput minim estim l risk multivari kernel estim respect h consid distanc function best estim l risk minim inclus compon reduc estim l risk slightli distanc function smaller set compon slightli larger correspond estim l risk prefer use result distanc function defin neighborhood statist approach case base reason compon x compon x fig graph regress function consid function first two compon predictor variabl x scatter plot simul realiz x ffi consid everi point n x ffi similar x everi point outsid n x ffi sens realiz x k similar one x whose distanc belong k smallest among result simul pair a n paramet f g n f g simul repeat time differ seed gener produc pseudo random number discuss result simul perform paramet set a n detail suggest section comput bandwidth e h one twenti run procedur found case cv curv univari regress estim correspond minim valu cv curv look j dippon et al figur furthermor optim valu h iand robustifi valu e h idiff slightli howev case situat appear figur smooth relat e h iseem appropri one twenti run method fail detect first compon stronger influenc function valu second compon see figur compar multivari kernel estim distanc function select differ subset predict variabl comput minimum cvh estim cvh given l risk compar ratio cvh cv tabl show run subset select procedur favor fx x g fx g case prefer gain small signific henc run choos subset fx x g relat e h determin geometri neighborhood use character similar case paramet pair a n ratio comput bandwidth e h turn second row tabl one extract minimum maximum median interquartil rang ratio visual variabl result distanc function neighborhood project first two compon plot around center paramet chosen way area set equal see figur compar result sampl size indic larger sampl size lead less variabl neighborhood statist approach case base reason compon fig determin univari bandwidth e h e h e h for th simul run left column crossvalid l risk regress estim ey jx i depend bandwidth h i optim bandwidth h jand robustifi bandwidth e h jare indic tick mark if within rang x axi right column univari kernel estim ey jx i use optim bandwidth h idot robustifi bandwidth e h isolid f g find curv relat h iand e h ican hardli distinguish true simul sampl j dippon et al compon compon compon fig determin univari bandwidth e h e h e h for th simul run left column crossvalid l risk regress estim ey jx i depend bandwidth h i optim bandwidth h jand robustifi bandwidth e h jare indic tick mark if within rang x axi right column univari kernel estim ey jx i use optim bandwidth h idot robustifi bandwidth e h isolid f g despit fact bandwidth h iminim cv error criterion bandwidth use compar depend random variabl sampl robustifi bandwidth e h iseem appropri statist approach case base reason compon compon fig determin univari bandwidth e h e h e h for th simul run left column crossvalid l risk regress estim ey jx i depend bandwidth h i optim bandwidth h jand robustifi bandwidth e h jare indic tick mark if within rang xaxi right column univari kernel estim ey jx i use optim bandwidth h idot robustifi bandwidth e h isolid f g sampl suggest method fail detect first compon stronger influenc function valu second compon j dippon et al tabl ratio cvhcv estim l risk multivari kernel estim specifi set compon paramet simul model run select subset statist approach case base reason tabl statist ratio e h e h each comput simul run paramet statist e h e h a n min st quart median mean rd quart max compon x componentof compon x componentof compon x componentof compon x componentof compon x componentof compon x componentof fig plot show level line regress function paramet f g cut ellipsoid neighborhood around point neighborhood set comput one simul sampl size contain th unit squar j dippon et al applic breast cancer data comput distanc function space covari suggest section determin given new breast cancer patient with unknown surviv time similar case among patient databas known censor surviv time data made avail robert boschkrankenhau stuttgart germani collect year followup month case describ dimension paramet vector consid nine first paramet predictor variabl includ age diagnosi age in year menopaus statu ms which equal pre post menopaus respect histolog type breast cancer ht with valu number affect lymph node pn group four class valu size pt group four class occur metastas pm with valu ye respect grade tumor gr with valu f g estrogen statu es with valu posit neg resp progesteron statu ps with valu posit neg resp last compon paramet vector describ observ censor surviv time ost in year consid repons variabl mani case actual surviv time cant observ sinc patient still aliv end studi patient withdraw studi henc observ surviv time understood minimum actual surviv time time elaps date diagnosi date death censor time c time date diagnosi date patient known aliv approach estim censor surviv time instead complic often unknown uncensor surviv time order simplifi problem hope simplif affect result much use estim construct similar neighborhood rather estim surviv time function covari vector as latter compar carbonez et al age ost continu distribut rv pt pn gr order categor rv ms ht pm es ps nomin rv valu predictor variabl allow statist approach case base reason tabl robustifi bandwidth e h jfor univari regress problem product e h jtime spread compon j allow compar maxim influenc compon j distanc function compon age ms ht pt pn pm gr es ps miss assum covari vector new patient z z covari patient databas fz relat continu order categor rv defin distanc function j h j z j miss k z j l missingg otherwis relat nomin rv defin distanc function j j z j x j z j miss z j x j z j miss describ section j comput crossvalid optim univari regress estim nh realiz respons variabl figur show cv function cv regress estim relat robustifi estim e h j display tabl now rang x covari variabl x defin l j dippon et al age observ surviv time observ surviv time observ surviv time observ surviv time pn observ surviv time statist approach case base reason observ surviv time observ surviv time observ surviv time h ps observ surviv time j dippon et al tabl number l covari subset display possess smallest estim l risk l best subset cvh l age pt pn pm es ps age ht pt pn pm es ps age ms ht pt pn pm es ps age ms ht pt pn pm gr es ps subset dg distanc function h fix posit number obtain multivari regress estim comput cv function cv function h determin subset j l smallest global minimum cvh l relat cv function tabl show result model select step togeth tabl scree plot figur suggest choos distanc function includ variabl pn pm es ad fourth compon rel improv ratio cvh cv compar cvh cv less henc propos use distanc d defin pn pm es now given new case covari x comput r dx z z accord increas valu r s fz g then fix k statist approach case base reason number compon fig scree plot l cvh l g subset fz databas consist k case most similar new case respect distanc d histori log may help physician choos appropri therapi new patient discuss often case nonparametr estim multivari set suggest method defici limit too instanc assum random vector j dippon et al take valu probabl let defin x f g otherwis ey jx far constant henc case propos method fail adjust socal resubstitut estim l risk penal function lead variou bandwidth select procedur gener crossvalid shibata model selector akaik inform criterion akaik finit predict error rice see eg hardl hardl may use instead least squar crossvalid criterion research improv regress estim instanc dimens reduct handl project pursuit regress adapt find structur linear subspac covari space addit fact censor observ time taken account applic concern surviv time breast cancer patient influenc chosen therapi ignor might lead underestim influenc known predictor variabl reason choic therapi usual depend predictor variabl therapi influenc surviv time problem one data choic therapi independ predictor variabl data exist predictor use requir fulfil new predictor unknown past consid unimport therefor use choos therapi distanc function addit base new predictor allow judg import new predictor acknowledg research partli support robert bosch foundat stuttgart grate prof h walk stuttgart stimul discuss reader wish obtain breast cancer data splu code algorithm contact author statist approach case base reason r adapt control process overview predict learn function approxim theori pattern recognit applic appli nonparametr regress smooth techniqu implement s local regress likelihood estim regress smooth method statist addit regress nonparametr model use polynomi spline tensor product multivari function estim smooth regress analysi tr random approxim measur accuraci nonparametr curv estim