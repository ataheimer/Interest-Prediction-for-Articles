t interact coher protocol memori consist model dsm system a coher protocol memori consist model two improt issu hardwar coher share memori multiprocessor softar distribut share memorydsm system year mani research made extens studi two issu repect howev interact studi literatur paper studi coher protocol memori consist model use hardwar softwar dsm system detail base analysi draw gener definit memori consist model ie memori consist model logic sum order event processor coher protocol also point hardwar dsm system emphasi memori consist model relax restrict event order softwar dsm system memori consist model focus mainli relax coher protocol take lazi releas consistencylrc exampl analyz relationship coher protocol memori consist model softwar dsm system find whether advantag lrc exploit depend greatli correspond protocol draw conclus relax consist model is relax coher protocol need support it conclus use design new consist model furthermor make improv tradit multipl writer protocol far awar describ complex state transit multipl writer protocol first time end list main research direct memori consist model hardwar softwar dsm system b introduct distribut share memorydsm system gain popular accept combin scalabl low cost distribut system eas use singl address space gener two method implement dsm system hardwar vs softwar cachecoher non uniformmemoryaccess multiprocessorsccnuma domin direct hardwar dsm work paper support climb program presid foundat chines academi scienc system date mani commerci research system stanford dash stanford flash mit alewif starttvoyag sgi origin seri softwar dsm altern gener method suppli highlevel share memori abstract top underli messag pass base system multicomput lanconnect now exampl rice munin rice treadmark princeton ivi cmu midwari utah quark marland cvm diku carlo current commerci research softwar dsm system world cach coher memori consist model two import issu ccnuma ar chitectur cach coher mainli use keep multipl copi one cach block consist processor role memori consist model specifi memori behavior respect read write oper multipl processor two issu gain extens studi past year sever cach coher protocol memori consist model propos literatur coher protocol includ writeinvalid writeupd delayupd memori consist model includ sequenti consist processor consist weak order releas consist et al coher problem remain softwar dsm system differ hardwar softwar implement granular coher unit softwar dsm system coher unit page hardwar dsm system coher unit cach block line sinc role page softwar dsm system similar cach hardwar dsm system simplic use cach coher case rest paper coher protocol wide adopt softwar dsm system includ multipl writer protocol ie writeshar protocol singl writer protocol memori consist model mainli use reduc frequenc commun messag traffic exampl relax consist model adopt softwar dsm system includ eager releas consist lazi releas consist entri consist automat updat releas consist scope consist homebas lazi releas consist singerwrit lazi releas consist messagedriven releas consist affin entri consist fact cach coher protocol memori consist model describ behaviour dsm system interdepend relationship complex know research problem paper first describ clear understand coher memori consist model propos gener definit memori consist model also point hardwar dsm system emphasi memori consist model relax restrict event order softwar dsm system memori consist model focus mainli relax coher protocol take lazi releas consistencylrc exampl analyz relationship coher protocol memori consist model softwar dsm system draw conclus relax consist model is relax coher protocol need support it conclus use design new consist model furthermor make improv tradit multipl writer protocol ad new state far awar describ complex state transit multipl writer protocol first time end list main research direct memori consist model hardwar softwar dsm system remaind paper organ follow section briefli overview develop coher protocol memori consist model propos gener definit memori consist model take lrc exampl relationship coher protocol memori consist model deduc section furthermor state transit graph new improv multipl writer protocol shown section relat work conclus remark list section section respect gener definit memori consist model censier feautrier defin coher memori scheme follow definit memori scheme coher valu return load instruct alway valu given latest store instruct address definit intuit appeal vagu simplist realiti much complex comput system store buffer store buffer clear whether last store refer execut store processor updat memori fact definit contain two differ aspect memori system behaviour critic write correct share memori program first aspect call coher defin valu return read oper second aspect call event order processor determin written valu return read oper coher ensur multipl processor see coher view locat event order processor describ processor see valu updat processor hennessi patterson present suffici condit coher follow read processor p locat x follow write p x write x anoth processor occur write read p alway return valu written p read processor locat x follow write anoth processor x return written valu read write suffici separ write x occur two access write locat serial is two write locat two processor seen order processor exampl valu written locat processor never read valu locat later read three condit guarante processor coher view posit x howev sinc tell us event order processor cant determin written valu seen processor such order captur behavior memori system accur need restrict coher event order role memori consist model use strictest memori consist model sequenti consist exampl explain follow scheurish duboi describ suffici condit sequenti consist follow processor issu memori access program order processor issu store processor may issu anoth memori access valu written becom access processor processor issu load processor may issu anoth memori access valu read bound load oper becom access processor two suffici condit coher consist see coher consist relat tightli condit coher subset condit memori consist model former consid differ event differ processor locat onli consist model consid differ event locat also impos constraint order event within processor is execut order processor such combin cach coher event order determin behaviour whole memori system base understand propos gener definit memori consist model reveal relationship them memori consist model coher protocol event order processor research use event order memori consist model interchang howev believ new understand describ memori system behaviour accur them new definit role coher ensur coher view given memori locat multipl processor order event describ happen sequenc memori event issu processor here use memori event repres read store oper memori memori consist model logic sum coher protocol event order processor exampl sequenti consist defin lamport view two condit memori access appear execut automat total order memori access processor appear execut order specifi programm first condit atom ensur coher protocol two base kind cach coher protocol write invalid write updat write updat protocol ensur processor keep copi see new valu simultan modifi processor invalid protocol reach coher view invalid copi second condit program order determin execut order event restrict event one processor issu perform program order condit satisfi howev constraint strict improv perform especi mani hardwar compil optim write buffer lookup free nonbind read regist alloc dynam schedul multipl issu cant util memori consist model two condit sequenti consist model show two direct us relax strictest consist model hardwar dsm system year sever consist model propos exploit hardwar complier optim techniqu as processor consist weakli order weak orderingnew definit releas consist drf plpc model almost hardwar compil optim techniqu exploit plpc memori consist model relax consist model howev event order processor relax wr ww rr rw oper success synchron oper atom demand chang littl exampl rc oper two synchron oper complet order data depend violat howev atom maintain write invalid protocol similar sequenti consist model softwar dsm system commun overhead expens cost maintain atom expens hardwar dsm system therefor reduc frequenc commun messag traffic import softwar dsm system hardwar dsm system furthermor sinc coher unit softwar dsm system page larger page fals share problem seriou hardwar dsm sy tem such elimin fals share problem effect also import issu softwar dsm system discuss solut fals share first give clear descript fals share fals share occur two processor access logic unrel data happen fall page least one write data caus coher mechan pingpong page processor includ two categori writewrit fals share writeread fals share fals share entail mani useless commun among processor order reduc commun overhead softwar dsm system sever new memori consist model propos past repres consist model softwar dsm system includ eager releas consistencyerc munin lazi releas consi treadmark entri consistencyec midway automat updat releas consistencyaurc shrimp scope consistencyscc homebas lazi releas consistencyhlrc singer writer lazi releas consistencyswlrc messagedriven releas consistencymdrc carlo affin entri consist ncp among consist model order event processor similar one anoth word main differ model method maintain coher includ two aspect coher protocol use protocol impl ment coher protocol adopt softwar dsm system relax strict singl writer protocol use hardwar dsm system relax coher protocol includ writeshar protocolmultiplewrit relax singlewrit protocolor delay invalid exampl treadmark munin system use multipl writer protocol cvm adopt relax singl writer protocol among describ memori consist model main differ lie updat valu made one processor avail processor exampl lrc processor execut acquir oper see updat valu modifi happenbefor partial order howev ec scc share data associ synchron object avail one processor acquir synchron object base analysi hardwar softwar dsm system section see coher protocol event order processor two import part memori consist model particular softwar dsm system differ among differ consist model depend greatli correspond coher protocol analyz relationship detail follow sectionin order differenti improv singl writer protocol strict singl writer protocol use relax singlewrit repres here next section oper procedur relax singl writer protocol shown interact coher consist lrc section take lazi releas consist exampl analyz relationship coher protocol consist model detail lazi releas consist lrc allsoftwar pagebas writeinvalid base multipl writer memori consist model implement treadmark system sinc object section analyz interact coher protocol consist model describ key idea lazi releas consist subsect multipl writer protocol describ follow subsect lrc lazi implement rc erc delay propag modif processor processor execut acquir oper main idea consist model use timestamp interv establish happen befor order causalrel event local interv delimit synchron event lock barrier lrc use happen befor partial order maintain order event happenbefor partial order union total processor order memori access individu processor partial order releaseacquir pair vector timestamp use repres partial order processor execut acquir send current vector timestamp acquir messag last releas piggyback respons set write notic write notic includ processor id vector timestamp interv page modifi modifi page number fault processor use write notic locat appli modif requir updat copi page writeinvalid writeupd protocol use implement algorithm follow discuss assum write invalid protocol use multipl writer protocol multipl writermw protocol develop address writewrit fals share problem mw protocol two processor modifi local copi share page simultan modif merg next synchron oper therefor effect fals share reduc two key issu implement mw protocol write trap write collect write trap method detect share memori locat chang twin softwar dirti bit two gener method use softwar dsm system write collect refer mechan use determin modifi data need propag acquir timestamp dif two method use midway treadmark respect detail pleas refer treadmark twine dif mechan adopt although multipl writer protocol first introduc carter munin protocol new idea deriv idea delay updat bennett et al point order avoid unnecessari synchron requir pro gram semant thread modifi share object delay send updat remot copi object remot thread could otherwis indirectli detect object modifi origin descript delay updat protocol vagu understand exampl indirectli mean whether two processor modifi unit si multan assign differ understand idea obtain differ coher protocol exampl two processor allow modifi page simultan ousli delay updat protocol evolv multipl writer protocol time one writer allow exist multipl reader coexist singl writer delay updat protocol evolv relax singl writer protocol protocol prove use applic implement protocol shown next subsect multipl writer protocol sever benefit follow multipl node updat page simultan protocol greatli reduc protocol overhead due fals share ffl protocol reduc commun traffic due data transfer instead transfer whole page time transfer diff onli ffl protocol relax order event interv sinc without ownership requir write oper interact lrc correspond protocol accord descript lrc multiplewrit protocol find lrc multipl writer protocol close relat analyz relationship step step strict singl writer protocol relax multipl writer protocol lrc use strict singerwrit singleread protocol adopt releas consist ie one processor write cach block must obtain ownership first processor receiv invalid messag must invalid local page immedi therefor releas oper write notic need record processor alreadi known modif execut processor releas lock processor execut acquir oper follow write notic need sinc page invalid lazi releas consist invalid alreadi such lazi properti exploit all case write notic vector timestamp use help fault processor locat valid page like role home ccnuma machin furthermor writewrit writeread fals share cannot resolv case perform lrc similar rc relax singl writer protocol ie singerwrit multipleread protocol use adopt one processor receiv invalid messag invalid page immedi ate contrari keep copi appear valid next acquir oper paper assum processor one thread therefor use thread process processor interchang case writeread fals share elimin partial writewrit fals share remain too order depict protocol accur must introduc new state stale use repres state page interv receiv invalid messag page next acquir oper messag receiv acquir oper coher protocol includ categori necessari messag unnecessari messag entail fals share unrel messag page use requir processor exampl fig p p two processor variabl xxxxx share data x x alloc page x x alloc page x alloc page sole lock l l lock use user creat critic section protect use share data relax singl writer protocol p want write x must obtain ownership write oper procedur invalid copi overlap oper follow write oper p receiv invalid messag invalid page immedi keep appear valid next lock acquir oper therefor time p read x caus page fault error readwrit fals share case elimin howev p want read x acquir oper caus page fault error therefor readwrit fals share problem elimin complet relax singl writer protocol hand p write x must caus write fault sinc one writer allow write page given time such writewrit fals share problem remain fig messag belong first categori second categori messag unrel messag messag unnecessari messag entail fals share exampl strict singlewrit protocol use page p invalid immedi first read x caus fals share so find relax singl writer protocol better strict singl writer protocol hand relax singl writer protocol page fault occur whole page transfer result great messag traffic order solv fals share problem complet reduc larg commun traffic multipl writer protocol propos wide use softwar dsm system tradit mw protocol howev acquir processor receiv write notic invalid correspond page immedi result writeread fals share entail strict singl writer protocol therefor improv multipl writer protocol combin tradit mw protocol relax singl writer protocol improv multipl writer coher protocol adopt advantag lrc exploit complet almost fals share effect elimin furthermor improv mw protocol write oper within one interv forward without wait ownership case messag receiv acquir oper includenecessari messagesuch write notic unrel messag page use requir processor invalid messag page fig unrel messag solv entri consist new nll consist model beyond scope paper multipl writer protocol sinc two writer modifi page simultan state page complex two protocol exampl two writer write page whch one owner third processor want write page inform dif twin mechan tell us implement method certain protocol howev tell us maintain state transit multipl writer protocol describ state transit next subsect analysi draw follow conclus shown tabl complet page page page x invalid page invalid page invalid page releas l acquir lask ownership send ownership page fault cccur page fault occur page fault occur figur exampl writeinvalidatebas relax singl writer protocol list strictest sequenti consist base comparison memori consist model correspond coher protocol sequenti consist requir memori oper atom send receiv invalid messag immedi andstop acknowledg receiv releas consist the atom demand relax ownership must obtain write send receiv invalid messag immedi the receiv acknowledg delay follow releas synchron oper lrcsingl writer the atom demand relax ownership must obtain immedi write send invalid messag receiv delay accept invalid messag next acquir synchron oper the receiv acknowledg delay follow releas synchron oper lrcmultipl writer the atom demand relax further ownership need writeif processor alreadi copi page both send receiv invalid messag delay andth receiv acknowledg delay follow releas synchron oper tabl relationship memori consist model coher protocol accord perform comparison present research analysi shown tabl find advantag consist model depend close correspond coher protocol relax consist model is relax coher protocol need support it conclus use design new consist model exampl support mw protocol scope consist relax lrc combin advantag ec lrc distinguish differ lock ie acquir processor obtain modifi data releas use lock therefor mani useless messag three protocol reduc greatli state transit invalidatebas multipl writer protocol describ abov order depict coher transit relax singl writer protocol improv multipl writer protocol must add new state name stale mean coher unit modifi processor howev appear valid processor itself fig show state transit graph writeinvalidatedbas multipl writer protocol lrc far awar first time whole state transit graph multipl writer protocol shown exclus share invalid stale ri wj rj rirjw ri read local processor wi write local processor rj read remot processor acquirelacquir lock releas l releas lock l wj write remot processor creat diffi creat diffi send exclus node wicreat twin keep write notic figur state transit graph writeinvalidatedbas multipl writer protocol lrc although author tell us multipl writer protocol adopt exampl shown paper deduc scope consist use multipl writer protocol too relat work dubio etal analyz relationship synchron coher event order ing although separ concept coher event order present relationship them equal event order memori consist model differ viewpoint defin strong order weak order paper present strong order sequenti consist fact viewpoint wrong cach coher protocol consid adv hill gave exampl demonstr wrong case per stenstrom present excel survey cach coher protocol adv gharachorloo discuss extens survey memori consist model howev consid case hardwar dsm system onli paper consid hardwar softwar dsm system togeth studi relationship coher protocol memori consist model recent zhou etal discuss relationship relax consist model coher granular dsm system consid granular coher protocol never consid coher protocol dubio etal propos delay consist model releas consist system invalid buffer receiv processor subsequ acquir execut processor delay consist model coher protocol includ two categoriesdelay receiv delaysend delay receiv delay receiv relax singl writer protocol delay send delay receiv similar multipl writer protocol present state transit hardwar share memori detail paper describ state transit softwar dsm system first time conclus futur work paper start classic coher memori scheme point memori coher includ two issuescoher event order processor base clear descript two concept defin gener definit memori consist model logic sum coher protocol event order processor second analyz consist model use hardwar dsm system softwar dsm system new definit point hardwar dsm system relax consist model devot relax order event wr ww rr rw oper util hardwar complier optim techniqu coher protocol make much progress past year softwar dsm system main obstacl perform high commun overhead useless coherencerel messag entail larg coher granular therefor main purpos consist model softwar dsm system reduc number messag messag traffic event order processor new consist model similar releas consist third take lrc exampl analyz relationship coher protocol consist model softwar dsm system conclud two issu close relat relax consist model is relax coher protocol need support it conclus use design new consist model fourth make improv tradit multipl writer protocol ad new state describ state transit graph invalidatebas multipl writer protocol first time final base analysi paper propos main direct memori consist model research futur follow hardwar dsm system ffl relax coher protocol further allow multipl writer hardwar coher dsm system possibl much progress semiconductor technolog ffl consid hybrid hierarch dsm mpp system node use hardwar implement dsm share memori abstract among node support softwar dsm softwar dsm system ffl relax coher protocol further ffl use hybrid coher protocol differ share data share data protect lock share data protect barrier ffl intergr memori consist model togeth support differ applic ffl consid interact latenc toler techniqu multithread prefetch r comparison entri consist lazi releas consist implement share memori consist model tutori weak orderinga new definit implement sequenti consist cach base system mit alewif machin architectur perform affin entri consist protocol treadmark share memori comput network workstat softwar dsm protocol adapt singl writer multipl writer tradeoff fals share aggreg softwar distribut share memori larri rudolph arvind munin distribut share memori base typespecif memori coher midway distribut share memori system implement perform munin new solut coher problem multicach system parallel comput architectur alpha version memori access buffer multiprocessor jin chin wang treadmark distribut share memori standard workstat oper system program differ memori model memori consist event order scalabl share memori multiprocessor cach consist sequenti consist improv releaseconsist share virtual memori use automat updat understand applic perform share virtual memori system rel import concurr write weak consist mod el lazi releas consist softwar distribut share memori portabl distribut share memori unix lazi releas consist hardwarecoher multiprocessor stanford flash multiprocessor make multiprocessor comput correctli execut multiprocessor program ivya share virtual memori system parallel comput standard dash multiprocessor adsm hybrid dsm protocol effici adapt share pattern evalu memori consist model share memori system ilp processor intellig ram iram chip rememb comput revis comput architectur quantit approach correct memori oper cachebas mul tiprocessor memori consist model distribut share memori system survey cach coher scheme multiprocessor splash program character methodolog consider perform evalu two homebas lazi releas consist protocol share virtual memori system tr ctr optim integr dsm acm sigop oper system review v n p juli