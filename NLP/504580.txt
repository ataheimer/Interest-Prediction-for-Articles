t partial correct probabilist demon program a recent work sequenti program semant produc oper he et al sci comput program axiomat morgan et al acm tran program languag system seidel et al tech report prgtr program research group februari treatment total correct probabilist demon program extend kozen origin work j comput system sci kozen proc th acm symp theori comput acm new york ad demon nondetermin practic applic eg combin loop invari termin constraint import retain tradit distinct partial total correct jone monograph ecslfc phd thesi edinburgh univers edinburgh uk defin probabilist partial correct probabilist demon program paper combin abov give oper axiomat framework partial total correct probabilist demon sequenti program among thing provid theori support earlierand practicalpubl probabilist demon loop morgan in jifeng et al ed proc bcsfac seventh refin workshop workshop comput springer berlin copyright elsevi scienc bv b introduct determinist comput state space model function type s initi final state powerdomain construct extend nondetermin although tradit powerdomain smyth hoar plotkin differ treatment nontermin agre nondetermin demon resolv arbitrari way probabilist powerdomain instead resolv nondetermin accord specifi distribut final state demon choic remov replac probabilist choic et al remov demon choic rather model demon probabilist nondetermin jointli combin special case probabilist powerdomain imper program smyth de monic construct morgan et al complement program logic greatest preexpect extend kozen work result overal treatment total correct probabilist demon sequenti program paper extend construct morgan partial correct also one import applic form correct justif invariantvari principl probabilist demon loop although publish principl base onli postul connect wp wlp probabilist program provid theori proof anoth applic abstract probabilist demon choic discuss issu conclus model partial hoarestyl total smythstyl correct within framework choos eglimiln construct demon choic rather smyth base distribut rather simpl state introduc novel consider in particular need linear interpol distribut logic abl formul greatest greatest liber preexpect reflect totalparti distinct standard program logic sec construct probabilist plotkinstyl powerdomain convex powerdomain which subset gener represent abramski jung show extract partial total inform it sec link greatestpreconditionbas probabilist program logic sec sec specialis liber ordinari logic sequenti program languag probabilist demon nondetermin extens discuss exampl gener treatment loop given elsewher throughout use infix dot function applic associ left fxi mean fxi write is defin equal to quantif includ set comprehens written order quantifi or f set bound variabl option type rang final term thu exampl set first ten squar convex powerdomain distribut program semant powerdomain use studi nondetermin phenomenon aris program output arbitrari result drawn set possibl result rather singl determin function input consid powerdomain domain probabl distribut rather definit singl state sever way order set distribut each result differ powerdomain choic depend criteria explain term desir treatment program possibl nontermin behaviour smyth order def b treat nontermin worst behaviour thu smyth powerdomain model total cor rect similarli hoar order def b model partial correct nontermin treat best outcom order plotkin power domain use eglimiln order def b combin view use partial total correct model within singl framework gener plotkin powerdomain decompos smyth hoar powerdomain special case is abramski jung show one case underli domain continu def b section show abramski jung result appli appropriatelydefin powerdomain distribut thu provid singl semant space partial total correct program exhibit probabilist demon nondetermin fact definit domain theori follow convent set summaris detail paper often specialis particular applic appendix b write state space assum finit space probabl distribut defin follow definit state space s space distribut s v defin f f defin show first s v continu complet partial order lemma finit state space distribut s v form continu complet partial order proof complet s v trivial given complet interv real show continu need exhibit countabl basi def b sinc finit use set distribut contain sinc real least upper bound ration waybelow def bwe defin plotkinstyl powerdomain s subset write a upclosur a downclosur def b say upclos smythclos a a downclos hoareclos eglimilnerclos closur condit relat continu special distribut precis call discret subprob measur necessarili sum deficit give probabl nontermin everywher zero distribut exampl assign zero probabl state model nowheretermin behaviour an altern though less conveni treatment would assign probabl special state often call convex close need term anoth purpos definit subset defin limit closur lca smallest set contain itself togeth ta ua updirect def b subset downdirect def b subset a say limitclos defin powerdomain must introduc one closur condit specif distribut distribut f f p form f p phi f weight averag defin pointwis p theta f gammap theta f with usual scalar multipl addit set distribut defin paverag follow definit p subset a defin say convex p phi defin powerdomain s subset plotkin powerdomain definit convex powerdomain cs vem space distribut compris subset nonempti eglimiln close limit close convex order vem usual eglimiln order def b convex powerdomain subset plotkin powerdomain includ convex subset latter aim section show cs limit complet limit smyth hoar limit extract make suitabl applic probabilist program semant thu show least upper bound eglimilnerdirect subset cs lie within cs combin hoar least upper bound th smyth least upper bound t next lemma specialis gener decomposit result plotkin powerdomain s v write lenss def b set nonempti eglimiln close limit close subset s note ta ua exist subset particular direct not thu cs compris convex lens s lemma eglimilnerdirect subset lenss limit tema exist satisfi insist limit closur th seen continu condi tion proof decomposit consequ isomorphim abstract plotkin powerdomain def b space lens continu domain topolog eglimiln order def b isomorph given abramski jung reproduc thm b decomposit hold abstract plotkin powerdomain gener establish isomorph note first closur condit lenss impli vem lens reduc topolog egli milner order lem ensur condit thm b name s v continu complet partial order sinc cs subset lenss follow corollari closur limit corollari eglimilnerdirect subset cs limit tem exist cs satisfi proof given lem need show lct h element are follow elementari fact up close preserv convex vmonoton p phi intersect convex set convex downclos preserv convex similar upclos union direct set convex set convex limitclos preserv convex vcontinu p phi consid eglimiln chain set real interv limit fg the limit point underli seri union set halfclos interv howev intersect set fg fail limitclos hoar limit would produc empti result cor give us main result eglimiln limit determin smyth limit in smyth order hoar limit in hoar order write respect def b smyth equival hoar equival element cs theorem show addit limit indistinguish rel appropri equival theorem vem direct subset cs follow equival hold proof properti abstract plotkin powerdomain follow isomorph thm b use proof thm thi section defin convex powerdomain whose use model probabilist imper program follow construct smythstyl domain exampl sequenti composit generalis function composit nondeterminist choic union then convex closur probabilist choic weight averag defin abov sec give detail recurs one take limit chain signific thm must sure take limit convex domain agre specialis limit smyth domain specialis limit hoar domain allow us use gener convex domain either known equival hold standard nonprobabilist domain thm confirm preserv properti probabl includ next section link convex powerdomain partialtot probabilist program logic fact gener argument section establish that sinc standard approach take flat domain state space trivial continu finit even countabl probabilist program logic section use convex powerdomain cs sec construct model total partial correct probabilist demon program begin review method treat two aspect separ standard nonprobabilist demon program popular model total correct ss s flat domain extend state space nontermin form smyth powerdomain that dijkstra weakest ordinari precondit ps ps support program logic suitabl total correct partial correct one use hs hoar model weakest liber precondit logic final although partial total correct avail simultan via ks plotkin r ks postcondit q ps still conveni defin separ weakest precondit weakest liber precondit give total wp partial wlp program logic note definit work togeth ks the intersect hs ss wp work hs wlp work ss nelson give nice treatment issu probabilist program et al propos c total correct c like cs previou section base smyth order morgan et al provid probabilist greatest pre expect logic that expect nonneg realvalu function state space extend kozen treatment non program access total partial correct simultan analog standard case simpli replac he smythbas c eglimiln base c yet rather defin two form logic as abov generalis morgan mciver allow expect take neg valu roughli speak total correct one use nonneg postexpect partial correct one use nonposit kozen model total correct probabilist but demon program jone extend partial correct model total but partial correct probabilist demon program begin detail construct probabilist demon model program definit finit state space space probabilist demon program msvem given order induc pointwis cs ms occasion use v vh ms analog lift cs thu program take initi state set final distribut plural set repres demon nondetermin distribut contain repres probabilist nondetermin next task investig dual represent program expect transform extend expect found morgan et al topic total correct the smyth order upclos set expect type use gamma instead write es gamma use lowercas greek letter typic element expect transform thu function type es es r f ff expect valu ff es averag distribut f s special case expect interpret predic f g valu function state space predic hold state conveni scalar c write c constant expect evalu c s convent predic true fals correspond expect respect final relat expect write everywher everywher equal generalis respect implic equival revers implic predic logic base extend greatest preexpect transform defin follow definit let r program ms take initi state set final distribut s greatest preexpect state program r respect postexpect ff es defin z f ff the effect definit consid possibl postdistribut f rs demon choos one give least the worst expect ff thu nondetermin demon minimis preexpect initi state def greatest expect everywher pointwis minima standard program execut program r state certain establish postcondit state contain associ weakest precondit definit would ewpra probabilist program standard postcondit establish probabl least p say greatest preexpect execut r initi least p thu special case predic interpret ewpra greatest assur probabl hold execut r s discov variou refin order correspond via ewp order ms first generalis observ standard program eg smyth order program correspond implic order lift predic transform hoar order similarli correspond lift revers implic use ps typi cal element denot set nonneg valu expect ns typic element nonposit valu expect subset es lemma r reduc kozen definit determinist program program function initi state distribut minimis rang singleton set thu superflu appar confus expect probabl deliber harm less probabl event distribut equal expect valu the characterist function of distribut proof ms ps reason follow r impli rs r s definit v impli r r f r r defer justif appeal monoton arithmet nonneg argument without subtract rs differ rs addit larger element accord def minimum select made def cannot increas make select upclosur instead result follow generalis s similar argument justifi second statement but note revers w lem key defin expectationtransform equival smyth hoar eglimiln order where usual eglimiln order intersect smyth hoar order definit t defin that eglimiln order program preserv ewp directli corollari proof lem def corollari show ewp orderpreserv map msvem t s vem next result section show also inject therefor program model equival either relat expect transform establish ewp embed prove convers cor lemma proof suppos contradict ewpr vem ewpr r v em r ms without loss gener assum r v r distribut f state f rs aid separ hyperplan lemma a expect ps z f z thu r ewpr howev ewpr s r directli give togeth z f contradict hypothesi at state s sinc proof lem actual prove convers lem state correspond relat model program logic three order theorem follow equival hold r r vem r iff ewpr vem ewpr we shown ewp inject ms mani vem monoton expect transform ewpimag ms final result section identifi exact subspac expect transform form imag ms ewp identifi healthi style dijkstra standard program relev healthi condit appli program logic treat sec morgan et al probabilist program identifi imag of program ms within it import result theorem prove within healthi expect transform correspond theorem program ms first healthi condit slight generalis sublinear morgan state defin expect ff fi es real nonneg scalar c expect fffi cff as paverag distribut mean pointwis lift standard addit scalar multipl definit expect transform t sublinear iff ff fi es a b c nonneg real note first sublinear satisfi imag ms ewp lemma expect transform ewpr r ms sublinear proof def properti arithmet morgan give detail proof total correct for smyth c sublinear tell whole stori thm gener cs howev sublinear element ms ewpimag take twoelement state space fx yg consid result set convex eglimiln close associ expect transform form ewp sublinear ewpimag element ms characteris eglimiln closur captur second healthi condit partial linear state tff depend preexpect appli expect ps ns fact closur ff indistinguish use ewp ff ps ns definit expect transform said partial linear state s expect ff es expect ps ns note implicit existenti quantif def mean may mani decomposit ff sum complet correspond healthi expect transform ms next theorem state onli proof omit overli technic necessari rest paper theorem expect transform sublinear partial linear r ms probabilist guard command section illustr construct previou two section give equival relat ms expect transform t s semant simpl sequenti program languag extend dijkstra guard command binari probabilist choic oper p phi relat semant fig write point distribut perhap allur healthi condit would tff determin posit part ff neg part ff u hold gener probabilist program although restrict set standard program f gammagvalu expect et al morgan et al give similar present semant total rather partial correct detail motiv found there note demon choic retain replac state defin point distribut s special case write s distribut evalu everywher s r ms ms p phi u sequenti composit eglimiln closur taken righthand side figur probabilist relat semant concentr singl state s u demon combin pro gram symbol p phi use probabilist combin program pgammaaverag explain sec set distribut contain demon nondetermin three primit command yield singleton result set probabilist choic p phi return weight averag result set operand singleton set argument are result set demon nondeterminist choic two program convex closur union result operand closur model oper demon could resolv choic flip coin arbitrari bia sequenti composit r r consid set pure probabilist program compat them program say thu type s write r f compat mean s delta fs rs sinc effect two pure probabilist program sequenc singl distribut say defin z fs ds averag effect f intermedi distribut produc fs gener case vari f f give fact p depend state simplic assum constant f v monoton function f figur probabilist ewp semant oe ps ns s simplifi definit fig regard f r parametris abbrevi s r ds ewpsemant fig postexpect oe vari ps ns use u also pointwis minimum expect probabilist choic p phi return weight averag result expect operand u take pointwis minimum reflect demon strive worst least result sequenti composit becom simpl function composit as standard predic transform case recurs dealt least fix point appropri order thm show two order correspond concern next section recov total partial semant separ fig show defin probabilist wp wlp generalis dijkstra oper interpret satisfi probabilist version standard law combin partial total correct partial total correct athough ewp act es extract two morespecialis logic it act convent nonneg expect ps eglimilnerclos set determin smyth hoar closur suffici total correct logic mere restrict ps directli use order v definit let r program ms greatest preexpect program r respect postexpect ps associ nontermin defin easili sublinear ps wpr ps also moreov lem show wp semant program correspond relat model smyth order nontermin worst outcom semant partial correct defin probabilist wlp restrict subspac ps v definit r program ms greatest liber pre expect program r respect postexpect ps associ nontermin easili sublinear ewpr ns readili show def ident z f demon generalis probabilist wlp defin nondemon program jone morgan show also generalis standard wlp thu sinc lie ns ewpr gamma deduc wlpr welldefin expect transform ps ps also lem impli wlp semant correspond relat model hoar order accordingli nontermin best outcom exampl let finit portion n natur number n assign take everi initi state final state n program illustr differ wp wlp write expect evalu n otherwis indic greatest expect termin state pq initi state greatest expect either termin nontermin found wlp thu wp observ give greatest guarante probabl termin nontermin guarante noth wlp observ hand return probabl either reach program fail termin usual interpret partial correct follow usual interpret expect valu f gvalu random variabl respect probabl distribut chanc random outcom establish event a evalu f v monoton function f figur probabilist wlp semant ps s greatest fix point use recurs similarli wlp semant loop program calcul greatest fix point monoton function ps rather least wp easili check specialis fig wlp produc chang shown fig note ps ns close sigma altern view wlp wp often put forward regard function program satisfi certain properti exampl nelson defin standard wp wlp axiomat enforc coupl law at below conjunct properti both wp wlp induc conjunct predic transform thu efficaci probabilist definit lie generalis properti lem thm also below generalis respect conjunct coupl form main result section state coupl standard program r program predic use though here origin mean wp wlp v impli state law impli wpr wlpr agre initi state termin guarante thu underli practic treatment loop program prove total correct iter work divid ensur partial correct with loop invari independ termin argument with variant probabilist coupl thm allow similar treatment probabilist loop program follow def sinc least fix point v monoton function becom specialis first w ns ns order shift ps ps appli consid first appropri generalis conjunct conjunct predic replac probabilist conjunct defin nonneg expect pointwis maximum expect probabilist conjunct reduc ordinari conjunct specialis predic import probabilist reason subdi tribut wp wlp imag program anoth consequ sublinear lemma r ms ps proof sublinear with monoton ewpr def next deal coupl thm generalis main result section theorem r ms ps proof take extrem valu one might guess u appropri generalis u even sub distribut establish wpr take side sinc left effect achiev result corollari recov standard rule generalis combin partial total correct corollari r ms ps proof thm j ps special case note wlp result impli wp result state termin occur probabl wpr ident conclus technic contribut paper extend plotkin construc tion eglimiln order act probabl distribut rather point show decomposit respect convex hoar partial correc convex smyth total correct pow erdomain continu hold even take limit key featur imposit convex linear interpol distribut jone defin partial correct logic base expect nondemon program discuss healthi condit applic logic as calcul tool depend realis ad nondetermin kozen model correspond weaken addit properti logic sublinear make proof thm reduc simpl arithmet argument use gener expect thu supersed pure nonneg expect lead even simpler present sublinear use two healthi condit describ here two immedi applic first discoveri proof rule loop partial total correct separ wp wlp togeth shown preserv loop bodi suffici v wpdo g bodi odi u g provid v give initi state probabl loop termin second applic abstract program termin probabilist partial correct establish inform consid probabilist choic demon algorithm fall categori typic use random method search larg space potenti wit exampl includ find perfect hash function find irreduc polynomi mehlhorn rabin suppos loop g bodi od contain probabilist choic bodi denot bodi result replac demon choic the fair of probabl essenti loop termin result standard loop though probabilityfre would termin wp analysi would useless theori partial correct howev reason follow standard loop invari i g u v wlpbodyi establish standard reason say henc v wlploopi u g standard loop rule henc v wlploopi u loop loop two loop contain bodi bodi respect thu standard reason bodi reach probabilist conlus loop last step reli loop v loop wlpmonoton od follow bodi v bodi turn guarante u v p phi p note probabilist wlp essenti last step would hold written wpbodi one would conclud argument determin j wploop sepa rate thm standard result linear program lemma a separ hyperplan lemma let c convex limit close subset r n f point r n lie c separ hyperplan ff f one side c other proof see exampl trustrum use lem base interpret distribut f point r n expect ff collect normal famili parallel hyperplan integr r f ff give constant term ffhyperplan pass point f gener convex region c r n minimum z f give constant term ffhyperplan touch c normal point c thu specialis applic paper lemma impli f c close convex set distribut c expect ff z f z moreov c upclos downclos rang ff specialis ps ns fact definit domain theori summaris abramski jung present fact domain theori give page number appropri assum d v complet partial order ie everi direct defin below set least upper bound up downclosur subset defin upclosur a set similarli defin downclosur a set smyth order p smyth order v pd subset a d given hoar order p hoar order vh pd subset a d given vh iff a eglimiln order eglimiln order vem subset combin smyth def b hoar def b order subset defin vem iff a a updirect def p subset updirect or simpli direct iff u v w also least upper bound if exist downdirect subset downdirect iff u v w also w v u w v v write ua greatest lower bound if exist waybelow def p waybelow relat defin follow u v say u updirect subset v v ta w u v w also say u approxim v iff u v basi def p basi subset b everi element tlimit element way b continu def p continu countabl basi len def p defin lens d lensd set nonempti eglimiln close limitclos subset d ideal p subset ideal direct downclos plotkin powerdomain theorem p plotkin powerdo main basi b given ideal def b complet fb denot set finit nonempti subset b topolog eglimiln order def p defin topolog eglimiln order v tem set eglimiln close subset lensd follow smyth hoareequival two subset a smyth equival hoareequival theorem b theorem p continu complet partial order plotkin powerdomain isomorph lensd v tem r domain theori disciplin program probabilist model guard command languag probabilist nondetermin probabilist powerdomain evalu privat commun semant probabilist program probabilist pdl proof rule probabilist loop unifi wp wlp probabilist predic transform gener dijkstra calculu pisa note introduct probabilist predic transform linear program tr parallel program design foundat gener dijkstra calculu probabilist nondetermin build uniti experi random sequenti distribut algorithm domain theori integr domain theori probabilist predic transform pcf extend real number model verif random distribut realtim system unifi italicwpital italicwlpital probabilist model guard command languag disciplin program probabilist pdl ctr joe hurd annabel mciver carrol morgan probabilist guard command mechan hol theoret comput scienc v n p novemb yuxin deng rob van glabbeek matthew hennessi carrol morgan chenyi zhang remark test probabilist process electron note theoret comput scienc entc p april