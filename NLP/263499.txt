t constraint tight loos versu local global consist a constraint network simpl represent reason framework divers applic paper identifi two new complementari properti restrict constraint networkconstraint tight constraint loosenessand show use estim level local consist need ensur global consist estim level local consist present network particular present suffici condit base constraint tight level local consist guarante solut found backtrackfre manner condit use applic knowledg base queri preprocess cost amort mani queri also present suffici condit local consist base constraint loos straightforward inexpens determin condit use estim level local consist network turn use decid whether would use preprocess network backtrack search decid local consist condit ani still need enforc want ensur solut found backtrackfre manner two definit local consist employ character condit tradit variablebas notion recent introduc definit local consist call relat consist b introduct constraint network simpl represent reason framework problem repres set variabl domain valu variabl set constraint variabl central reason task find instanti variabl satisfi constraint spite simplic framework mani interest problem formul constraint network includ graph color scene label natur languag pars tempor reason gener make constraint network hard solv contain mani local inconsist local inconsist instanti variabl satisfi relev constraint cannot extend addit variabl cannot part global solut use backtrack search find solut inconsist lead dead end search insight led definit condit character level local consist network develop algorithm enforc local consist condit remov local inconsist eg local consist proven import concept theori practic constraint network primarili two reason first common method find solut constraint network first preprocess network enforc local consist condit perform backtrack search preprocess step reduc number dead end reach backtrack algorithm search solut similar aim local consist techniqu interleav backtrack search effect use local consist techniqu two way studi empir eg second much previou work identifi condit certain level local consist suffici guarante network global consist solut found backtrackfre manner eg paper identifi two new complementari properti restrict constraint networkconstraint tight constraint loosenessand show use estim level local consist need ensur global consist estim level local consist present network particular present follow result show that constraint network constraint ariti r less tight less network strongli m r consist global consist inform constraint network strongli kconsist instanti k gamma fewer variabl satisfi constraint extend consist addit variabl also inform given rari constraint instanti r gamma variabl particip constraint paramet upper bound aaai number instanti rth variabl satisfi constraint gener suffici condit bound level local consist guarante global consist import applic constraint network use knowledg base mainten mani queri knowledg base here cost preprocess amort mani queri also interest explanatori power use character difficulti problem formul constraint network also show that constraint network domain size less constraint loos greater network strongli ddd gamma meconsist inform given rari constraint instanti r gamma variabl particip constraint paramet lower bound number instanti rth variabl satisfi constraint bound straightforward inexpens determin contrast loword local consist expens verifi enforc optim algorithm enforc kconsist on k k network n variabl domain size condit base constraint loos use two way first use decid loword local consist techniqu chang network thu use process given constraint network exampl use result show nqueen problem wide use testb compar backtrack algorithm high level inher local consist consequ gener fruitless preprocess network second use decid local consist condit ani still need enforc want ensur solut found backtrackfre manner two definit local consist employ character condi tion tradit variablebas notion recent introduc definit local consist call relat consist definit preliminari constraint network r set n variabl fx domain possibl valu variabl x set constraint relat t constraint relat r t subset cartesian product form say constrain variabl fx j g ariti constraint relat number variabl constrain set fs call scheme r assum assum variabl name order variabl constrain relat import see pp use subset integ ng subset variabl fx dxe ceil x smallest integ greater equal x ng subset variabl constraint network instanti variabl element given instanti a variabl extens a variabl x tupl a domain x introduc need oper relat adopt relat calculu see detail relat let set variabl constrain r let subset variabl project rs onto set variabl denot pi rs relat constrain variabl contain tupl u j exist instanti variabl gamma tupl u a r ng subset variabl constraint network instanti a variabl satisfi consist relat r tupl pi fag r instanti a variabl consist network r scheme r satisfi r solut constraint network instanti n variabl consist network constraint relat r ariti k call mtight if variabl x constrain r instanti a remain constrain r either extens a x satisfi r exactli jd j extens definit mloos constraint relat r ariti k call mloos if variabl x constrain r instanti a remain constrain r least extens x satisfi r tight loos properti complementari properti constraint network tight upper bound number extens loos lower bound except univers relat constraint relat loos tight case exactli jd j extens variabl x handl special definit tight everi constraint relat loos constraint relat dloos univers relat domain variabl constrain relat size d everi constraint relat d gamma tight constraint relat tight either null relat univers relat follow interest least upper bound greatest lower bound number extens relat constraint network easi check that given constraint network constraint relat ariti r e tupl relat determin least relat mtight requir otr time bound appli determin greatest relat mloos exampl illustr definit use follow network r variabl fx domain bbb bca cab cba cccg g project given by r ccg instanti acb variabl consist r sinc pi instanti variabl consist r sinc pi aaab instanti variabl fx g tupl consist r therefor solut network set solut network given by faaab aacb abca bacb bcac cabb cbac cccag verifi constraint tight loos partial verif binari constraint r consid extens variabl x given instanti variabl x instanti a x extens x b extens but definit tight still satisfi c extens local consist proven import concept theori practic constraint network review previou definit local consist character variablebas relationbas variablebas local consist mackworth defin three properti network character local con sistenc node arc path consist freuder gener k consist defin follow definit kconsist global consist constraint network r kconsist given k gamma distinct variabl instanti variabl consist r exist extens a kth variabl ktupl consist r network strongli kconsist jconsist j k strongli nconsist network call global consist n number variabl network node arc path consist correspond one two threeconsi tenci respect global consist network properti solut found without backtrack a b figur a consist b consist exampl illustr definit kconsist use wellknown nqueen problem problem find way place nqueen n theta n chess board one queen per column pair queen attack other one possibl constraint network formul problem follow variabl column chess board x domain variabl possibl row posit binari constraint two queen attack other consid constraint network queen problem seen network consist sinc given place singl queen board alway place second queen queen attack other howev network consist exampl given consist placement two queen shown figur a way place queen third column consist previous place queen similarli network consist see figur b relationbas local consist extend notion arc path consist nonbinari re lation new local consist condit call relat arc pathconsist gener relat arc pathconsist relat mconsist definit relat mconsist relat rather variabl primit entiti shall see subsequ section allow express relationship restrict constraint local consist way avoid explicit refer ariti constraint definit slightli weaker given definit relat mconsist constraint network r relat mconsist given distinct relat r x instanti variabl consist r exist extens x extens consist relat network strongli relat mconsist relat jconsist everi j m exampl consid constraint network variabl fx domain bacg g constraint relat consist exampl instanti abb variabl consist network trivial so sinc extens x satisfi r similarli constraint relat consist exampl instanti cbaa variabl fx consist network again trivial so extens x satisfi r rs add constraint r fxg fag r fbg set solut network chang verifi network relat consist constraint binari relat mconsist ident variablebas m condit differ enforc variablebas mconsist done polynomi time unlik relat mconsist achiev tractabl sinc even solv npcomplet problem proposit satisfi see exampl direct argument suggest increas time space complex fact algorithm may need record relat arbitrari ariti variablebas localconsist improv effici enforc relat consist enforc along certain direct linear order variabl algorithm enforc relat consist direct relat consist given constraint tight vs global consist section present relationship tight constraint level local consist suffici ensur network global consist much work done identifi relationship properti constraint network level local consist suffici ensur global consist work fall two class identifi topolog properti underli graph network eg identifi properti constraint eg dechter identifi follow relationship size domain variabl ariti constraint level local consist suffici ensur network global consist theorem dechter constraint network domain size relat ariti r strongli consist global consist network dechter theorem tight level local consist specifi theorem realli requir graph color problem formul constraint network exampl network dechter theorem overestim result view improv dechter theorem take account tight constraint result alway specifi level strong consist less equal level strong consist requir dechter theorem follow lemma need proof main result l l relat constrain variabl x let size domain variabl x let instanti variabl except x constrain l relat ie instanti variabl s relat mtight everi subset fewer relat fr l g exist least one extens x satisfi relat subset exist least one extens x satisfi l relat proof let element domain x say relat allow element extens a x satisfi relat assum contrari extens x satisfi l relat exist then element domain x must exist least one relat allow let c denot one relat allow construct set set relat exist extens a x satisfi relat set everi candid rule sinc c allow everi possibl valu m lead contradict case contradict immedi set relat size m exist extens x satisfi everi relat set contradict condit case nomin size set claim howev repetit c true size set m assum contrari c c j j recal c relat allow g set m relat condit must exist everi relat set allow possibl consid fc g again set relat must exist everi relat set allow time possibl dgamma continu manner show relat c must allow must allow exactli m extens contradict condit therefor must case c j thu set c size contradict condit case remain case similar case argu i repetit set ii true size set c contradict deriv appeal condit thu exist least one extens x satisfi relationsw first state result use variablebas local consist state result use relationbas local consist theorem constraint network relat mtight ariti r strongli mr gamma consist global consist proof let show network relat mtight ariti r strongli kconsist consist without loss gener let set k variabl let instanti variabl x consist constraint network let x ki addit variabl use lemma show exist extens x ki consist constraint network let r l l relat relat constrain x ki subset variabl x consist constraint network extens x ki must satisfi l relat now condit lemma satisfi sinc l relat mtight remain show condit satisfi definit requir strong m consist ensur instanti m r gamma fewer variabl consist network extens x ki extens also consist network note howev sinc l relat ariti r constrain x ki relat constrain r gamma variabl constrain relat therefor requir strong m consist also ensur subset m fewer relat fr l g exist extens x ki satisfi relat subset thu condit lemma satisfi therefor lemma follow extens x ki consist constraint network theorem alway specifi level strong consist less equal level strong consist requir dechter theorem theo rem level requir consist equal well theorem sometim use appli theorem cannot follow exampl illustr r ariti constraint chang level consist requir theorem present must enforc paramet r increas decreas shown below also increas paramet increas follow hold i previous constraint set variabl ii enforc certain level consist result new constraint record variabl and iii new constraint larger valu previou constraint exampl nadel introduc variant nqueen problem call confus nqueen problem find way place nqueen n theta n chess board one queen per column pair queen attack other one possibl constraint network formul problem follow variabl column chess board x domain variabl possibl row posit binari constraint two queen attack other constraint relat two variabl x x problem worth consid nadel use confus nqueen empir comparison backtrack algorithm solv constraint network thu import analyz difficulti problem set empir result context well problem interest provid exampl theorem appli dechter theorem sinc independ n constraint relat tight henc theorem guarante network confus nqueen problem strongli consist network global consist first suppos n even attempt either verifi achiev level strong consist appli success stronger local consist algorithm kondrak shown follow analysi hold n even appli arc consist algorithm result chang network alreadi arc consist appli path consist algorithm tighten constraint variabl network made path consist constraint relat tight theorem guarante network strongli consist global consist appli consist algorithm result chang network alreadi consist thu network strongli consist therefor also global consist second suppos n odd time appli path consist network still tight verifi network consist enforc consist requir ari constraint ad necessari ari constraint chang valu m network still tight henc theorem network strongli consist network global consist kondrak shown record ari constraint suffici guarante network strongli consist n henc independ n network global consist strong consist enforc recal nadel use confus nqueen problem empir compar backtrack algorithm find solut constraint network nadel state problem provid nontrivi testb p believ analysi indic problem quit easi empir result problem interpret light easi problem potenti make even naiv algorithm solv constraint network look promis avoid potenti pitfal backtrack algorithm test problem rang easi hard gener hard problem requir high level local consist ensur global consist note also problem trivial satisfi exampl graph kcolor problem view problem constraint network variabl node graph domain variabl k possibl color binari constraint two adjac node must assign differ color graph kcolor provid exampl network theorem give bound suffici level local consist sinc constraint tight show concept relationbas local consist use altern describ theorem theorem constraint network relat mtight strongli relat m consist global consist proof show network relat mtight strongli relat m consist kconsist k therefor global consist without loss gener let set let a instanti variabl x consist constraint network let x k addit variabl use lemma show exist extens a x k consist constraint network let r l l relat relat constrain x k subset variabl x consist constraint network extens a x k must satisfi l rela tion now condit lemma satisfi sinc l relat mtight further condit lemma satisfi sinc definit requir strong relat m consist ensur subset fewer relat exist extens a x k satisfi relat subset therefor lemma follow extens x k consist constraint networka immedi corollari theorem know result appli algorithm enforc strong relat m consist relat mtight guarante priori algorithm return equival global consist network exampl consid network domain variabl size two exampl satisfi proposit cnf provid exampl network domain size two relat constrain variabl domain size two tight addit relat ad network result enforc strong relat consist also tight thu consist network decid algorithm enforc strong relat consist differ deriv result alreadi given backtrack algorithm construct extend partial solut instanti variabl linear order global consist impli order variabl solut constraint network construct backtrackfre manner is backtrack search encount deadend search dechter pearl observ often suffici backtrackfre along particular order variabl local consist enforc respect order onli frequent properti interest in case tight loos satisfi along order conclud global consist restrict order well enforc relat consist respect order variabl done gener elimin algorithm call directionalrelationalconsist present algorithm potenti effect practic worstcas requir weaker condit direct version tight loos properti result present paper easili formul use idea present result section use follow mackworth show constraint network view restrict knowledg represent reason framework context solut constraint network correspond model knowledg base result bound level local consist need ensur global consist use applic constraint network use knowledg base mani queri knowledg base preprocess constraint network global consist mean queri answer backtrackfre manner equival global consist represent constraint network highli desir sinc compil answer mani queri shown exist constraint network queri network exponenti speedup worst case exam ple consid constraint network solut equival global consist network would contain null relat algorithm answer queri constraint network would quickli return ye cours interest exampl knowledg base consist queri involv determin valu variabl feasiblecan occur model networkcan answer global consist represent look domain variabl queri involv determin valu pair variabl feasiblecan occur singl model networkcan answer look binari relat constrain two variabl clear gener algorithm answer queri origin network backtrack search take exponenti amount time answer queri gener global consist represent network use whenev compact set solut network global consist represent answer queri subset variabl ng restrict attent smaller network consist variabl relat constrain variabl global consist properti ensur solut variabl also creat backtrackfre manner howev result work practic interest empir question remain open result section also interest explanatori power use character difficulti problem formul constraint network see discuss end next section constraint loos vs local consist section present suffici condit base loos constraint size domain variabl give lower bound inher level local consist constraint network known class constraint network alreadi possess certain level local consist therefor algorithm enforc level local consist effect network exampl nadel observ arc consist algorithm never chang constraint network formul nqueen problem n dechter observ constraint network aris graph kcolor problem inher strongli kconsist result character structur constraint network make statement true follow lemma need proof main result l l relat constrain variabl x let size domain variabl x let instanti variabl except x constrain l relat ie instanti variabl s relat mloos l l dgammam exist least one extens a x satisfi l relat proof let element domain x say relat allow element extens a x satisfi relat now key proof that l relat mloos least element domain x allow relat thu relat allow gamma element togeth l relat allow ld gamma m element domain x thu cannot case everi element domain x allow relat thu l exist least one extens x satisfi l relat first state result use variablebas local consist state result use relationbas local consist let binomialk r binomi coeffici number possibl choic r differ element collect k object k r binomialk theorem constraint network domain size relat mloos ariti least r r strongli kconsist k minimum valu follow inequ hold proof without loss gener let set variabl let instanti variabl x consist constraint network let x k addit variabl show network kconsist must show exist extens a x k consist constraint network let r l l relat relat constrain x k subset variabl x consist constraint network extens x k must satisfi l relat lemma extens exist l ddd gamma me gamma now level strong kconsist minimum number distinct variabl constrain l relat word k minimum number variabl occur l know relat constrain variabl x k thu minimum number variabl s fxg minimum valu c occur relat ariti r thu s l set r gamma variabl further know l relat constrain differ subset variabl ie j l binomi coeffici binomialc r gamma tell us number distinct subset cardin r gamma contain set size c thu us minimum number variabl c need order specifi remain r gamma variabl l relat subject condit relat must constrain differ subset variabl constraint network relat binari import special case theorem corollari constraint network domain size relat binari mloos strongli dgammam consist proof constraint relat ariti henc minimum valu k inequ theorem hold theorem alway specifi level local consist less equal actual level inher local consist constraint network is theorem provid lower bound howev given loos constraint size domain theorem give strong estim inher level local consist possibl exampl given theorem exact graph color problem provid exampl theorem exact nqueen problem provid exampl theorem underestim true level local consist exampl consid wellknown nqueen problem discuss exampl problem histor interest also theoret interest due import test problem empir evalu backtrack algorithm heurist repair scheme find solut constraint network eg nqueen network domain size n constraint binari n gamma loos henc theorem predict nqueen network inher strongli dne consist thu nqueen constraint network inher arcconsist inher path consist n on predict fruitless appli loword consist algorithm attempt simplifi network see tabl actual level inher consist bnc n thu nqueen problem theorem underestim true level local consist tabl predict dne actual bnc n level strong local consist nqueen network pred actual exampl graph kcolor provid exampl theorem exact estim inher level local consist see exampl constraint network formul graph color dechter state graph color network inher strongli kconsist guarante strongli consist domain size k constraint binari loos henc theorem predict graph kcolor network inher strongli kconsist exampl consid formula cnf view constraint network variabl domain ftrue falseg claus correspond constraint defin model domain size two constraint ariti loos minimum valu k inequ theorem hold henc network strongli consist show concept relationbas local consist use altern describ theorem theorem constraint network domain size relat mloos strongli relat dgammam consist proof follow immedi lemma result section use two way first use estim whether would use preprocess constraint network use local consist algorithm perform backtrack search see exampl empir studi effect preprocess second use conjunct previou work identifi condit certain level local consist suffici ensur solut found backtrackfre manner see exampl brief review previou work start section togeth new result present there sometim level inher strong kconsist guarante theorem suffici conjunct previous deriv condit guarante network global consist therefor solut found backtrackfre manner without preprocess oth erwis estim provid theorem give start point appli local consist algorithm result section also interest explanatori power conclud section discuss theorem theorem contribut intuit hard class problem in spirit of exampl hard constraint network instanc give rise search space mani dead end hardest network mani dead end occur deep search tree dead end cours correspond partial solut cannot extend full solut network constraint close d size domain variabl good candid hard problem reason twofold first network high loos valu high level inher strong consist strong kconsist mean partial solut least size k second network high tight valu requir high level preprocess backtrackfre comput experi perform random problem binari constraint provid evid network constraint high loos valu hard random problem gener probabl binari constraint two variabl q probabl pair cartesian product domain constraint time find one solut measur experi discov that given number variabl domain size fix hardest problem found constraint loos possibl without degener trivial constraint tupl allow word found hardest region loos constraint harder hardest region tight constraint network loos constraint would turn hardest random problem somewhat counterintuit individu constraint easi satisfi experiment result run counter tsang p intuit singl solut loos constrain problem can easili found simpl backtrack henc problem easi tightli constrain problem harder compar loos problem well hard looselyconstrain problem amen preprocess loword local consist algorithm sinc theorem state possess high level inher local consist run counter william hogg p specul preprocess dramat effect region problem hardest conclus identifi two new complementari properti restrict constraint network constraint tight constraint loos constraint tight use conjunct level local consist suffici condit guarante solut network found backtrackfre manner condit use applic knowledg base queri preprocess cost amort mani queri constraint loos use suffici condit local consist condit inexpens determin use estim level strong local consist network turn use decid whether would use preprocess network backtrack search decid local consist condit ani still need enforc want ensur solut found backtrackfre manner also show constraint tight constraint loos interest explanatori power use character difficulti problem formul constraint network explain problem easi local difficult global show constraint low tight valu network may requir less preprocess order guarante solut found backtrackfre manner constraint high loos valu network may requir much search effort order find solut exampl confus nqueen problem constraint low tight valu shown easi solv backtrackfre enforc loword local consist condit anoth exampl mani instanc crossword puzzl also rel easi constraint word fit slot puzzl low tight valu sinc mani word length differ last letter word hand graph color schedul problem involv resourc constraint quit hard constraint inequ constraint thu high loos valu acknowledg author wish thank peter ladkin anonym refere care read previou version paper help comment r realli hard problem are optim kconsist algorithm characteris tractabl constraint enhanc scheme constraint process backjump ing local global consist experiment evalu preprocess techniqu constraint satisfact problem tree cluster constraint network local global relat consist synthes constraint express suffici condit backtrackfre search suffici condit backtrackbound search experiment case studi backtrack vs waltztyp vs increas tree search effici constraint satisfact problem test tractabl fast parallel constraint satisfact person commun consist network relat logic constraint satisfact solv largescal constraint satisfact schedul problem use heurist repair method network constraint fundament properti applic pictur process constraint satisfact algorithm hybrid algorithm constraint satisfact problem complex achiev kconsist foundat constraint satisfact principl databas knowledgebas system inher level local consist constraint net work constraint tight versu global consi tenci minim global consist rowconvex constraint network use deep structur locat hard problem tr suffici condit backtrackbound search principl databas knowledgebas system vol networkbas heurist constraintsatisfact problem tree cluster constraint network research note optim italickconsist algorithm enhanc scheme constraint process backjump learn cutset decomposit constraint satisfact algorithm local global consist logic constraint satisfact fast parallel constraint satisfact inher level local consist constraint network characteris tractabl constraint experiment evalu preprocess algorithm constraint satisfact problem minim global consist rowconvex constraint network local global relat consist suffici condit backtrackfre search synthes constraint express complex achiev kconsist ctr yuanlin zhang roland h c yap erratum p van beek r dechter theorem constraint loos local consist journal acm jacm v n p may yuanlin zhang roland h c yap consist set intersect eighteenth nation confer artifici intellig p juli august edmonton alberta canada amnon meisel andrea schaerf model solv employe timet problem annal mathemat artifici intellig v n p septemb paolo liberator monoton reduct repres equival compil intract problem journal acm jacm v n p novemb mosh y vardi constraint satisfact databas theori tutori proceed nineteenth acm sigmodsigactsigart symposium principl databas system p may dalla texa unit state henri kautz bart selman state sat discret appli mathemat v n p june