t new collaps consequ np small circuit a show selfreduc set polynomials circuit low probabilist class zpp np consequ get deeper collaps polynomialtim hierarchi ph zppnp assumpt np polynomials circuit improv wellknown result karp lipton proceed th acm symposium theori comput acm press new york pp state collaps ph second level sigmap_ assumpt furthermor deriv new collaps consequ assumpt complex class like up fewp cp polynomials circuit final investig circuits complex sever languag class particular show everi fix polynomi s set zppnp osnsiz circuit b introduct question whether intract set effici decid nonuniform model comput motiv much work structur complex theori research earli s present varieti result obtain show imposs plausibl assumpt see eg survey typic model nonuniform comput circuit famili notat karp lipton set decid polynomials circuit precis set ppoli ie decid polynomi time help polynomi length bound advic function karp lipton togeth sipser prove npcomplet set polynomi size circuit in symbol np ppoli unless polynomi time hierarchi collaps second level proof given exploit certain kind selfreduc wellknown npcomplet problem sat gener shown everi ture selfreduc set ppoli low second level sigma p polynomi time hierarchi intuit speak set low relativiz complex class give addit power use oracl class paper show everi selfreduc set ppoli even low probabilist class zppnp mean everi oracl a sigma low zppnp impli low sigma p consequ low result get deeper collaps polynomialtim hierarchi zppnp assumpt np polynomials circuit abteilung fr theoretisch informatik universitt ulm ober eselsberg d ulm germani koeblerinformatikuniulmd depart comput scienc tokyo institut technolog meguroku tokyo japan watanabecstitechacjp part work done visit univers ulm support part guest scientif program univers ulm j k obler o watanab least relativ world new collaps level quit close optim oracl rel np contain ppoli ph collaps pnp also deriv new collaps consequ assumpt complex class like up fewp cp polynomials circuit furthermor low result impli new relativiz collaps case modm p pspace exp polynomials circuit final applic deriv new circuit size lower bound particular shown by relativ proof techniqu everi fix polynomi s set zppnp osnsiz circuit improv result kannan everi polynomi s class sigma p contain set follow everi relativ world exist set class zpexpnp polynomials circuit note nonrelativ proof stronger result corollari result prove nonrelativ techniqu provabl exp coma exp a subclass zpexpnp contain non ppoli set explan work build prior techniqu order proof low result heavili use univers hash techniqu build idea design zero error probabilist algorithm which help np oracl simul given zppnpa comput where selfreduc set ppoli make use newli defin concept halfcollis precis show comput input n expect polynomi time hash famili h use decid instanc length n strong np comput way h use decid nonmembership check whether h lead halfcollis certain set recent bshouti cleve gavalda kannan tamon build result shown class circuit exactli learnabl random expect polynomi time equival queri aid np oracl immedi impli everi set ppoli advic function comput fzppnpa ie probabilist oracl transduc expect polynomi time oracl npa precis sinc circuit produc probabilist learn algorithm depend outcom coin flip comput multivalu advic function ie input n accept probabl least everi accept path output circuit correctli decid instanc length n wrt a use techniqu abl show everi selfreduc set ppoli even advic function fzppnp although provid differ way deduc zppnp low selfreduc set ppoli prefer give selfcontain proof use halfcollis techniqu reli mention result paper organ follow section introduc notat defin selfreduc use section prove zppnp low self reduc set ppoli section state collaps consequ new circuits lower bound deriv section preliminari notat languag binari alphabet g usual denot lexicograph order sigma length string x sigma denot jxj sigma n sigma n set string length n resp length smaller n languag a cardin finit set denot jaj characterist function defin otherwis class c set coc denot class fsigma gamma j cg encod pair or tupl string use standard polynomialtim comput pair function denot hdelta deltai whose invers also comput polynomi time intent clear place fhx denot set nonneg integ throughout paper base log textbook consult standard notat use paper basic result complex theori definit probabilist complex class like zpp see also machin polynomialtim nondeterminist ture machin assum comput path given input x either accept reject output accept input x perform least one accept comput otherwis reject x strongli accept strongli reject x ffl least one accept resp reject comput path ffl reject resp accept comput path strongli accept strongli reject x said perform strong comput input x np machin everi input perform strong comput call strong np machin well known exactli set np conp accept strong np machin next defin kind selfreduc use paper definit let irreflex transit order relat sigma sequenc string call chain of length k x x k relat call length checkabl polynomi q x sigma x impli jyj qjxj languag fhx chain length k x yg np definit set selfreduc polynomialtim oracl machin self length checkabl order relat input x self queri oracl string oe x straightforward check polynomi relat selfreduc set introduc ko well lengthdecreas worddecreas selfreduc set balcazar selfreduc sens furthermor wellknown see exampl complex class like np sigma p pspace exp manyon complet selfreduc set karp lipton introduc notion advic function order character nonuniform complex class function h n sigma call polynomi length function polynomi p n pn class c set let cpoli class set set c j k obler o watanab polynomiallength function h n x sigma n function h call advic function a wherea correspond interpret set paper heavili make use hash techniqu fruit complex theori review notat fact hash famili also extend notion collis introduc concept halfcollis central proof techniqu sipser use univers hash origin invent carter wegman decid probabilist whether finit set x larg small linear function h sigma sigma k given boolean k mmatrix a ij map string x string inner product ith row x h linear hash function sigma sigma k say x collis wrt h exist string differ x gener x subset sigma h famili l linear hash function sigma sigma k say x collis wrt h collisionx y h short x x collis wrt everi h h is x collis wrt h simpli say x collis wrt h next extend notion collis follow way x famili l linear hash function say x halfcollis wrt h halfcollisionx y h short x x collis wrt least dle mani hash function h h is halfcollisionx import relationship collis halfcollis follow one x collis wrt h must halfcollis wrt h either note predic collisionx y h decid np provid membership x test np precis languag fhv hi j as well set fhv hi j halfcollisionx np set x v v succinctli repres way languag np denot set famili l l linear hash function sigma sigma k hl m k follow theorem prove pigeonhol argument say everi suffici larg set must collis wrt hash famili theorem hash famili h hl m k set x sigma cardin jxj l must collis wrt h hand get next theorem call code lemma upper bound collis probabl suffici small set theorem let x sigma set cardin kgamma choos hash famili h uniformli random hk m k probabl x collis wrt h also make use follow extens theorem prove along line theorem let x sigma set cardin kgamma choos famili h uniformli random hl m k probabl x collis wrt h kgammasl gavalda extend sipser code lemma theorem case collect c exponenti mani set follow theorem similar flavor theorem let c collect n subset sigma cardin kgamma choos hash famili h uniformli random probabl x c collis wrt h proof theorem everi fix x c probabl collis wrt randomli chosen hash famili h hl m k kgammasl henc probabl exist set x c paper make use correspond result case halfcollis theorem let x sigma let c collect n subset cardin kgammasgamma choos hash famili h uniformli random hl m k probabl x halfcollis c wrt h jxj delta ngammasl proof everi fix c everi fix x x probabl x collis wrt randomli chosen h gammasgamma henc probabl x collis wrt least half function randomli chosen hash famili h hl m k l l is probabl x halfcollis wrt randomli chosen hash famili h bound gammasl henc probabl exist c x x x halfcollis wrt h jxj delta ngammasl low selfreduc set ppoli section show everi selfreduc set np conppoli low zppnp let np conp j k obler o watanab interpret set h advic function a construct probabilist algorithm np oracl follow two properti a expect run time polynomi bound b everi comput path input n oracl output inform use determin membership x length n strong np comput in sens use properti prove low zppnp follow order simul npa comput first precomput mention inform up length use inform simul npa comput npnp conp comput note precomput perform done zppnp sinc remain comput done np henc impli zppnpa zppzppnp zppnp make term inform precis thi need addit notat let selfreduc wit polynomialtim oracl machin self length checkabl order relat polynomi q assum fix polynomi p follow fix n consid instanc length qn well advic string length exactli pn ffl sampl sequenc hx pair x s instanc length qn b ffl sampl consist set advic string w consist s ie cardin consist denot cs ffl sampl instanc x let acceptx s resp rejectx s set consist advic string accept x resp reject x ffl let correctx s set fw consist j ix consist advic string decid x correctli let incorrectx s complementari set fw consist j ix w axg note set acceptx s rejectx s as well correctx s incorrectx s form partit set consist condit b precis state follow b everi comput path input n output pair hs hi consist sampl linear hash famili h x length n consist halfcollis wrt h correctx s incorrectx s pair hs hi satisfi condit b determin whether instanc x length n simpli check whether consistentx s halfcollis wrt h acceptx s rejectx s sinc condit b guarante halfcollis alway found check done strong np comput let us prove main lemma lemma selfreduc set np conppoli exist probabilist transduc oracl np satisfi two condit proof use notat introduc far recal qn length bound queri occur selfreduct tree produc self instanc length n pn advic length set instanc length qn let l polynomi defin further denot sigma n set fy j x sigma n xg clear sigma n sigma n sigma qn descript given below input loop randomli hln pn k collis wrt h k g exist x sigma n consist halfcollis incorrectx s wrt h kmax use oracl find string x determin ax els exitloop end loop output start empti sampl enter main loop execut loop first randomli guess seri pn mani hash famili comput integ kmax maximum png consist collis wrt h k notic pad trick assum cs alway larger ln impli consist must collis wrt h sinc particular consist collis wrt h kmax follow everi instanc x sigma n consist halfcollis wrt h kmax either correctx s incorrectx s exist string x sigma n consist halfcollis incorrectx s wrt h kmax string ad sampl continu execut loop we describ use np oracl find x case otherwis j k obler o watanab pair hs h kmax fulfil properti state condit b halt show expect run time polynomi bound sinc initi size consist pn sinc consist never becom empti suffic prove polynomi r elimin singl execut main loop probabl least rn least rnfraction circuit consist fact show singl extens reduc size consist probabl least factor smaller perform lnpn loop iter iter main loop extend pair hx axi shrink size consist factor smaller probabl event bound lnpn let sampl let kmax correspond integ determin specif execut loop first deriv lower bound kmax smallest integ k cs ln k sinc either pn consist collis wrt hash famili h kmax use theorem cs ln kmax henc sinc expand string x sigma n consist halfcollis incorrectx s wrt h kmax sinc consistentshx probabl size consist decreas factor smaller bound probabl that wrt h kmax consist halfcollis set incorrectx s size cs ln let follow theorem probabl consist halfcollis wrt uniformli random chosen hash famili h hln thu probabl k consist halfcollis wrt h kk set incorrectx s size cs ln bound final show determin instanc x sigma n if exist consist halfcollis incorrectx s wrt h kmax intuit use selfreduc test correct wrt program hs h kmax i say ffl pair hs hi accept instanc x consist halfcollis ffl hs hi reject x consist halfcollis rejectx s wrt h notic incorrect program might accept time reject instanc main idea find whether hs h kmax incorrect instanc mean wrt h kmax consist halfcollis incorrectx s test whether program hs h kmax accord output self oracl queri self answer accord program precis consid np set hi j comput path self input z fulfil follow properti queri q answer ye hs hi accept q queri q answer no hs hi reject q accept hs hi reject z reject hs hi accept z g then shown next claim correct hs h kmax instanc z decid ask whether hz belong b provid hs h kmax correct potenti queri self input z claim assum hs h kmax correct oe z hs h kmax incorrect z hz belong b proof use fact everi instanc x sigma n consist half collis wrt h kmax either correctx s incorrectx s easi see incorrect z comput path follow self z oracl wit hz b convers assum hz belong b let comput path wit fact note queri q answer correctli wrt a sinc otherwis hs h kmax incorrect q oe z henc path follow self z oracl therefor decid z correctli hand sinc wit hz inde incorrect z defin oracl set c phi d hi j chain length at least k string sigma n string z x hz hi j accept comput path self input x queri q answer ye no consist halfcollis acceptq s resp rejectq s wrt h g note proof claim also show z sigma n correct oe z z hz d complet descript first ask whether string belong c clear neg answer impli correct sigma n otherwis ask queri form comput binari search max maximum valu belong c a similar idea use obler o watanab input loop randomli hln pn k collis wrt h k g els exitloop end loop output know determin lexicograph smallest string xmin h c sinc hq hold instanc q oe xmin follow induct claim hs h kmax correct q oe xmin henc must incorrect xmin furthermor determin membership xmin ask whether string hx min belong d theorem everi selfreduc set class np conppoli low zppnp proof first show npa zppnp let l set npa let determinist polynomialtim oracl machin polynomi t let sn polynomi bound length oracl queri input hx yi x length n l accept probabilist oracl machin n use follow np oracl hi j sigma tjxj input hx yi accept path queri q answer ye no consist halfcollis acceptq s resp rejectq s wrt h g n accept l input x n first simul input sjxj comput pair hs h kmax describ t ask question np oracl o n ask queri hx find whether x l prove npa zppnp sinc via proof relativ follow zppnpa also contain zppnp show low zppnp collaps consequ direct consequ theorem get improv karp lipton sipser result np contain ppoli unless polynomialtim hierarchi collaps sigma p corollari np contain np conppoli polynomialtim hierarchi collaps zppnp proof sinc npcomplet set sat selfreduc assumpt np contain np conppoli impli sat low zppnp henc polynomialtim hierarchi collaps zppnp collaps polynomialtim hierarchi deduc corollari quit close optim least relativ world oracl rel np contain ppoli polynomialtim hierarchi collaps pnp rest section report interest collaps easili deriv use by now standard techniqu also point independ sever research second author first straightforward check theorem relativ oracl b selfreduc set class npb conpbpoli npa contain zppnpb consequ theorem gener follow result theorem selfreduc set class sigma p poli direct consequ theorem get improv result state for k contain sigma p poli unless polynomialtim hierarchi collaps sigma p corollari let k sigma p k contain sigma p poli polynomialtim hierarchi collaps zppsigma p proof sinc sigma p contain complet selfreduc languag assumpt k contain sigma p poli impli sigma p yap prove pi p k contain sigma p poli unless polynomialtim hierarchi collaps sigma p k consequ theorem get follow improv yap result corollari k pi p poli proof assumpt pi p k contain sigma p poli impli sigma p k contain sigma p poli sigma p poli henc appli corollari corollari theorem also similar collaps result mani complex class follow typic exampl corollari k conppoli k low zppnp proof wellknown everi set fewp left set worddecreas selfreduc resp fewp thu assumpt np conppoli resp fewp np conppoli follow theorem left set and sinc polynomialtim manyon reduc left set also low zppnp corollari everi k cp sigma p poli proof first sinc cp complet worddecreas selfreduc languag poli impli cp zppsigma p obler o watanab poli impli ph sigma p k poli therefor ph collaps zppsigma p k corollari final sinc cpph bppc p follow cpph ph sinc get induct ch ph zppsigma p corollari let k k poli k ph ph collaps zppsigma p proof proof k fexppspaceg immedi theorem sinc pspace complet lengthdecreas selfreduc languag sinc exp complet worddecreas selfreduc languag proof k analog one corollari use fact modmp complet worddecreas selfreduc languag ph bppmodm p sinc proof techniqu relativiz result hold everi relativ world hand known class stronger collaps consequ obtain use nonrelativiz argument theorem k fpp modmppspaceexpg k ppoli k ma harri buhrman point us corollari also deriv theorem circuit complex kannan prove everi fix polynomi s set sigma p cannot decid circuit size sn use pad argument obtain exist set nexpnp conexpnp polynomials circuit theorem everi polynomi s set sigma p circuit size sn everi increas timeconstruct superpolynomi function fn set ntimefnnpcontimefnnp polynomi size circuit applic result section improv kannan result everi relativ world class sigma p zppnp class contimefnnp zptimefnnp respect zptimefnnp denot class set accept zero error probabilist machin expect run time ofn rel np oracl note set class ppoli may fix interpret set appropri one p let univ denot fix interpret set furthermor ppoli remain class relax notion advic function h wrt univ follow everi x univ x hjxj ie hn decid correctli n instead n sequenc circuit cn n call circuit famili a everi n cn n input gate nbit string x wellknown see eg univ chosen way advic length circuit size ie number gate polynomi relat other precis assum polynomi p follow hold everi set a ffl h advic function wrt univ exist circuit famili cn n size jcn j pn ffl cn n circuit famili a exist advic function h wrt univ length jhnj pjc n j moreov assum everi polynomialtim interpret set constant c h advic function wrt i exist advic function h wrt univ length jh nj n follow lemma obtain direct diagon cf correspond result set call printabl see polynomialtim oracl transduc oracl set c input n output list string n lemma everi fix polynomi s delta p printabl set everi advic function h length jhnj sn almost n proof given n sequenc string length n enumer lexicograph order consid two set haveadvic find a defin follow haveadvic j delta delta delta sinc string w sigma sn least one pair form hn delta delta delta sn contain haveadvic provid sn n let ff n denot lexicograph smallest pair hn delta delta delta sn i ie advic length smaller sn accept string x accord set string x jx n sn n ith bit ff n ie binari search use oracl find a ff n comput polynomi time sinc haveadvic np thu find a npnp follow pnpnpprintabl sinc furthermor almost n n advic length smaller sn lemma follow corollari everi fix polynomi s set zppnp circuit size sn proof np polynomials circuit take otherwis corollari thu theorem easili follow lemma corollari let f increas timeconstruct superpolynomi function zptimefnnp contain set polynomials circuit j k obler o watanab proof np polynomials circuit take otherwis corollari thu follow lemma set b zptimen k np everi advic function h b length jhnj n almost n proof techniqu lemma assum length n string b s occur olog n rightmost posit consid follow set where n denot jxj interpret set clearli belong zptimefnnp belong p furthermor h advic function a everi form bfn k cgamman x h n suitabl advic function length jh nj thu follow almost n show length h superpolynomi corollari everi relativ world zpexpnp contain set polynomials circuit remark result prove relativiz argument hand harri buhrman independ thoma thierauf point us theorem which prove nonrelativiz proof techniqu use show exp coma exp contain non ppoli set here exp denot exponentialtim version babai class is languag l mafn exist set b dtimeon x length n z chosen uniformli random sigma fn corollari exp coma exp contain set polynomi size circuit sinc exist recurs oracl rel set expnp polynomi size circuit possibl extend corollari relativ techniqu class expnp conclud remark interest question concern complex class c known contain ppoli known complet set whether exist set c gamma ppoli construct shown exampl corollari know class zpexpnp contain set polynomials circuit abl give construct proof fact best knowledg explicit set known even acknowledg help discuss suggest regard work grate h buhrman r gavalda l hemaspaandra m ogihara u schone r schuler t thierauf like thank h buhrman l hemaspaandra m ogihara permit us includ observ paper r hide inform oracl queri concept learn arithmet new method structur complex random proof system hierarchi complex class structur complex theori introduct theori complex oracl queri suffici exact learn univers class hash function bound complex advic function comput complex probabilist complex class comput time np set differ densiti relativ exponenti probabilist complex class hard spars set random gener combinatori structur uniform distribut connect nonuniform uniform complex class journal comput system scienc strong nondeterminist polynomialtim reduc algebra method interact proof system spars hard set count class polynomialtim bound truthtabl reduc np set spars set comput complex simultan resourc bound complex theoret approach random probabilist polynomi count class least hard polynomialtim hierarchi complex class defin count quantifi relativ circuit complex consequ nonuniform condit uniform class robust probabilist comput complex class definit perturb tr ctr christian glaer lane a hemaspaandra moment perfect clariti ii consequ spars set hard np respect weak reduct acm sigact new v n p dec valentin kabanet jinyi cai circuit minim problem proceed thirtysecond annual acm symposium theori comput p may portland oregon unit state lane a hemaspaandra mitsunori ogihara gerd wechsung reduc number solut np function journal comput system scienc v n p march rahul santhanam circuit lower bound merlinarthur class proceed thirtyninth annual acm symposium theori comput june san diego california usa lane a hemaspaandra sigact new complex theori column acm sigact new v n june jinyi cai venkatesan t chakaravarthi lane a hemaspaandra mitsunori ogihara compet prover yield improv karplipton collaps result inform comput v n p april piotr faliszewski lane hemaspaandra open question theori semifeas comput acm sigact new v n march lanc fortnow beyond np work legaci larri stockmey proceed thirtyseventh annual acm symposium theori comput may baltimor md usa johann kbler rainer schuler averagecas intract vs worstcas intract inform comput v n p april