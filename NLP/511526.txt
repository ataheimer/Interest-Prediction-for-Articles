t translat xslt program effici sql queri a present algorithm translat xslt program sql context virtual xml publish singl xml view defin relat databas subsequ queri xslt program xslt program translat singl sql queri run entir databas engin translat work larg fragment xslt defin includ descendantancestor axi recurs templat mode paramet aggreg put consider effort gener correct effici sql queri describ sever optim techniqu achiev effici test system sql queri tpch databas benchmark repres xslt translat back sql use translat b introduct xslt increasingli popular languag process xml data base recurs paradigm rel easi use programm accustom function recurs style pro gram origin design serv stylesheet map xml html increasingli use applic queri transform xml data today xml data use enterpris applic origin relat databas rather store na tive strong reason chang near futur relat databas system offer transact guar ante make irreplac enterpris applic come equip highperform queri processor optim exist consider invest today relat databas system well applic implement top them languag system understand sql techniqu map relat data xml well understood research system xml publish shown specifi map relat model xml translat xml queri express xmlql xqueri sql paper present algorithm translat xslt program effici sql queri identifi certain subset xslt translat possibl rich enough express databaseslik queri xml data includ recurs templat mode paramet with restrict copyright held authorown www may honolulu hawaii usa acm aggreg condit larg fragment xpath one import contribut paper identifi new class optim need done either translat relat engin order optim kind sql queri result translat argu xslt fragment describ suffici express databaselik queri xslt part experiment evalu express sql queri tpch benchmark fragment translat sql use system case could express queri fragment case queri gener xslt program turn significantli complex origin tpch counterpart translat xml languag sql consid befor xml queri languag like xmlql xqueri distinct signific sinc xslt queri languag translat sql significantli complex reason huge paradigm gap xslt function recurs paradigm sql declar paradigm easi translat possibl and fact easi construct program xslt sql equival altern translat alway possibl interpret xslt program outsid relat engin use rdbm object repositori exampl xslt interpret could construct xml element demand issu one sql queri everi xml element need assum formul sql queri retriev xml element given id implement would end read materi entir xml document time also approach would need issu multipl sql queri singl xslt program slow interpret consider odbc jdbc connect overhead contrast approach gener singl sql queri entir xslt program thu push entir comput insid relat engin prefer solut make singl connect databas server enabl relat engin choos best execut strategi particular program exampl consid xslt program below xsltemplat match xslapplytempl xsltemplat xsltemplat matchpersonnamesmith xslvalueof selectphonetext xsltemplat program make recurs travers xml tree look person call smith return phone interpret program outsid relat engin need is beer name price drinker name age astrosign drinker sign frequent drinker bar bar name serv bar beer like drinker beer figur relat schema beersdrinkersbar doc drinker astrosign beer price barnam name beernam name bar name age figur xml view beersdrinkersbar sue sql queri retriev root element one sql queri child find person element etc naiv approach xslt interpret end materi entir document approach convert entir xslt program one sql queri queri depend particular map relat data xml assum map result sql queri is select personphon person order magnitud faster naiv ap proach addit exist index name databas relat engin improv perform organ paper follow section provid exampl xslt sql translat illustr main issu section describ architectur translat section describ variou compon detail discuss optim done produc effici sql queri section section present result experi tpch benchmark queri section discuss relat work conclus exampl xslt sql translat illustr exampl xslt sql translat highlight main issu go along fragment xslt translat us becom clear throughout section illustr queri wellknown beersdrink bar databas schema adapt shown figur assum export xml shown figur notic redund export xml data exampl bar access either directli drinker beer assum xml document unord support xslt express check order input exampl beer drinker form unord collect possibl extend techniqu order xml view q select beersnam beer q select beernam drinker like beer drinkersnamelikesdrink likesbeerbeersnam figur find beer like drinker beyond scope here furthermor consid ele ment attribut text node xml tree omit discuss kind node comment process instruct xpath xpath compon xslt translat sql must handl it exampl xpath docdrinkersnam return drinker equival sql is select drinkersnam drinker less obviou exampl consid queri figur two sql queri q q q correct translat p return beer p return beer like drinker inde p q semant particular q preserv multipl beer way p q much expens q sinc perform two join q simpl project case optim q replac q name follow condit satisfi everi beer like least one drinker user specifi duplic answer re move case p q semant system optim translat construct q instead q one optim consid section xpath fragment support system includ entir languag except construct deal order refer traver sal exampl navig axi like ancestororself support followings not xslt templat mode basic xslt program collect templat rule templat rule specifi match pattern mode presenc mode allow differ templat chosen comput arriv node figur show xslt program return everi drinker age less pair drinker name beer price like program mode first mode the default mode drinker age less select second mode mode drinker beer price less select third mode result element creat gener templat mode also use modular program correspond sql queri also shown recurs xslt xslt xpath travers xml tree recurs consid xpath express barnam retriev bar name absenc xml schema inform imposs express queri sql need navig arbitrarili deep xml document howev case xml data sql implement support recurs queri xsltemplat matchdrinkersag xsltemplat matchbeerspric result xslapplytempl select name mode xsltemplat matchnam mode select drinkersnam likesnam drinker like beer drinkersag likesdrink likesb figur xslt program use mode everi drinker age less return pair drinker name beer price less like xsltemplat matchdrinkersnam brian xslapplytempl selectdrink mode xslparam namesign selectastrosign xsltemplat matchdrink mode xslparam namesign xslvariabl namecurrsign selectastrosign xslif testsign currsign result xslvalueof selectnam drinker drinker drinker drinker astrosign astrosign astrosign astrosign figur drinker astrosign brian gener relat databas result xml document nonrecurs schema unfold recurs program nonrecurs one use schema fig unfold xpath express drinkersbeersbarnam recurs also express xslt templat given nonrecurs xml schema recurs also elimin introduc addit xslt templat mode describ gener techniqu section variabl paramet xslt xslt one bind valu paramet one part tree use part sql becom join oper correl two tabl exampl consid queri figur find drinker astrosign brian paramet use pass valu brian as trosign match everi drinker astrosign exampl valu store variabl paramet singl node gener store nodeset specifi us express xslt program gener recurs sql queri work xsltemplat matchdrink result xslvalueof selectminbeerspric select drinkersnam minbeerspric drinker drinker like like beer beer likesdrink likesb group drinkersnam figur everi drinker find minimum price beer like ing xpath instanc also result anoth templat call analog temporari tabl sql translat xslt sql support possibl valu taken variabl aggreg xslt sql support aggreg signific differ xslt aggreg oper appli subtre input sql appli group use group claus consid queri figur find everi drinker minimum price beer like xslt simpli appli min subtre sql group drinkersnam glimps difficulti involv translat aggr gate consid queri figur which everi age return cheapest price beer like peopl age xslt first find age age appli min node set case subtre correct sql translat xslt program shown next follow incorrect translat differ subtl xslt collect age multipl is three person year old three result wrong sql queri contain singl entri correct sql queri addit groupbi attribut name ensur age occur correct number time output see also discuss section xslt construct apart alreadi mention translat also support ifels foreach case construct foreach construct equival iter use separ templat rule case construct equival multipl statement challeng translat xslt fragment sql pose major challeng first need map function program style declar style templat correspond function call graph need convert sql state ment second need cope gener recurs xpath level xslt templat possibl gen eral alway possibl xml document gener relat databas case third paramet add anoth sourc complex typic need convert join valu differ part xml tree final xsltstyle aggreg need convert sqlstyle aggreg often involv introduc group claus and sometim complex condit claus figur illustr complex exampl aggreg xsltemplat matchag xslvariabl namecurrag result xslvalueof selectmindocdrinkersag currag beerspric correct sql select drinkersag minbeerspric drinker like beer drinker likesb group drinkersag drinkersnam incorrect sql select drinkersag minbeerspric drinker like beer likesb group drinkersag figur everi age find minimum price beer like drinker age xsltemplat matchdrink xslapplytempl selectbeerspric mode xslwithparam namepriceset selectbeerspric xslwithparam namedrinkernam selectnam xsltemplat matchpric mode xslparam namepriceset selectdefault xslparam namedrinkernam selectdefault xslvariabl namecurrpric xslvariabl namecurrb xslvalueof select xslif testcurrpriceminpriceset result xslvalueof selectdrinkernam xslvalueof selectcurrb xslvalueof selectcurrpric select drinkersnam likesb beerspric drinker beer beer like like beer beer like like likesnam likesb likesnam likesb group beersnam drinkersnam likesb beerspric likesnam figur cheapest beer price everi drinker paramet queri find everi drinker cheapest beer like price notic major stylist differ xslt sql xslt comput minimum price bind paramet search beer price retriev name sql use claus orthogon translat challeng per se address qualiti gener sql queri automat gener sql queri tend redund unnec querier tagger rdb schema view tree queri sql tupl sql gener optim qtree gener parser view output tree figur architectur translat sari join typic selfjoin optim elimin redund join difficult implement sinc gener prob lem call queri minim npcomplet commerci databas system queri minim expens user write sql queri requir minim case automat gener sql queri howev easi overshoot creat mani join part challeng system avoid gener redund join architectur figur show architectur translat xml view defin relat databas use view tree xml view typic consist entir databas also subset export subset view relat databas also includ redund inform view never comput instead kept virtual view tree defin system accept xslt program virtual xml view translat sql sever step first parser translat xslt program intermedi represent ir ir dag direct acycl graph templat uniqu root templat default mode templat match leaf node contribut program result path root leaf node correspond sql queri final sql queri union queri path translat first queri tree qtree qtree gener qtree repres multipl possibl overlap navig xml document togeth select join aggreg condit variou node explain section sql gener plu optim take qtree input gener equival sql queri use xml schema rdb schema view tree sql gener describ section optim discuss section querier easi task take gener sql queri get result tupl rdb result tupl pass onto tagger similar produc output user format dictat origin queri function querier tagger straightforward focu henc discuss further xsltemplat matchdrink xslvariabl namenamevar xslvalueof selectnam xslif testnamevarbrian xslapplytempl selectdrink mode xslparam namebeerset selectb xsltemplat matchdrink mode xslparam namebeerset selectdefaultbeerset result xslvalueof selectnam xslvalueof selectcountbeersnam beerset figur find drinker n pair n number beer brian drinker like translat use run exampl program figur retriev number beer everi drinker like common brian begin describ xslt program pars intern represent ir reflect semant program function style proceed describ qtree abstract represent path travers program view tree qtree repres singl path travers use intermedi represent purpos translat xml tree travers sql describ represent xml view relat data the view tree final show combin inform qtree view tree gener equival sql queri parser output parser intermedi represent ir xslt queri besid strictli syntact pars modul also perform sequenc transform gener ir first convert xslt program function represent templat mode express function figur a show run exampl add extra function repres builtin xslt templat rule figur b match result program xml schema extract view tree match wildcard in stantiat navig parentchild expand simpl parentchild navig step valid navig retain shown sequenc figur c d e case may multipl match figur a illustr exampl expans figur b end result run exampl ir shown figur case result singl call graph case templat call one templat condit ifthenels case construct uncondit as shown figur semant queri union possibl path lead start templat return node shown figur end procedur one ind pendent straightlin call graph follow demonstr convert straightlin call graph sql queri sql queri whole xslt program union individu sql queri qtree qtree simul xml schema succinctli describ comput done queri qtree abstract captur three compon xml queri a fdrinker beer countbeersnam beerset a simplifi function form fdrinker beer countbeersnam beerset b extend builtin templat fdrinker beer countbeersnam beerset c function duplic fdrinker beer countbeersnam beerset d xpath expans f drinkersdrink beer countbeersnam beerset function call match figur variou stage lead ir gener queri figur path taken queri xml document b condit place node data valu along path c paramet pass function call correspond three element xml queri abov qtree follow compon a queri fragment fn beersdefaultb b xpath expans figur queri fragment complex xpath expans f_root f_drinker f_drinker return select drinker condit name brian select drinker param beer argument param select name param figur ir queri figur figur complex call graph decoupl tree tree repres travers select xpath express with applytempl use node tree label tag xpath compon henc node tree associ node xml schema entiti part output mark condit set collect condit queri includ condit specifi explicitli use xslif construct also includ predic xpath express map paramet paramet result anoth xslt queri nodeset given xpath expr sion scalar valu natur way repres use nest qtree approach take note condit insid nest qtree might refer entiti node paramet outer qtree figur a show qtree call graph figur three qtree figur q main qtree correspond xslt program pointer two qtree q q correspond two nodeset paramet pass program logic encapsul xslt program follow start root node travers drinker name brian beersbeernam pass paramet point start root travers drinker again travers one level name perform aggreg nodeset beer step correspond main qtree queri q note step queri start root go drinker again separ drinker node instanti sinc queri could refer drinker differ current one the root multipl instanc drinker child node qtree also creat everi nodeset exampl second paramet return call countbeernam repres qtree q predic condit xpath paramet repres qtree refer p defin q abstract qtree gener enough also use xml queri languag like xqueri xmlql qtree power succinct represent queri comput independ languag queri express in moreov convers qtree sql also independ queri languag view tree view tree defin map xml schema relat tabl choic view tree represent borrow silkrout view tree defin sql queri node xml schema figur show view tree beersdrinkersbar schema right hand side rule interpret sql queri rule head eg drinker denot tabl name argument denot column name argument two tabl repres join valu queri xml schema node depend anc tor exampl figur sql beernam depend drinker bar correspondingli sql queri child node alway superset sql queri parent put anoth way given sql queri parent node one construct queri child node ad appropri tabl constraint discuss later represent crucial avoid redund join henc gener effici sql queri sql gener section explain gener sql qtree use view tree explain befor qtree repres travers node origin queri constraint place queri node idea gener sql queri claus correspond travers constraint three step process first node qtree bound instanc relat tabl second appropri constraint gener use bind first step intuit first step gener part sql queri join constraint due tree travers second step gener explicitli specifi constraint final bind return node use gener select part next describ step name drinker drinker beer name q beer name root name condit q select drinkersnam countq drinker drinker q likesb like likesb q q likesb like condit figur qtree exampl queri left map sql right drinkersnam age astrosignnameastrosign beersbeernam price beersbeernam price barsbarnam barsbarnam frequentsdrinkernam barnam beersbeernam drinkernam beernamebeernam barnam frequentsdrinkernam barnam barsbeernam drinkernam figur view tree beersdrinkersbar schema figur bind qtree node bind associ relat tabl column pair qtree node tabl column pair treat valu bind step updat list tabl requir claus implicit tree travers constraint claus carri bind top manner avoid redund join node bound ancestor bound bind node instanti new version tabl present view tree sql queri child tabl constraint present sql parent repeat again node bound appropri tabl name use tabl renam requir field use sql inform view tree end result bind node n bind node lie path root n valu associ n form tablenamefieldnam list tabl includ claus implicit constraint due travers gener claus recal explicit condit encount queri travers store qtree step condit and select drinkersnam count likesb like likesb likesb like drinker drinker figur sql qtree q figur togeth along constraint gener bind step condit repres qtree boolean tree express leav express convert constraint recurs travers express step constant express use verbatim pointer qtree node replac bind pointer qtree ie express node set replac nest sql queri gener call convers process recurs point qtree gener select claus valu column tabl bound return node form select part sql queri return node pointer qtree handl mention queri gener use subqueri figur show map three qtree exampl sql step figur show sql gener algorithm q step elimin join condit intersect briefli explain choic view tree represent help elimin join condit two path qtree node lie path must valu one simpl approach would two bind two path independ common node add equal condit repres fact valu path same exampl consid simpl queri retriev drinker younger figur show qtree queri take approach bind node independ ad sql constraint follow sql drinker age name condit age figur qtree drinker age less queri select drinkersnam drinker drinker drinkersag approach howev first iter common node drinker node add condit lead better sql queri shown below select drinkersnam drinker drinkersag redund join elimin becom import complex queri mani node lie multipl path root leav optim autom queri gener suscept gener ineffici queri redund join nest queri optim unnest subqueri elimin join nec essari but all optim describ generalpurpos sql queri rewrit could done op timiz three reason address here first optim specif kind sql queri result translat therefor may miss gener purpos optim second experi one popular commerci databas system show that inde optim perform them final optim describ preserv semant gener semant preserv special context xslt sql translat henc cannot done generalpurpos optim nest queri optim appli predic express form b b nodeset subqueri appli express present conjunct condit default sql gener algorithm section gener sql queri nodeset b optim would unnest subqueri whether queri unnest depend properti nodeset b three possibl b singleton set simplest case one safe unnest queri chang multipl whole queri figur illustr case note astrosign xpath express nodeset determin nodeset singleton set use follow test view tree inform regard whether node multipl valu rel parent by specifi node qtree nodeset xml schema must singleton set queri find name drinker leo unoptim drinker leo select astrosignsign astrosign optim drinker astrosign figur unnest subqueri repres singleton set queri subqueri q figur unoptim likesb like likesb select likesb like likesdrink drinkersnam optim likesb like like likesb figur unnest subqueri duplic b duplic subqueri duplic queri evalu true valu set b henc one unnest queri without chang multipl figur illustr case exampl queri use previou section determin nodeset duplic use follow test qtree nodeset node except leaf node distinct set intuit sibl node with parent document uniqu edg leaf edg uniqu leav return queri guarante b duplic nodeset duplic exampl beer discuss section unnest queri might chang semant multipl result queri chang condit b evalu true onc unnest queri unnest aggreg oper use groupbi optim unnest subqueri use aggreg use groupbi outer level optim appli express form op b b nodeset op aggreg oper like sum min max count avg observ nest queri evalu everi iter outer queri get semant unnest queri groupbi iter outer queri groupbi iter outer queri add key tabl queri q figur q use below optim version shown figur unoptim sql q select drinkersnam countq drinker drinker optim sql q select drinkersnam countlikesdrink drinker drinker like like likesb group drinkersnam drinkersnam figur illustr groupbi optim claus outer queri groupbi claus aggreg condit move claus sql groupbi claus must field select queri henc field select claus also ad groupbi claus outer queri alreadi use groupbi optim appli also impli qtree optim use onc implement take simpl choic appli optim first time can figur illustr case exampl queri use previou section qtree reduct optim transform qtree itself long path unreferenc intermedi node shorten shown figur help elimin redund join optim done bind phase bind node check see shortcut path root node exist shortcut path possibl intermedi node path refer part qtree except immedi child parent node path condit refer intermedi node intermedi node one child incorrect creat shortcut path also view tree must specifi shortcut possibl rule use bind node shortcut taken edg shorten node bound rest algorithm proce befor observ optim also help make final sql queri less sensit input schema exampl beersdrinkersbar schema beer top level node instead child node drinker queri would obtain without reduct optim experi section tri understand well algorithm translat xslt queri sql queri implement algorithm java use javacc parser evalu done use tpch benchmark queri manual translat benchmark sql queri xslt gener sql queri xslt queri use algorithm process tri gaug strength limit algorithm studi impact optim describ section observ effect semant differ xslt sql tpch benchmark establish transact process council tpc industrystandard decis support qtree qtree reduct root beer drinker name root beer name figur qtree reduct queri beersnam test design measur system capabl examin larg volum data execut queri high degre complex iti consist busi orient adhoc queri queri heavili use aggreg sophist featur sql tpch specif point queri complex typic queri queri requir creation intermedi tabl follow aggreg field equival xslt translat would requir write two xslt program second one use result first possibl framework describ section current implement support paramet bound fragment input tree comput atom valu support paramet bound construct tree queri translat sql queri intermedi tabl case major part overal queri xslt anoth modif made aggreg multipl field like sumab taken aggreg singl new field sumc algorithm gener effici sql queri case quit complex detail tabl describ result translat individu queri present appendix a present summari result here queri singl aggreg level nonleaf groupbi convert tpch like same nest structur number join queri queri reason ineffici extra join groupbi semant mismatch xslt sql discuss below queri ineffici groupbi semant mismatch presenc nest queri queri use case statement sql select gener union two independ sql queri queri requir aggreg xslt output tran lation fulli support current implement hand gener led similar sql queri queri requir temporari tabl mention abov observ abl convert xslt temporari tabl effici sql mani queri translat effici origin sql version requir group intermedi output artifact translat algorithm due languagelevel mismatch xslt sql xslt queri ident result cannot written queri appropri extens xslt support groupbi one gener queri ident result coincid issu mention futur requir draft xslt util optim section describ util three opti mizat mention section obtain effici queri unnest subqueri section queri benefit optim case nodeset multipl distinct valu unnest aggreg section queri form aggreg optim use qtree reduct section queri qtree reduct use optim frequent mani queri would relat node deep schema without place condit parent node qtree reduct effici queri gener independ xml schema relat work silkrout xml publish system defin xml view relat databas accept xmlql queri view translat sql xml view defin view tree abstract borrow translat xmlql sql declar languag make translat somewhat simpler xslt translat xqueri sql describ use differ approach base intermedi represent sql gener techniqu process structur recurs queri bulk mode describ instead use gener tech niqu leverag inform present xml schema elimin relat queri prune describ sql queri block unnest intermedi languag discuss context starburst system conclus describ algorithm translat xslt sql necess system appli fragment xslt translat possibl full languag express program sql equival case program need split smaller piec translat sql translat base represent xslt program queri tree encod possibl navig program xml tree describ number optim techniqu greatli improv qualiti gener sql queri also valid system experiment tpch benchmark acknowledg thank jayant madhavan pradeep shenoy help discuss feedback paper dan suciu partial support nsf career grant gift microsoft alfr p sloan research fellowship r unql queri languag algebra semistructur data base structur recurs xperanto publish objectrel data xml xqueri xml queri languagexml path languag xpath optim implement conjunct queri relat data base xml path languag xpath queri languag xml effici evalu xml middlewar queri optim regular path express use graph schema silkrout trade relat xml requir extens rulebas queri rewrit optim starburst effici publish relat data xml document databas theori xml first cours databas system tr extensiblerul base queri rewrit optim starburst first cours databas system queri languag xml silkrout effici evalu xml middlewar queri databas theori xml optim regular path express use graph schema effici publish relat data xml document queri xml view relat data unql queri languag algebra semistructur data base structur recurs optim implement conjunct queri relat data base ctr zhen hua liu agnuel novoselski effici xslt process relat databas system proceed nd intern confer larg data base septemb seoul korea chengkai li philip bohannon p p s narayan compos xsl transform xml publish view proceed acm sigmod intern confer manag data june san diego california ce dong jame bailey static analysi xslt program proceed fifteenth australasian databas confer p januari dunedin new zealand rajasekar krishnamurthi raghav kaushik jeffrey f naughton unravel duplicateelimin problem xmltosql queri translat proceed th intern workshop web databas coloc acm sigmodpod june pari franc rajasekar krishnamurthi raghav kaushik jeffrey f naughton effici xmltosql queri translat add intellig proceed thirtieth intern confer larg data base p august septemb toronto canada wenfei fan jeffrey xu yu hongjun lu jianhua lu rajeev rastogi queri translat xpath sql presenc recurs dtd proceed st intern confer larg data base august septemb trondheim norway mustafa atay artem chebotko dapeng liu shiyong lu farshad fotouhi effici schemabas xmltorel data map inform system v n p may jixu liu millist vincent queri relat databas xslt data knowledg engin v n p januari artem chebotko mustafa atay shiyong lu farshad fotouhi xml subtre reconstruct relat storag xml document data knowledg engin v n p august sven gropp stefan bttcher georg birkenheu andr hing reformul xpath queri xslt queri xslt view data knowledg engin v n p april jame bailey transform reaction rule data web proceed sixteenth australasian databas confer p januari newcastl australia