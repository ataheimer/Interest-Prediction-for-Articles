t exact analysi exact chang a introduc kpayment problem given total budget n unit problem repres budget set coin k exact payment total valu n made use k disjoint subset coin goal minim number coin given n k allow actual payment made onlin name without need know payment request advanc problem motiv electron cash model coin long bit sequenc typic electron wallet limit storag capac kpayment problem addit applic resourceshar scenariosour result includ complet character kpayment problem follow first prove necessari suffici condit given set coin solv problem use character prove number coin solut kpayment problem least k hnk hn denot nth element harmon seri condit also use effici determin k the maxim number exact payment given set coin allow worst case secondli give algorithm produc n k solut minim number coin case denomin avail algorithm find coin alloc khnk coin both upper lower bound best possibl final show gener algorithm case denomin avail b introduct consid follow everyday scenario want withdraw n unit money bank teller ask how would like it let us assum need exact chang ie given payment request p n abl choos subset coin whose sum precis p let us assum would like withdraw n unit least possibl number coin case answer depend estim mani payment go make worst case may make n payment unit each forc take n coin denomin extrem may need make singl payment p case even know p advanc log coin sometim suffici as explain later articl provid complet analysi gener question call kpayment problem smallest set coin enabl one satisfi k exact payment request total valu n motiv payment system physic electron transact requir payment exact amount forc shop provid chang custom possess exact chang simpli shift problem custom shop number coin particularli import electron cash see eg electron coin inher long bit sequenc handl comput intens typic smartcard use store small memori space comput power anoth interest applic problem aris context resourc share concret consid commun link whose total bandwidth n link share timemultiplex fix schedul assign timeslot say cell atm line differ connect typic schedul small time slot sinc assign big slot small request entail underutil import note howev inher fix overhead associ time slot eg header atm cell would therefor desir multiplex schedul with time slot variou size accommod set request least number slot similarli withdraw scenario improv upon trivial n unitslot solut achiev know mani connect might run parallel know bound k number restrict longliv connect problem design schedul natur reduc kpayment problem kpayment problem definit formal problem follow two paramet budget denot n number payment denot k problem find number icoin also call coin denomin i denot c follow two requir satisfi budget complianc kpartit sequenc k payment request denot n exist way exactli satisfi payment use coin is exist nonneg integ repres number icoin use jth payment problem thu broken two part follow coin alloc problem partit n coin given n k ie determin c s coin dispens problem how given c s actual make payment possibl variant kpayment problem first mani system denomin avail for exampl know system coin even electron cash realm denomin may expens resourc thi denomin requir distinct pair secretpubl key central author see eg thu interest variant alloc problem restrict denomin version set possibl solut restrict c given allow denomin set d also one may consid onlin coin dispens problem algorithm requir dispens coin payment request without knowledg futur request offlin version valu k payment assum known first coin dispens result turn coin dispens problem easi greedi strategi work even onlin set result concern coin alloc problem sometim refer part problem kpayment problem basic result simpl necessari suffici condit sequenc c coin solv alloc problem theorem use character prove in theorem lower bound khnk k lnnk number coin solut n k h n denot nth element harmon seri lower bound best possibl sens met equal infinit mani n s ks theorem character use effici determin maxim number k given collect coin solv k payment problem corollari next major result effici algorithm find solut n k use least possibl number coin first deal case denomin allow theorem case number coin never theorem similarli lower bound upper bound best possibl gener theorem final use idea slightli refin way extend algorithm gener case restrict denomin set theorem relat work best knowledg current work first formul gener kpayment problem henc first analyz it one relat classic combinatori problem kpartit question mani way natur number n repres sum k posit integ problem less structur kpayment problem use deriv lower bound howev bound suboptim see section postagestamp problem also close relat cast term postag stamp problem find set denomin allow pay request valu use h coin n maxim postagestamp problem view invers payment problem one payment make number coin given goal find denomin set given size maxim budget remark postagestamp problem consid difficult problem even small number denomin see eg anoth relat question chang make problem repres given budget least number coin given allow denomin set gener changemak weakli nphard kozen zak verma xu studi question denomin set allow one use greedi strategi optim chang make organ section introduc notat give preliminari observ briefli discuss suboptim result section prove character k payment problem lower bound number coin solut section present analyz optim algorithm unrestrict denomin case section extend algorithm case restrict denomin final section give short overview applic result electron cash notat simpl result section develop intuit kpayment problem present simpl upper lower bound number coin requir notat shall use throughout articl summar figur solut c clear context remaind articl fix n k arbitrari given posit integ note may assum without loss gener k n sinc payment request valu ignor let us rough analysi kpayment problem alreadi mention abov case trivial solv take c better solut possibl sinc c k would satisfi k payment valu each case quit simpl least integ solv coin denomin given request p satisfi use coin correspond one binari represent p howev immedi clear one gener solut arbitrari n k consid arbitrari n usual techniqu round up next power paramet problem specif total budget ffl k number payment ffl d set allow denomin unrestrict case quantiti relat solut specif s number coin denomin aka icoin s convent budget alloc use coin denomin less formal ffl m largest denomin coin s formal alway quantiti relat make payment refer respect quantiti payment made standard quantiti convent h figur glossari notat seem appropri kpayment problem ask teller bank round amount withdraw conveni us let us ignor point moment consid problem gener k allow make dubiou assumpt may enlarg n one simpl solut would duplic solut payment k time let payment use dedic set coin specif mean alloc k coin k coin k coin on k dlog coin result approxim k log n coin guarante base simplist construct pay k payment know payment must valu n howev total budget alloc solut fact kn thu seem solv kpayment problem state limit valu payment place sum rather individu valu asid remark one corollari work specif theorem coin dispens done use greedi strategi see below binari construct coin alloc inde solv gener kpayment problem precis highest possibl denomin use mani icoin possibl dispens j icoin figur greedi algorithm coin dispens p amount paid assum power coin alloc algorithm alloc k coin denomin clearli number coin k log sum n coin dispens made greedili point largest possibl coin use descript greedi dispens algorithm present figur howev one note that perhap surprisingli result also indic binari algorithm right gener best algorithm describ section yield factor improv ie roughli fewer coin let us reconsid question gener n algorithm infinit mani valu k n gener arbitrari n k easi find solut n dispens payment valu remain set coin coin alloc total budget n use k addit payment sinc origin set solv payment problem close section simpl lower bound number coin requir solut kpayment problem bound base count argument sketch here number distinct possibl payment request allow observ algorithm must dispens differ set coin respons request follow number coin solut must least log n argument extend gener k use observ number distinct respons algorithm disregard order least p k n number way repres n sum k posit integ use standard bound partit see eg sinc number respons exponenti number coin one conclud number coin omegagamma k lognk problem character section first prove simpl condit necessari suffici set coin correctli solv kpayment problem use result obtain sharp lower bound number coin solut kpayment problem final outlin effici algorithm which given set coin s determin maxim k solut kpayment problem pleas refer figur notat necessari suffici condit theorem solv kpayment problem ki theorem proven seri lemma below necess proof hard intuit hardest case payment request equal interest part suffici proof start upper bound m largest denomin solut lemma solv kpayment problem dnke proof contradict suppos dnke consid k payment valu bnkc dnke total sum n clearli none payment use mcoin sinc c definit total budget avail payment n gamma m contradict follow lemma slightli stronger condit theorem use version proof theorem lemma solv kpayment problem ki proof let bnkc ki n consid k payment valu payment done coin denomin i henc ki turn suffici start show condit theorem hold singl payment valu n satisfi greedi algorithm lemma let p payment request suppos j p satisfi greedi algorithm use coin denomin j less proof prove induct j claim hold j p base case henc least p coin use pay amount total sum induct step assum claim hold j p consid j let number j coin dispens greedi algorithm name let r denot remaind payment algorithm dispens j note trivial hold dispens j coin need show hold well consid two case c j use get done case c j sinc algorithm greedi must case r hand j j henc j r done case too follow lemma key invari preserv greedi algorithm interest note algorithm proce larger coin smaller one induct proof goe opposit direct recal prime quantiti refer valu payment done lemma ki hold greedi algorithm dispens amount tm hold proof induct i claim trivial assum claim hold amount dispens use coin denomin i name j smallest remain denomin larger i note j well defin sinc name largest remain coin next note sinc coin denomin whose sum use algorithm now observ sinc algorithm greedi sinc least one jcoin use algorithm must case total amount dispens use coin denomin smaller j less j ie use eq get final use assumpt appli complet proof character proof of theorem necess condit follow directli lemma suffici assum ik m consid sequenc k request total valu n lth request serv greedi algorithm have induct applic lemma moreov lemma amount total remaind paid s long complet proof lower bound number coin use theorem deriv lower bound number coin solut kpayment problem theorem number coin solut kpayment problem least first prove littl lemma use theorem lemma number j proof proof of theorem lemma lemma bnkc ki lower bound theorem best possibl gener shown follow theorem theorem natur number infinit mani n exist solut kpayment problem budget n exactli kh bnkc coin proof choos natur number m km case solut solv kpayment problem theorem total number coin precis kh bnkc determin k given set consid invers problem given set coin c coin denomin i question mani payment make use coin ie find k note k well defin say k payment request cannot satisfi set k never total budget theorem directli appli answer question effici impli follow simpl corollari corollari let given coin alloc solv kpayment problem k min fbt ic mg optim algorithm unrestrict denomin present coin alloc algorithm find minim solut kpayment arbitrari n k assum denomin avail first prove optim algorithm give upper bound number coin alloc section gener algorithm handl restrict set denomin algorithm given arbitrari integ n k algorithm present figur find optim coin alloc intuit algorithm work scan possibl denomin i least number icoin suffic make ki number coin c thu approxim ith harmon element multipli k budget exhaust remaind ad simpli singl addiotin coin optim alloc theorem let denot solut produc alloc solv kpayment problem use least possibl number coin allocaten denomin order add icoin overflow n add remaind figur algorithm optim solut kpayment problem unrestrict denomin proof follow lemma lemma below import properti algorithm state follow loop invari lemma whenev alloc execut line follow assert hold ii proof line reach execut line execut loop line former case lemma hold trivial suppos line reach iter loop denot valu variabl last execut loop line execut i hold trivial execut henc i hold loop execut also note l kigammat therefor iii hold true execut loop final prove ii hold execut loop line execut ii hold trivial suppos line execut t case line mean therefor line c l kigammat henc l kigammat done use lemma theorem correct easili proven introduc notat facilit separ handl remaind i valu c variabl line execut lemma solv kpayment problem proof i lemma conjunct line code upon complet algorithm ii lemma sinc by line largest denomin denomin therefor theorem solv kpayment problem prove optim take work first deal coin alloc line reach show even remaind nonzero and additin coin alloc line solut produc alloc still optim end fix arbitrari solut kpayment problem use follow addit notat ffl number icoin ffl u budget alloc use coin denomin less u ffl n largest denomin coin formal note definit follow hold c lemma show alloc optimalignor remaind lemma c proof contradict suppos l smallest index ie use eq l henc eq l c impli integr l c sinc iii lemma ld l ic ie u l kl contradict theorem sinc l n prove optim even consid remaind lemma proof consid two case n use lemma fact n definit n get c done case suppos n m let prove lemma show first note sinc lemma use eq get hand sinc u therefor follow eq consid two subcas reduc nb done subcas otherwis proof lemma complet number coin alloc alloc theorem prove number coin solut produc alloc optim give tight bound number term n k nice interpret bound say worst penalti n k nice equival requir extra payment ie solv payment problem nice n k remark know direct reduct prove result first prove upper bound m slightli sharper gener bound lemma lemma largest denomin coin gener alloc satisfi l n proof iii lemma i particular ii lemma m use also eq get integr l n theorem number coin solut produc alloc k proof iii lemma integr conjunct lemma impli c therefor upper bound given theorem best possibl gener proven follow theorem theorem natur number infinit mani n solut kpayment problem budget n requir least k coin proof choos natur number divis n k algorithm produc largest denomin c follow number coin case precis gener restrict set denomin turn attent restrict denomin case set given set natur number requir solut c d get optim algorithm arbitrari set denomin allow solut follow idea algorithm alloc ensur least number coin m treatment remaind complic here motiv add remaind least possibl number coin also make sure invari maintain main loop broken restrict remaind alloc use denomin alreadi consid fact remaind alloc precis changemak problem solvabl dynam program ming for allow denomin set greedi strategi work too main algorithm allocategener given figur complet also includ figur descript dynam program algorithm optim changemak allocategener analysi use follow addit notat ig largest allow denomin smaller i ig smallest denomin larger i prove allocategener correct number coin alloc optim remark gener argument similar unrestrict case somewhat refin here theorem let denot solut produc allocategener solv kpayment problem allow denomin use least possibl number coin proof follow lemma below use loop invari captur import properti algorithm lemma whenev allocategener execut line follow assert hold ii proof line reach execut line execut loop line former case lemma hold trivial observ problem solvabl d coin certainli cannot satisfi payment request valu allow trivial solut n coin work k allocategeneralizedn k d largest den smaller next one l j l kj gammat check budget exhaust c l kj gammat not add coin els goto fd j d ig add remaind without greater denomin figur algorithm optim solut kpayment problem allow denomin d latter case let denot valu variabl last execut loop line execut i hold trivial execut hold loop execut then whether line execut l kj gammat thu iii true execut loop final show ii hold execut loop line execut line execut ii hold trivial otherwis line execut c l kj gammat henc l kj gammat correct allocategener proven next lemma follow convent section denot alloc produc allocategener line denot c valu correspond c s respect lemma solv kpayment problem allow denomin d proof i lemma conjunct line code upon complet algorithm highest denomin alloc algorithm then ii lemma fact makechang use coin higher denomin line therefor theorem solv kpayment problem makechangerd r downto i gamma j return r figur dynam program algorithm find least number coin whose sum r unit use denomin set d array multiset turn prove optim algorithm analysi proce similarli section first show alloc coin remaind ie line execut optim prove handl remaind optim well proof complic fact order ensur correct allocategener alloc remaind use denomin alreadi consid main loop henc immedi clear remaind alloc optim remaind section fix arbitrari competitor solut defin notion analog defin solut produc allocategener ffl number icoin ffl u budget alloc use coin denomin less u ffl n largest denomin coin formal facilit treatment remaind fix arbitrari subsulot solv kpayment problem budget thi possibl sinc solut budget n also solut budget smaller n use follow addit definit jd analog s largest denomin largest denomin alloc line allocategener henc final defin befor definit c start prove allocategener produc optim solutionignor remaind lemma c proof suppos l smallest index ie use l henc eq impli integr l c l iii lemma therefor sinc l u ld l id ic u contradict theorem sinc l corollari n proof suppos not then lemma u contradict fact u next prove solut use denomin larger largest one use s lemma n m proof consid two case suppos first line reach test condit line henc remaind alloc dynam algorithm m note n maxn therefor n maxm done case suppos next line reach line case sinc henc suppos contradict n m least one coin denomin alloc henc n get eq contradict theorem sinc follow remaind alloc optim for choic subsolut corollari c proof lemma amount must alloc use denomin use s statement therefor follow optim dynam program use makechang prove optim full solut s lemma proof corollari suffici prove number coin least much n done lemma remain consid case similarli lemma defin notat suffici show lemma use eq get u id also sinc u u c ic henc b thu eq get d requir exact payment electron cash section discuss issu exact payment model electron cash ecash briefli model bank set user set shop withdraw deposit protocol involv bank user shop payment protocol involv shop user requir user anonym given coin imposs infer user withdrew it even shop bank collabor hand ident user reveal user pay coin onc model implement electron wallet call smart card sever limit capac storag comput way implement exact payment ecash simplest way use multipl coin case result present paper explain coin withdrawn anoth approach divis coin arbitrari portion coin spent long sum exceed valu coin expect size divis coin comput resourc such time commun requir manipul greater nondivis coin intermedi approach present composit coin divis set prescrib set subcoin subcoin use payment deposit cannot divid further although size composit coin grow linearli number constitu subcoin for c subcoin typic size composit coin size still smaller size arbitrarili divis coin suffici small number subcoin result paper particularli use composit coin one get reason bound k number exact payment composit coin better arbitrarili divis coin respect certain rang n k current technolog techniqu better k acknowledg thank mike sak richard stanley yishay mansour help discuss eric bach bring postag stamp problem attent rakesh verma provid us copi agn chan valuabl suggest comment r untrac offlin cash wallet observ blind signatur untrac payment untrac electron cash construct distribut loop network optim bound changemak problem knapsack problem algorithm comput implement cryptograph smart card effici divis electron cash scheme univers electron cash postag stamp problem denomin associ base postag stamp problem effici electron notion techniqu cours combinator optim greedi chang make tr