t closur properti constraint a mani combinatori search problem express constraint satisfact problem class problem known npcomplet gener paper investig subclass aris restrict possibl constraint type first show set constraint give rise npcomplet class problem must satisfi certain type algebra closur condit investig differ possibl form algebra closur properti establish suffici ensur tractabl exampl show known class tractabl constraint finit domain character algebra closur properti final describ simpl comput procedur use determin closur properti given set constraint procedur involv solv particular constraint satisfact problem call indic problem b introduct solv constraint satisfact problem known npcomplet howev mani problem aris practic special properti allow solv effici question identifi restrict gener problem suffici ensur tractabl import practic theoret viewpoint extens studi restrict may either involv structur constraint word variabl may constrain variabl may involv earlier version part paper present intern confer constraint program see refer natur constraint word combin valu allow variabl mutual constrain exampl first approach found exampl second approach found paper take second approach investig class constraint give rise tractabl problem whatev way combin number distinct class constraint properti previous identifi shown maxim paper establish class constraint give rise npcomplet problem must satisfi certain algebra closur condit henc algebra properti necessari condit class constraint tractabl assum p equal np also show mani form algebra closur properti suffici ensur tractabl exampl wide applic result show known exampl tractabl constraint class finit domain character algebra condit kind even though origin defin differ way final describ simpl comput procedur determin algebra closur properti given set constraint test involv calcul solut fix constraint satisfact problem involv constraint given set work describ paper repres gener earlier result concern tractabl subproblem gener satisfi problem schaefer identifi possibl tractabl class constraint problem correspond special case constraint satisfact problem variabl boolean tractabl class describ special case tractabl class gener constraint describ below given exampl number tractabl constraint class also identifi feder vardi defin notion width constraint satisfact problem term logic program languag datalog show problem bound width solvabl polynomi time state problem determin whether fix collect constraint give rise problem bound width known decid howev shown restrict properti call bound strict width decid fact correspond algebra closur properti form describ here tractabl constraint class also shown characteris closur properti type paper build work feder vardi examin gener question link algebra closur properti tractabl constraint establish necessari suffici condit closur properti differ approach identifi tractabl constraint taken shown properti constraint refer rowconvex togeth pathconsist suffici ensur tractabl binari constraint satisfact prob lem note howev addit requir path consist rowconvex constraint constitut tractabl class sens defin paper fact class problem contain rowconvex constraint npcomplet paper organis follow section give basic definit section defin mean algebra closur properti set relat examin possibl form closur properti section identifi form necessari condit tractabl section identifi suffici tractabl section describ comput method determin closur properti satisfi set relat final summaris result present draw conclus constraint satisfact problem notat set d natur number n denot set ntupl element n tupl n rang n denot valu ith coordin posit ti tupl may written form ht subset n call nari relat d defin finit constraint satisfact problem wide studi artifici intellig commun definit instanc constraint satisfact problem consist ffl finit set variabl ffl finit domain valu d ffl set constraint fc g constraint c pair s list variabl length call constraint scope r ari relat d call constraint relat the tupl r indic allow combin simultan valu variabl length tupl constraint relat given constraint call ariti constraint particular unari constraint specifi allow valu singl variabl binari constraint specifi allow combin valu pair variabl solut constraint satisfact problem function variabl domain imag constraint scope element correspond constraint relat decid whether given problem instanc solut npcomplet gener even constraint restrict binari constraint paper shall consid restrict allow constraint relat fix subset possibl relat affect complex decis problem therefor make follow definit definit set relat gamma cspgamma defin decis problem instanc instanc p constraint satisfact problem constraint relat element gamma p solut exist algorithm solv everi problem instanc cspgamma polynomi time shall say cspgamma tractabl problem gamma tractabl set relat exampl binari disequ relat set d denot defin note cspfd g correspond precis graph jdjcolor problem problem tractabl jdj npcomplet jdj exampl consid ternari relat ffi set defin problem cspfffig correspond precis notallequ satisfi problem npcomplet exampl describ three relat use exampl constraint relat throughout paper relat set tupl element domain defin below problem cspfr consist constraint satisfact problem instanc constraint relat chosen set fr g complex cspgamma arbitrari subset gamma fr determin use techniqu develop later paper see exampl oper relat section shall examin condit set relat gamma allow known npcomplet problem reduc cspgamma reduct describ use standard oper relat algebra describ section definit defin follow oper relat ffl let r nari relat domain let mari relat d cartesian product r theta defin n mari relat r theta ffl let r nari relat domain d let n equal select oe ij r defin nari relat oe ffl let r nari relat domain d let subsequ n project r defin mari relat wellknown combin effect two constraint constraint satisfact problem obtain perform relat join oper two constraint next result simpl consequ definit relat join oper lemma relat join relat r calcul perform sequenc cartesian product equal select project oper r s view result conveni use follow notat notat set relat obtain given set relat gamma use sequenc cartesian product equal select project oper denot note contain exactli relat obtain deriv relat constraint satisfact problem instanc constraint relat chosen gamma closur oper shall establish signific inform cspgamma determin algebra properti set relat gamma order describ algebra properti need consid arbitrari oper d word arbitrari function k d arbitrari valu k result shall particularli interest certain special kind oper therefor make follow definit definit letomega kari oper k d ifomega that thenomega said idempot ffl exist index kg hd nonconst unari oper d thenomega call essenti unari note f requir nonconst constant oper essenti unari f ident oper thenomega call project ffl k exist index kg butomega project thenomega call semiproject thenomega call major oper binari oper hd gammai abelian group call affin oper oper extend oper tupl appli oper coordin posit separ ie pointwis henc oper defin domain relat use defin oper tupl relat follow definit kari oper let r nari relat d collect k tupl necessarili distinct defin follow final defineomega r nari relat use definit defin follow closur properti relat definit letomega kari oper d let r nari relat d relat r close underomega ifomega r r exampl let ternari major oper defin follow x otherwis relat r defin exampl close sinc appli oper element r yield element r exampl relat r defin exampl close sinc appli oper last element r yield tupl element r set relat gamma operationomega everi r gamma close underomega shall say gamma close underomega next lemma indic properti close oper preserv possibl project equal select product oper relat defin section lemma set relat gamma close underomega close underomega proof follow immedi definit notat set relat gamma domain d set oper gamma close denot gamma set closur oper gamma use obtain great deal inform problem cspgamma shall demonstr next two section first exampl thi shall show oper gamma use obtain reduct one problem anoth proposit set finit relat gamma polynomialtim reduct cspgamma cspomega gamma gammag proof let p problem instanc cspgamma consid instanc p obtain replac constraint relat r p relationomega r clear p obtain p polynomialtim follow definit p solut p solut follow result gamma contain noninject unari oper cspgamma reduc problem smaller domain one way view presenc noninject unari oper gamma indic constraint relat chosen gamma allow form global substitut similar notion defin freuder contain noninject unari oper shall say gamma reduc next theorem use gener result univers algebra show possibl choic gamma quit limit theorem reduc set relat gamma finit set either contain essenti unari oper onli gamma contain oper a constant oper b major oper c idempot binari oper which project d affin oper e semiproject proof set oper gamma contain project close composit henc constitut clone shown nontrivi clone finit set must contain minim clone minim clone contain either nonident unari oper constant oper major oper idempot binari oper which project affin oper semiproject furthermor gamma reduc gamma contain oper essenti unari straightforward show consid oper smallest possibl ariti gamma contain oper one last five class next two section shall examin possibl turn order establish said complex cspgamma variou case necessari condit tractabl section show set relat close essenti unari oper give rise class constraint satisfact problem npcomplet theorem finit set relat gamma finit set d gamma contain essenti unari oper cspgamma npcomplet proof jdj may assum without loss gener f g correspond boolean valu fals correspond boolean valu true follow problem cspgamma correspond generalis satisfi problem set boolean relat gamma defin see also establish problem npcomplet unless one follow condit hold everi relat gamma contain tupl everi relat gamma contain tupl everi relat gamma defin formula conjunct normal form conjunct one negat variabl everi relat gamma defin formula conjunct normal form conjunct one unneg variabl everi relat gamma defin formula conjunct normal form conjunct contain liter everi relat gamma set solut system linear equat finit field gf straightforward show case gamma close oper essenti unari see detail henc result hold larger valu jdj proceed induct assum jdj result hold smaller valu jdj let n matrix column consist possibl mtupl in order let r relat consist tupl occur row condit place choic order column r binari disequ relat d defin exampl construct relat r closest approxim r obtain relat gamma domain use cartesian product equal select project oper sinc finit intersect intersect special case join lemma word relat r obtain deriv constraint relat problem belong cspgamma two case consid exist tupl construct use appropri oper gamma close defin uniqu column correspond mtupl hd show gamma close underomega choos r gamma let p ariti r requir show r close underomega consid sequenc tupl r not necessarili mtupl ht i pair indic i j c appli equal select oe ij r obtain new relat r choos maxim set indic g correspond c distinct construct relat r final permut coordin posit r by sequenc cartesian product equal select project oper r r thi alway possibl construct r r sinc r know tupl r definit r henc appropri project element r r close underomega ifomega essenti unari result otherwis let f correspond unari oper set choic f cannot inject jfdj jdj induct hypothesi know either cspf gamma npcomplet in case cspgamma must also npcomplet els f gamma close oper phi essenti unari in case gamma close oper phif also essenti unari henc result follow induct case altern r contain tupl impli cspfd g reduc cspgamma sinc everi occur constraint relat replac equival collect constraint relat chosen gamma howev point exampl cspfd g correspond graph jdjcolor problem npcomplet jdj henc impli cspgamma npcomplet result hold case also combin theorem theorem give follow necessari condit tractabl corollari assum p equal np tractabl set reduc relat must close either constant oper major oper idempot binari oper affin oper semiproject note ariti semiproject jdj finit set finit mani oper match given criteria mean finit procedur check whether necessari condit satisfi see corollari below suffici condit tractabl shown previou section gamma tractabl set relat gamma must contain oper limit rang type consid possibl turn determin whether suffici ensur tractabl constant oper closur constant oper easili shown suffici condit tractabl proposit set relat gamma gamma close constant oper cspgamma solvabl polynomi time proof everi relat gamma close constant operationomega constant valu d everi nonempti relat gamma must contain tupl hd case decis problem constraint satisfact problem instanc p cspgamma clearli trivial solv sinc p either contain empti constraint case solut els p allow solut everi variabl assign valu d class set relat close constant oper rather trivial tractabl class refer class exampl let denot unari oper domain return constant valu constraint r defin exampl close sinc appli oper element r yield tupl h i element r constraint r defin exampl close sinc appli oper element r yield tupl h i element r fact r clearli close constant oper exampl two possibl constant oper d first two tractabl subproblem generalis satisfi problem identifi schaefer correspond tractabl class relat characteris closur two constant oper major oper show closur major oper suffici condit tractabl first establish relat r close major oper constraint involv r decompos binari constraint proposit let r relat ariti n close major opera tion let c constraint constrain variabl relat r problem p constraint c problem p obtain replac c set constraint ng exactli solut p proof clear solut p solut p sinc p obtain take binari project constraint p let oe solut shall prove induct n r therebi establish oe solut p result hold trivial assum n result hold smaller valu let ng set indic posit choos proposit induct hypothesi appli infi j g r j r agre posit except j sinc r close major oper appli oper exampl recal relat r defin exampl shown exampl r close oper sinc oper major oper know proposit constraint relat r decompos collect binari constraint follow relat is cours alway case constraint replac collect binari constraint variabl mani case binari project constraint relat allow extra solut follow exampl demonstr exampl recal relat ffi domain defin exampl binari project ffi follow join binari project contain tupl h h i element ffi clearli follow ffi cannot replac set binari constraint variabl theorem let gamma set relat finit domain d gamma close major oper cspgamma solvabl polynomi time proof problem instanc p cspgamma impos strong jdj consist polynomi time obtain new instanc p solut constraint p element close major oper proposit henc constraint p decompos binari constraint proposit henc corollari p solvabl polynomi time exampl one possibl major oper d which equal oper defin exampl easili shown possibl binari boolean relat close henc follow proposit boolean relat arbitrari ariti close major oper precis relat defin formula conjunct normal form conjunct contain liter henc set boolean relat gamma close major oper cspgamma equival satisfi problem sat wellknown tractabl subproblem satisfi problem recal class tractabl constraint identifi independ refer all constraint implic constraint thi class tractabl constraint refer class shown constraint fact precis relat close major oper defin exampl result rather unexpect view fact all constraint origin defin pure term syntact structur howev remark class tractabl set relat defin closur major oper true gener class contain set all constraint word exist tractabl set relat close major oper close oper follow exampl demonstr exampl let ternari major oper return median valu three argument in standard order d recal relat r defin exampl easi show r close sinc appli oper element r yield element r exampl henc theorem cspfr g tractabl howev shown exampl r close henc r all constraint binari oper first show closur arbitrari idempot binari oper gener suffici ensur tractabl lemma exist set relat gamma close idempot binari oper which project cspgamma npcomplet proof consid binari oper set defin follow tabl oper idempot project in fact exampl form binari oper known rectangular band consid function return first second bit binari express numer valu element d use function defin ternari relat r r d follow final defin r easili shown r close sinc appli oper element r yield element r howev also shown notallequ satisfi problem known npcomplet reduc polynomi time cspfrg henc cspfrg npcomplet result follow describ addit condit may impos binari oper shown closur binari oper satisfi addit condit suffici condit tractabl idempot binari oper set that u said aci oper make use follow result aci oper wellknown elementari algebra lemma let u aci oper set d binari relat r defin partial order two element least upper bound given ud follow lemma finit nonempti set uclos contain least upper bound respect partial order r upper bound denot ud use lemma show relat close arbitrari aci oper form tractabl class theorem set relat gamma finit domain d gamma close aci oper cspgamma solvabl polynomi time set relat close aci oper u let p problem instanc cspgamma first enforc pairwis consist obtain new instanc set solut pairwis consist p obtain form join everi pair constraint p replac constraint possibl smaller constraint obtain project origin scope repeat process chang constraint time complex procedur polynomi size p result p member cspgamma constraint relat p close u proposit let dv denot set valu allow variabl v constraint p sinc dv equal project uclos constraint onto v must uclos proposit two case consid set dv empti p solut decis problem trivial hand set nonempti claim assign valu udv variabl v give solut p decis problem trivial establish claim consid constraint relat r ariti n scope s must tupl r definit dsi consid tupl know r sinc r close u furthermor i udsi upper bound dsi dsi henc constraint c allow assign udv variabl v s sinc c arbitrari shown assign solut p henc solut p exampl two idempot binari oper which project correspond logic oper logic oper two oper aci oper correspond two possibl order d wellknown boolean relat close defin horn sentenc that is conjunct claus contain one unneg liter henc set boolean relat gamma close and cspgamma equival horn claus satisfi problem hornsat tractabl subproblem satisfi problem similarli boolean relat close defin conjunct claus contain one negat liter class relat also give rise tractabl subproblem satisfi problem exampl let finit subset natur number oper max return larger pair number aci oper follow type arithmet constraint amongst mani other close oper uppercas letter repres variabl lowercas letter repres posit con stant henc theorem possibl determin effici whether collect constraint type solut constraint includ and extend basic arithmet constraint allow wellknown constraint program languag chip class tractabl constraint first identifi refer maxclos constraint fact relat close u oper addit properti partial order r defin lemma total order d henc set constraint maxclos constraint relat close special aci oper kind see exampl exampl class tractabl constraint refer class ii howev remark class tractabl set relat defin closur aci oper true gener class contain set max close constraint word exist tractabl relat close aci oper close maximum oper associ total order domain an exampl relat relat r defin exampl see exampl below affin oper show closur affin oper suffici condit tractabl result establish use elementari method special case domain contain prime number p element shown that special case constraint close affin oper correspond precis constraint may express conjunct linear equat modulo p thi class tractabl constraint refer class iii generalis result arbitrari finit domain size make use result state feder vardi theorem finit group g set gamma coset subgroup direct product g cspgamma solvabl polynomi time corollari set relat gamma gamma close affin oper cspgamma solvabl polynomi time proof definit relat r close affin oper subset direct product abelian group properti r howev equival say r coset subgroup direct product group may appli theorem gamma obtain result exampl let r affin oper defin addit subtract modulo relat r defin exampl close r sinc appli r oper element r yield element r exampl sinc jdj prime result indic r must set solut system linear equat integ modulo fact exampl let g abelian group hd gammai g oper defin follow tabl let r affin oper defin rd addit subtract defin g relat r coset subgroup direct product g close r henc cspfrg tractabl corolllari one exampl relat follow easili seen case r set solut system linear equat field exampl one possibl abelian group structur henc one possibl affin oper d set boolean relat gamma close affin oper cspgamma equival problem solv set simultan linear equat integ modulo correspond final tractabl subproblem generalis satisfi problem identifi schaefer semiproject show closur semiproject oper gener suffici condit tractabl fact shall establish much stronger result show even close semiproject suffici ensur tractabl lemma finit set d jdj exist set relat gamma d gamma close semiproject d cspgamma npcomplet proof let finit set jdj let element d consid ig relat close semiproject d sinc element r contain two distinct valu coordin posit howev identifi boolean valu true boolean valu fals easi see cspfrg isomorph notallequ satisfi problem npcomplet see exampl current unknown whether tractabl set relat close combin semiproject unari oper binari oper includ tractabl class list abov howev situat simpl next exampl show exampl semiproject d subproblem satisfi problem characteris closur oper form calcul closur oper set relat gamma set d oper gamma close simpli map k d k satisfi certain constraint describ definit section show possibl identifi oper solv singl constraint satisfact problem cspgamma fact shall show closur oper precis solut constraint satisfact problem follow form definit let gamma set relat finit domain d natur number indic problem gamma order defin constraint satisfact problem ip gamma m ffl set variabl ffl domain valu d ffl set constraint fc g r gamma sequenc tupl r constraint c ariti r exampl consid relat r defin exampl indic problem fr g order ipfr g variabl con straint set variabl set constraint indic problem fr g order ipfr g variabl con straint set variabl set constraint illustr exampl indic problem given solut indic problem gamma order function d word mari oper d show precis mari oper gamma close theorem set relat gamma domain d set solut ip gamma m equal set mari oper gamma close proof definit know gamma close mari operationomega ifomega satisfi possibl choic r not necessarili distinct equival say omega satisfi constraint ip gamma m result follow exampl consid relat r defin exampl indic problem fr g order defin exampl solut may express tabular form follow variabl solut solut one solut constant oper cspfr g tractabl proposit fact problem cspfr g solut assign valu variabl complex cspfr g trivial indic problem fr g order defin exampl solut may express tabular form follow variabl solut solut solut solut first solut constant oper second third essenti unari oper howev fourth solut shown tabl interest easili check oper associ commut idempot aci binari oper second proof cspfr g tractabl theorem furthermor result show r combin relat of ariti also close aci oper obtain larger tractabl problem class corollari set relat gamma domain d jdj solut ip gamma jdj essenti unari cspgamma npcomplet proof follow theorem theorem theorem exampl recal relat r r r defin exampl shown exampl set contain one relat tractabl set gamma contain one relat shown use corollari cspgamma npcomplet special case obtain even stronger result corollari set relat gamma domain d solut ip gamma essenti unari cspgamma npcomplet otherwis polynomi proof shown exampl possibl closur oper restrict type specifi corollari suffici ensur tractabl result demonstr solv indic problem order provid simpl complet test tractabl set relat domain element answer question pose schaefer concern exist effici test tractabl generalis satisfi problem note carri test requir find solut constraint satisfact problem boolean variabl conclus paper shown algebra properti relat use distinguish set relat give rise tractabl constraint satisfact problem give rise npcomplet problem furthermor propos method determin oper set relat close solv particular form constraint satisfact problem call indic problem problem domain contain two element result provid necessari suffici condit tractabl assum p equal np effici test distinguish tractabl set relat problem larger domain describ algebra closur properti necessari condit tractabl also shown mani case closur properti suffici ensur tractabl particular shown closur constant oper major oper aci oper affin oper suffici condit tractabl shown use result oper one type set gamma contain relat close oper maxim set tractabl relat word addit relat close oper chang cspgamma tractabl problem npcomplet problem henc tractabl class defin way larg possibl investig applic result particular problem type tempor problem involv subset interv algebra also attempt determin presenc particular algebra closur properti constraint use deriv appropri effici algorithm tractabl problem acknowledg research partial support epsrc research grant grl britishflemish academ research collabor programm belgian nation fund scientif research british council also grate martin cooper mani help discuss suggest proof theorem r a relat model data larg share databank deriv constraint databas rela tion character tractabl constraint from local global consist structur identif relat data networkbas heurist constraintsatisfact prob lem monoton monad snp constraint satisfact a suffici condit backtrackbound search elimin interchang valu constraint satisfact prob lem comput intract guid theori npcomplet decompos constraint satisfact problem use databas techniqu an algebra character tractabl constraint a unifi framework tractabl con straint a test tractabl tractabl constraint order domain fast parallel constraint satisfact on binari constraint problem classifi essenti minim clone consist network relat network constraint fundament properti applic pictur process constraint relax may perfect comput complex minim clone i five type the complex satisfi problem clone on minim decompos rowconvex constraint network a gener arcconsist algorithm special tr suffici condit backtrackbound search networkbas heurist constraintsatisfact problem constraint relax may perfect local global consist structur identif relat data gener arcconsist algorithm special fast parallel constraint satisfact monoton monad snp constraint satisfact binari constraint problem decompos constraint satisfact problem use databas techniqu characteris tractabl constraint tractabl constraint order domain relat model data larg share data bank comput intract unifi framework tractabl constraint complex satisfi problem ctr andrei bulatov andrei krokhin peter jeavon complex maxim constraint languag proceed thirtythird annual acm symposium theori comput p juli hersonisso greec yuanlin zhang roland h c yap consist set intersect eighteenth nation confer artifici intellig p juli august edmonton alberta canada richard e stearn harri b hunt iii exploit structur quantifi formula journal algorithm v n p may hubi chen express rate constraint annal mathemat artifici intellig v n p august d a cohen tractabl decis constraint languag impli tractabl search constraint v n p juli peter jeavon david cohen justin pearson constraint univers algebra annal mathemat artifici intellig v n p lane a hemaspaandra sigact news complex theori column acm sigact new v n decemb lefteri m kirousi phokion g kolaiti complex minim satisfi problem inform comput v n p novemb andrei bulatov martin grohe complex partit function theoret comput scienc v n p decemb lane a hemaspaandra sigact news complex theori column acm sigact new v n march andrei a bulatov hcolor dichotomi revisit theoret comput scienc v n p decemb victor dalmau peter jeavon learnabl quantifi formula theoret comput scienc v n p septemb david cohen peter jeavon richard gault new tractabl class old constraint v n p juli david cohen peter jeavon richard gault new tractabl constraint class old explor artifici intellig new millennium morgan kaufmann publish inc san francisco ca david cohen peter jeavon peter jonsson manoli koubaraki build tractabl disjunct constraint journal acm jacm v n p sept hubi chen period constraint satisfact problem tractabl subclass constraint v n p april richard gault peter jeavon implement test tractabl constraint v n p april harri b hunt iii madhav v marath richard e stearn stronglyloc reduct complexityeffici approxim algebra optim abstract algebra structur proceed intern symposium symbol algebra comput p juli london ontario canada vctor dalmau new tractabl class constraint satisfact problem annal mathemat artifici intellig v n p may peter jonsson andrei krokhin recogn frozen variabl constraint satisfact problem theoret comput scienc v n p decemb martin grohe dniel marx constraint solv via fraction edg cover proceed seventeenth annual acmsiam symposium discret algorithm p januari miami florida georg gottlob nicola leon francesco scarcello hypertre decomposit tractabl queri proceed eighteenth acm sigmodsigactsigart symposium principl databas system p may june philadelphia pennsylvania unit state david a cohen martin c cooper peter g jeavon andrei a krokhin complex soft constraint satisfact artifici intellig v n p august andrei a bulatov dichotomi theorem constraint satisfact problem element set journal acm jacm v n p januari georg gottlob francesco scarcello martha sideri fixedparamet complex ai nonmonoton reason artifici intellig v n p june andrei a bulatov vctor dalmau toward dichotomi theorem count constraint satisfact problem inform comput v n p may mosh y vardi constraint satisfact databas theori tutori proceed nineteenth acm sigmodsigactsigart symposium principl databas system p may dalla texa unit state hubi chen rendezv logic complex algebra acm sigact new v n decemb georg gottlob nicola leon francesco scarcello complex acycl conjunct queri journal acm jacm v n p may