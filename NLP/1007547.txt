t model check xml manipul softwar a use xml de facto data exchang standard allow integr heterogen web base softwar system regardless implement platform program languag hand rich treestructur data represent express xml queri languag such xpath make formal specif verif softwar system manipul xml data challeng paper present initi effort autom verif xml data manipul oper use spin model checker present algorithm translat bound xml data xpath express promela input languag spin techniqu present paper constitut basi web servic analysi tool wsat verifi ltl properti composit web servic b introduct web base softwar system eg web servic becom increasingli import partli due wide use web electron commerc error system multimillion dollar transact carri out costli adhoc repair failur accept static analysi techniqu especi model check valuabl ensur correct robust system deploy gener agre messag exchang among web base system xml format exampl almost permiss make digit hard copi part work person classroom use grant without fee provid copi made distribut profit commerci advantag copi bear notic full citat first page copi otherwis republish post server redistribut list requir prior specif permiss andor fee juli boston massachusett usa web servic standard eg wsdl bpelw wsci owl built xml relat standard includ xml schema xpath rich treestructur data represent xml power xpath express how ever imped direct applic model check techniqu verif web base system earlier effort verifi web servic eg basic focu control flow abstract away xml data semant analysi paper present initi effort formal specif verif softwar system xpath base manipul bound xml data techniqu present paper constitut basi web servic analysi tool wsat verifi linear tempor logic ltl properti convers protocol interact bpelw web servic clearli techniqu also use verif type softwar system exchang xml data use spin backend model checker verif xml data manipul oper develop algorithm translat xml data type xpath express promela input languag spin handl xml data manipul consist two part map xml schema type system promela translat algorithm gener promela code xpath express type map straightforward howev translat xpath express trivial implement translat algorithm present paper part wsat use spin backend model checker base follow consider promela support array use translat xml schema data type commun channel promela enabl us model asynchron commun among web servic howev spin explicitst model checker may scale larg data domain due statespac explos futur plan investig use symbol model check techniqu verif xml data manipul verif composit web servic investig use petri net model web servic composit specifi use messag sequenc chart model use finit state machin analyz use ltsa model checker earlier effort verif web base softwar system mostli concentr analysi control flow techniqu handl xml data howev enabl verif properti relat data manipul enabl us analyz web base softwar system greater level detail without adhoc data abstract idea employ backend model checker verif express languag use verif tool bandera jwig project extend java languag highlevel featur web servic program dynam construct document ensur gener xml document consist messag format declar use dsd type system similar xml schema jwig provid static analysi set predefin properti verif problem consid paper and wsat rather differ consid relationship express tempor logic multipl xml messag execut web servic also focu xpath express part jwig techniqu present paper appli bound xml data onli number children xml node alway bound unbound xml schema type variou fragment xpath captur use unrank tree automata unrank tree automata model overcom problem bounded data semant leaf valu node lost model exampl fragment xpath studi allow arithmet constraint qualifi reason structur xml document paper organ follow section review xml relat standard essenti system exchang xml data formal model establish standard facilit technic discuss later section introduc map msl a theoret model xml schema promela translat algorithm xpath promela present section section discuss applic present techniqu verif web servic section conclud paper xml relat standard section present syntax semant xml msl xpath translat algorithm present follow section build definit given section xml extens markup languag xml markup languag use describ data de facto univers data transfer format internet xml play central role specifi semistructur data way platform languag neutral degre selfexplanatori xml schema provid type system xml ie use specifi expect data organ xml document xpath one popular xml queri languag use navig xml document access compon similar html xml document structur use tag written follow howev tag xml describ content data rather appear anc fig a show xml document contain data regist messag sent investor regist stock analysi servic a descript servic provid section xml document consist string contain identif investor list stock identifi investor interest in payment inform xml document model tree intern node correspond tag leaf node correspond basic type valu document fig a correspond tree fig b follow introduc formal represent xml document one simplif make omit tag attribut use xml sinc tag attribut regard leaf node child correspond tag node simplif impair express power model definit xml document quadrupl l list label label either intern node tag leaf node valu basic type such boolean integ string denot ith node l li indic start n size l parent function a b defin p transit reflex closur p r n n rang function a ri n b j j given node index i pi point parent node sinc root parent defin node i ri denot maximum index node subtre node i note constraint p r guarante l preorder travers document tree x fig c quadrupl represent xml document fig a obvious list l preorder travers tree fig b parent function p rang function r describ tree structur exampl subtre start node requestlist span five node henc rang function definit extend describ tree sequenc restrict pi item b modifi pi tree sequenc call node whose parent node root node introduc split oper split tree sequenc two tree sequenc extract oper gener tree sequenc singl xml document tree extract content definit given xml tree sequenc r split integ appli x node root node result two tree sequenc l p coincid p domain s ns r coincid r restrict domain s r given xml tree sequenc least root node k split tree sequenc k sequenc consecut appli split oper k time second part result previou split call oper ksplit regist requestlist payment accountnumstockid stockid regist investorid vip requestlist stockid stockid payment accountnum a b c figur xml document a correspond tree b formal represent c definit given singl xml tree extract oper gener tree sequenc extractx appli exact oper xml tree part c fig get xml tree sequenc x investorid vip requestlist stockid stockid payment accountnum note that tree sequenc x split exist split x xml schema msl xml provid standard way exchang data inter net howev parti exchang xml document still agre type data ie tag appear document order etc xml schema languag defin xml data type paper focu subset xml schema exampl handl unord sequenc type model schema languag msl compact formal model captur featur xml schema use simplifi version msl type express defin follow g g g gk repres msl type b basic data type string integ boolean tag n two posit integ n intuit semant msl type express summar follow tg denot type root node label children type match sequenc msl type repres g gmn denot sequenc size least n member type g g gk denot order sequenc first member type g second member type g on and g gk denot choic among type g gk simplifi present assum type g gk appear g gk g gk deriv rule g b g tg similar xml defin parent function msl type given two msl type g g pg exist either follow two condit satisfi g g gk associ attribut call tag msl type g g deriv rule g tg tag null formal xml document tree sequenc instanc msl type g one follow hold g b leaf node valu type b g tg x singl xml document tree instanc g g gmn exist ksplit x result tree sequenc instanc g g g gk exist ksplit x result tree sequenc x xk instanc g gk respect g g gk x instanc g exampl easi verifi xml document regist fig instanc follow msl type regist xpath order write specif program manipul xml document need express languag access valu node xml document use subset xpath navig xml tree return answer node fragment xpath use consist follow oper child axi descend axi selfrefer parentrefer test b node name test t wildcard predic xpath express defin follow const op exp exp op exp empti string exp denot zero repetit exp syntax rule express basic type such boolean integ string construct combin xpath locat path repres p constant valu rep resent const oper basic type repres op two type locat path rel locat path absolut locat path absolut locat path start rel locat path repres r consist list step repres s connect step rel locat path evalu left right step selfrefer parentrefer complex form consist node test n sequenc predic form exp node test n three possibl form type test b name test t wildcard match final step function call posit last follow restrict function call appear last step locat path formal xpath express accept input form c d context c set node indic xml document x either singl node x set valu basic type set node indic input context must ascend order repetit output xpath express set node xml document use input set valu x l n domain node indic x ie n dom domain leaf node valu semant xpath express exp as well step s node test n locat path r defin function formal defin semant xpath express give exampl express result evalu below distinguish node indic valu write node indic bold charact consid input root node xml document present fig follow xpath express investorid result fals true resp present formal semant xpath express give semant node test first step locat path final entir xpath express consid node test n input c d c set node indic node xml document x l n p r result nc d defin follow n type b n t nc d n nc d basic rule select children node input node type tag resp rule simpli return children node final input set valu nc d return empti set definit step similar given step input c d set valu simpli return node x result defin follow exp d true expc d exp boolean express d expc d exp locat path otherwis d last sc d c posit c rule handl self refer parent refer straightforward third rule step either return singleton set d empti set depend evalu predic note locat path use predic evalu true return non empti set node final evalu step consist node test plu seri predic reduc equival locat path exampl step stockidposit equival locat path stockidposit given input c d function call last simpli return singleton set contain size context c posit return posit c posit count start given rel path r rs input c d accord formula step rel locat path execut one one left right note context step result previou step case r rs replac rc d equat follow set n p d exampl given xml document fig input first step descend oper locat path stockidpositionint produc new context later step gener result absolut locat path defin base rel locat path absolut locat path p r input c d root p r pc d final semant xpath express basic type form exp exp op exp defin follow basic comput result possibl combin valu set two operand exp exp unari oper handl similarli assum oper op either relat oper arithmet oper boolean oper note that use condit boolean xpath express evalu true result set contain least one true valu work draft delic handl scenario two set arithmeticcomparison oper one support xpath semant present paper rais type error operand contain one valu hard support second semant approach mtype stringvalu int intvalu t_stockid stockid int stockid_occ int intvalu int intvalu mtype m_accountnum t_accountnum accountnum t_creditcard creditcard mtype choic t_requestlist requestlist t_payment payment figur promela translat exampl msl promela section focu map type msl promela present exampl translat fig translat algorithm given fig fig promela translat msl type given exampl clearli msl basic type straightforward map promela exampl int boolean map promela type int bool respect msl type string map mtype enumer type promela eg leaf node valu investorid xpath translat explain later string constant collect declar use symbol constant mtype assum string use sole constant expect oper chang valu mtype variabl translat complex msl type complic gen eral msl complex type translat correspond promela exampl regist type exampl map promela declar typedef regist intermedi type requestlist insid regist translat typedef requestlist prefix ad prevent name collis intermedi type sinc intermedi msl type child parent type promela type declar parent type correspond attribut definit exampl statement t requestlist requestlist defin attribut requestlist typedef regist intermedi msl type multipl occurr eg stockid element defin array max occurr array size addit addit variabl eg stockid occ defin parent type record actual occurr msl type construct use choic oper variabl choic use record actual type chosen xml instanc msl type eg choic attribut declar payment fig present procedur tr take msl type declar g input gener two string output first string ie ret contain type declar g as well necessari type declar intermedi type second output attribut definit g g intermedi type exampl procedur call intermedi type requestlist ret contain declar stockid requestlist ret contain t requestlist requestlist we show gener separ fig howev handl easili shown fig function bodi tr process input msl type declar recurs accord syntax rule note that properli handl issu array declar type multipl occurr complex type construct use choic oper declar g includ intermedi type ret attribut definit input g g intermedi function trg msl string begin string ret ret switch case g intermedi type els mtype m g tag switch return ret ret figur translat msl promela xpath promela section present translat algorithm xpath promela start brief discuss use xpath express xml manipul softwar studi motiv exampl final present translat algorithm consid use xpath languag xml data manipul bpelw wsci basic two type usag boolean xpath express use branch loop condit locat path arithmet express use left right hand side assign statement re spectiv handl two case separ sinc semant xpath express depend context use exampl locat path use boolean condit mean differ case use left hand side assign sinc implement two case similar remaind paper concentr translat boolean xpath express motiv exampl consid follow xpath boolean express xml variabl regist msl type regist defin exampl msl type variabl request consist singl child stockid in xpath prefix use denot variabl name xpath express follow variabl name evalu valu variabl which xml document start context root node correspond xml document express queri whether document regist last stockid valu greater equal stockid request correspond promela translat shown fig result xpath express result predic resp index posit last index posit int i i i i i i precalcul valu last store comput first predic els skip bre i i od translat whole express first predic second predic fi bre translat express v_requeststockidintvalu v_registerrequestliststockidiintvalu els skip figur xpath promela exampl note four boolean variabl five integ variabl promela translat boolean variabl bresult use record evalu result whole xpath express bre bre use evalu two predic right hand side express bre use evalu last function integ variabl use array indic differ part promela code record valu function call last use posit function hard see comput valu last prior evalu whole xpath express record valu i main bodi calcul loop search proper valu array index satisfi first predic valu stockid greater main bodi comput whole boolean xpath express similar loop search proper valu array index i code handl two predic nest note posit variabl array index properli updat accord semant boolean express xpath standard bresult set true find valu satisfi boolean express final note effici promela translat one present fig exampl integ variabl for array index reus replac i implementa tion variabl assign optim achiev ob jectiv howev omit detail implement simplifi present support data structur make follow observ base motiv exampl shown fig everi xpath languag construct ex pression path step correspond promela code segment exampl boolean xpath express shown equat correspond whole promela code fig right hand side correspond whole code line left blank left hand side correspond empti statement sinc code gener it particular loop gener step gener xml data correspond msl type multipl occurr ie type declar gmn exampl step stockid right hand side correspond loop line line gener code segment embed other exampl segment line correspond int embed code step stockid emb code predic positionlast line gener code regard nestedloop simul search procedur locat path evalu boolean express place bodi innermost loop translat algorithm need mechan repres structur input xml document approach conveni captur promela code segment gener embed other henc introduc two data structur use translat algorithm type tree structur repres msl type statement macro repres partial gener promela code segment also defin sever function manipul data structur type tree use type tree static repres input output xpath locat path or step given xml variabl msl type straightforward deriv correspond type tree exampl fig correspond type tree xml variabl regist equat msl type given exampl note node type tree correspond subexpress msl type express given exampl root node correspond whole type express henc node also correspond msl type type tree node label msl type for root node also label xml variabl name note associ msl type multipl occurr node equip addit index exampl index associ node fig recal msl type multipl occurr translat array promela index use access element array node regist regist string requestlist int payment creditcard int stockid idx i accountnum int figur typetre variabl regist type tree trace back root tree get qualifi name ie express promela translat access data type repres node exampl registerrequestliststockidiintvalu qualifi name node prefix v automat ad system avoid name collis intvalu name attribut basic type int defin number function type tree given type tree t xpath step s function markchildt proce follow unmark mark node t node unmark step mark children result execut step s return modifi t exampl let tr type tree fig node mark node mark let step requestlist result markchildtr s type tree node mark node function markparentt markallt markroott work similar way exampl node mark node execut markchildmarkalltr int statement macro translat algorithm xpath construct correspond promela code segment code segment regard list statement macro sequenti concaten use statement macro or simpli macro captur block promela code certain function macro one blank space anoth promela code segment embed five type macro use translat algorithm summar be low macro input paramet correspond promela code appear paramet replac actual input valu macro use statement macro promela code els skip els break od empti blank fig present set macro organ tree two type edg child parent embed edg shown solid arrow sequenti composit edg shown dot arrow call tree macro tree fact promela code gener xpath express construct captur use one set macro tree given macro tree straightforward gener correspond promela code exampl macro tree fig correspond code segment line line with line line blank fig empti cond init init init init regist stockid int sequenc insert figur associ two attribut macro input type node output type node type tree macro input node character start node macro start search ing output node start point embed exampl fig macro fori correspond code step stockid locat path top figur input type node type node fig correspond type xml variabl regist output node also input node embed type node with msl type stockid result evalu step input type node translat except concaten code two express input node embed code match output node blank insert also associ hashtabl macro record map xpath locat path qualifi name exam ple hashtabl last empti macro fig map locat path shown fig ie right hand side equat qualifi name node ie express v registerstockidiintvalu three differ function emb macro an insertandreplacec c function return one macro tree result embed c blank c translat c alway guarante singl macro tree c set macro tree matchinsert function requir insert macro tree must match output node host insertal insertandreplac requir match insert c blank c insertandreplac replac locat path c qualifi name base hashtabl host function gencoden gener macro tree given type node n gencod reli global registri r regist index variabl process befor function trace back current type node root type node whenev unprocess index encount macro gener index index regist r new macro gener old macro gener embed new macro form nest loop exampl index process gencoden gener fori given n node fig exp intermedi els blank ifexp fill end els end s els end c gencod type node souttre figur translat algorithm syntax direct translat algorithm discuss syntax direct translat algorithm present fig nontermin eg exp p one inheritedattribut intre two synthesizedattribut outtre code attribut intre outtre type tree use captur input output xpath languag construct respect attribut code set macro tree record gener promela code correspond nontermin nontermin exp addit attribut var boolean variabl record evalu result exp var attribut null exp intermedi express eg exp use branch condit host languag predic anoth xpath locat path exampl gener promela code fig equat attribut var boolean express predic int positionlast bre bre respect handl express rule handl translat xpath boolean arithmet express rule subexpress inherit intre exp exampl evalu equat intre inherit null anoth ex ampl process express int intre inherit version type tree shown fig node mark node discuss instanc type tree gener later handl xpath locat path code exp synthes code two subex pression basic idea emb code gener exp code exp regardless match inputoutput type node by use insertal instead matchinsert exp intermedi eg use boolean branch condi tion need addit process call insertandreplac insert anoth macro synthes code macro assign true attribut var exp evalu true henc gener code evalu boolean express store result var exampl mention earlier code right hand side equat whole code fig except line blank code left hand side empti macro synthes code equat two subexpress macro which assign var ie bresult embed blank line call insertandreplac note locat path equat replac qualifi name rest express relat syntax rule ie rule work similar way pass inform intre subexpress synthes code outtre subexpr sion final note outtre use syntax rule express handl locat path rule handl translat xpath locat path rule locat path associ xml variabl correspond type tree gener pass step path exampl handl right hand side equat type tree fig gener ate note even xml variabl new type tree instanc gener index attribut uniqu name exampl precalcul valu last line anoth type tree gener xml variabl regist index node instead fig rule handl absolut locat path inherit attribut intre handl differ xpath oper respect rule process path step step left right pass outtre partial path p step right note synthes code need match type node embed macro matchinsert call handl step rule handl step semant rule clear rule call markchild function symbol execut step intre type node outtre function gencod call gener macro tree final rule handl case step predic exampl boolean express int let us call e equat synthes code consist two part evalu code express line evalu e macro line allow insert code later step line handl function call handl posit last call littl bit complic though idea similar substitut appear function call integ variabl properli updat valu function call integ variabl contain right valu posit or last call owner nonintermedi boolean xpath express call appear owner exp need anoth attribut call prefix contain promela macro just like code attribut code prefix place ahead code contain code form complet code owner posit call encount acquir uniqu integ variabl call let v append macro initv prefix attribut owner insert incv blank macro gener immedi previou step exampl handl posit equat integ variabl acquir initi statement line updat statement line which insid blank code correspond previou step int handl last even complic work three mode normal mode copi mode process mode normal mode first time last call encount copi mode last encount second time precalcul code gener process mode case valu last call precalcul valu chang more consid last call equat exampl normal mode acquir integ variabl last call ie i call handl owner ie equat precalcul valu last henc line line gener second translat equat reach last call copi mode initi updat statement gener precalcul code ie line line return precalcul process last enter process mode allow chang appear last second predic replac i exampl translat equat split two recurs translat task left right hand path hard see left hand side gener empti macro concentr right hand side convert follow form translat algorithm start regist process step left right first type tree regist as shown fig gener function markal call result tree pass outtre step stockid outtre step stockid node mark node function gencod call node gener macro correspond line fig with line blank handl next step int similar macro gener embed macro gener befor third step positionlast integ variabl acquir function two call respect initi updat statement posit gener line line howev sinc normal mode last gener code last instead translat equat call precalcul last line gener return second translat call equat first translat call advanc last step int gener empti macro whose hashtabl contain inform map right hand side locat path correspond qualifi name final synthes code attribut equat macro line insert two locat path equat replac qualifi name applic section discuss applic techniqu verif web servic present case studi techniqu help identifi delic design error xpath express convers protocol then briefli discuss work verifi interact bpelw web servic web servic analysi tool wsat techniqu present paper constitut basi convers protocol topdown specif specifi desir global behavior messag sequenc composit web servic formal convers protocol tupl p ma composit schema p m defin set peer particip composit web servic messag class transmit among peer guard finit state automaton gfsa set messag class defin composit schema here messag class consist msl type sender re ceiver finit set state initi state f set final state transit relat transit form sourc destin state c messag class g guard transit guard consist guard condit set assign transit taken guard condit evalu true assign specifi content messag sent given transit peer p sender messag type c guard g predic follow m messag sent vector contain last instanc messag type receiv sent peer p guard written use xpath express present convers protocol name stock analysi servic sa fig present overal structur control flow fig fragment formal specif shown fig sa involv three peer investor inv stock broker firm sb research depart rd inv initi stock analysi servic send regist messag sb may accept reject registr registr accept sb send analysi request rd rd send result analysi directli inv report receiv report inv either send ack sb cancel servic then sb either send bill servic inv continu servic anoth analysi request fig present partial specif sa proto col specif sa consist two part schema gfsa protocol schema specifi set peer list msl type list peer peer messag class built upon msl type gfsa specif consist state tran sition present two key transit protocol regist ack cancel accept reject bill request termin report investor research dept rd stock broker regist reject termin accept request report ack request report ack cancel bill cancel bill termin figur stock analysi servic t transit equip guard determin transit condit assign messag sent exampl transit send messag type request transit condit follow boolean xpath express rest guard assign valu investorid stockid field request messag sent accord semant gfsa except request messag appear left side assign oper appear messag class refer latest copi messag class henc transit condit mean if stockid latest request messag last stockid regist messag assign tri send stockid subsequ in regist messag stockid appear latest request messag similarli guard transit specifi latest request messag contain last stockid regist messag bill messag sent conclud interact gener logic intend send list stockid initi regist messag one one hard see sa protocol translat promela process the translat xpath msl promela present paper translat control flow gfsa discuss note promela translat initi stage assign initi valu messag nondeterminist given logic transit t natur propos follow ltl properti promela translat sa protocol index v registerrequestliststockid occ registerrequestliststockidindexintvalu valu frequeststockid valu convers schema typelist regist stockidxsdint payment accountnumxsdint creditcardxsdint messagelist registerinv sb regist rejectsb inv reject protocol initialst s finalstatess transitionrel guard regist stockid guard figur sampl convers specif ltl properti tempor oper g mean glob alli tempor oper f mean eventu index valu two predefin constant variabl start v qualifi name refer xml data discuss section variabl msg variabl promela translat gfsa record current messag sent exampl transit execut msg assign valu request ltl properti state that regist messag contain stockid at posit index valu valu eventu request contain stockid noth wrong happen ie regist reject inv cancel servic interestingli spin soon identifi sa specif satisfi propos ltl properti spin give error trace regist messag three stockid valu respect errortrac show first request stockid sent transit disabl stockid latest request last stockid regist messag instead transit trigger send bill messag conclud interact verif identifi error design xpath transit guard reli presumpt there redund stockid regist messag howev enforc specif spin explicit model checker verif unfortun scale well integ domain set verif time second memori consumpt around mb domain increas memori consumpt grow mb howev experi show spin still use identifi error protocol restrict data domain complex data manipul one challeng aris model check composit web servic sinc commun among web servic asynchron interest problem analyz web servic becom undecid propos sever suffici condit restrict control flow web servic undecid induc asynchron commun avoid verif process decis procedur suffici condit implement research project wsat wsat also support ltl model check composit web servic specifi popular industri standard bpelw key idea translat bpelw servic gfsa represent techniqu present paper appli translat gfsa promela wsat extend futur support web servic specif languag such daml wsci etc conclus paper present techniqu repres xml data xpath express promela techniqu allow us verifi ltl properti xml manipul softwar web servic contrast earlier work approach abstract away xml data manipul implement algorithm wsat tool verifi sever exampl system includ convers protocol bpelw web servic futur work plan appli symbol model check techniqu tackl larg state space caus xml data acknowledg bultan support part nsf career award ccr nsf grant ccr fu partial support nsf career award ccr nsf grant ii ccr su support part nsf grant ii ii r busi process execut languag web servic bpelw msl model wc xml schema convers specif new approach design analysi eservic composit extend java highlevel web servic construct convers protocol formal specif verif reactiv electron servic analysi interact bpel web servic realiz convers protocol messag content wsat tool formal analysi web servic composit spin model checker primer refer manual verif busi process web servic contain equival xpath fragment document structur descript simul verif autom composit web servic automata theori xml research owl servic coalit web servic analysi tool wsat web servic choreographi interfac wsci xml path languag xml schema tr bandera msl myampersandmdash model wc xml schema simul verif autom composit web servic contain equival xpath fragment automata theori xml research convers specif extend java highlevel web servic construct analysi interact bpel web servic realiz convers protocol messag content ctr j koehler r hauser s sendal m wahler declar techniqu modeldriven busi process integr ibm system journal v n p januari richard hull jianwen su tool composit web servic short overview acm sigmod record v n june mark grechanik find error interoper compon proceed second intern workshop incorpor cot softwar softwar system tool techniqu p may